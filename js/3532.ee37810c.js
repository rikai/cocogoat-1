"use strict";(self["define"]=self["define"]||[]).push([[3532],{63247:function(e,a,l){l.r(a),l.d(a,{default:function(){return X}});l(96553),l(1687),l(98379),l(93955),l(65910),l(10085),l(17390),l(9917),l(69437);var t=l(12335),r=l(63573),i=l(33685),d=l(30693),n=l(40981),u=l(6504),s=l(19812),o=l(55893),c=l(44220);const v=(0,s._)("div",{class:"topbar"},null,-1),m=(0,s._)("span",{class:"desc"},"点击头像切换用户",-1),w=["src"],f={class:"user-name"},h={class:"user-id"},p=(0,s.Uk)("   添加 "),g={style:{"text-align":"right"}},_=["src"],U={class:"sel-uname"},y=(0,s.Uk)("保存");function C(e,a,l,C,k,W){const V=n.$Y,b=(0,s.up)("fa-icon"),z=u.mi,I=n.eI,E=d.EZ,x=r.nH,D=i.BT,A=i.km,M=r.ly,T=t.zd;return(0,s.wg)(),(0,s.iD)("section",{class:(0,o.C_)(e.$style.userManager)},[v,(0,s.Wm)(I,{ref:"datatable","highlight-current-row":"",data:e.allUsers,class:"account-table",onCurrentChange:e.handleCurrentChange},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{prop:"id"},{header:(0,s.w5)((()=>[m])),default:(0,s.w5)((a=>[(0,s._)("img",{class:"table-avatar",src:e.getAvatar(a.row.avatar)},null,8,w),(0,s._)("div",f,(0,o.zw)(a.row.name),1),(0,s._)("div",h,(0,o.zw)(a.row.id),1)])),_:1}),(0,s.Wm)(V,{width:"120px"},{header:(0,s.w5)((()=>[(0,s.Wm)(z,{class:"add-button",type:"primary",plain:"",style:{float:"right"},onClick:e.addUser},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{icon:"plus"}),p])),_:1},8,["onClick"])])),default:(0,s.w5)((a=>[(0,s._)("div",g,[(0,s.Wm)(z,{style:{width:"35px"},onClick:(0,c.iM)((l=>e.editUser(a.row)),["prevent","stop"])},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{icon:"pen-to-square"})])),_:2},1032,["onClick"]),e.allUsers.length>1?((0,s.wg)(),(0,s.j4)(z,{key:0,type:"danger",style:{width:"35px","margin-left":"2px"},plain:"",onClick:(0,c.iM)((l=>e.delUser(a.row)),["prevent","stop"])},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{icon:"trash-can"})])),_:2},1032,["onClick"])):(0,s.kq)("",!0)])])),_:1})])),_:1},8,["data","onCurrentChange"]),(0,s.Wm)(T,{modelValue:e.edit.show,"onUpdate:modelValue":a[3]||(a[3]=a=>e.edit.show=a),"custom-class":"edit-drawer",size:320,title:(e.edit.edit?"编辑":"添加")+"账号","append-to-body":!1,"z-index":900,"destroy-on-close":""},{default:(0,s.w5)((()=>[(0,s.Wm)(M,{"label-position":"left","label-width":"auto"},{default:(0,s.w5)((()=>[(0,s.Wm)(x,{label:"UID"},{default:(0,s.w5)((()=>[(0,s.Wm)(E,{modelValue:e.edit.id,"onUpdate:modelValue":a[0]||(a[0]=a=>e.edit.id=a),placeholder:"100000....",size:"large"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(x,{label:"名称"},{default:(0,s.w5)((()=>[(0,s.Wm)(E,{modelValue:e.edit.name,"onUpdate:modelValue":a[1]||(a[1]=a=>e.edit.name=a),placeholder:"爷真可爱",size:"large"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(x,{label:"头像"},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{modelValue:e.edit.avatar,"onUpdate:modelValue":a[2]||(a[2]=a=>e.edit.avatar=a),size:"large",style:{width:"100%"}},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.i18n.characters,(a=>((0,s.wg)(),(0,s.j4)(D,{key:a.id,value:a.id,label:a.name,class:(0,o.C_)(e.$style.userSelectorItem)},{default:(0,s.w5)((()=>[(0,s._)("img",{src:e.getAvatar(a.id)},null,8,_),(0,s._)("span",U,(0,o.zw)(a.name),1)])),_:2},1032,["value","label","class"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,s.Wm)(z,{type:"primary",size:"large",style:{width:"100%"},onClick:e.saveForm},{default:(0,s.w5)((()=>[y])),_:1},8,["onClick"])])),_:1},8,["modelValue","title"])],2)}l(21703);var k=l(28593),W=l(82619),V=l(20521),b=l(24621),z=l(1607),I=l(14287),E=l(94281);z.vI.add(I.r8p,I.Yai,I.Vui);var x=(0,s.aZ)({setup(){function e(e){try{const a=W.i18n.characterAvatar[e.replace(/_/g,"")];if(!a)throw new Error;return a}catch(a){return W.i18n.characterAvatar.traveler}}const a=(0,V.iH)(null);(0,s.YP)([a,k.ar],(()=>{var e;null===(e=a.value)||void 0===e||e.setCurrentRow(k.XE.value.find((e=>e.id===k.ar.value)))}));const l=e=>{t.value.show||e&&e.id&&e.id!==k.ar.value&&(k.ar.value=e.id)},t=(0,V.iH)({show:!1,edit:"",id:"",name:"",avatar:"traveler"});function r(){t.value={show:!0,edit:"",id:"",name:"",avatar:"traveler"}}function i(e){t.value={show:!0,edit:e.id,id:e.id,name:e.name,avatar:e.avatar}}function d(){if(["options","currentUser","cocogoat"].includes(t.value.id)||t.value.id.includes("/")||t.value.id.includes("\\")||t.value.id.includes(" "))return void b.T.alert("UID不合适","出错了");if(!t.value.edit){if(k.XE.value.find((e=>e.id===t.value.id)))return void b.T.alert("UID重复","出错了");const e=(0,k.Vv)();return e.user.name=t.value.name,e.user.avatar=t.value.avatar,(0,E.t8)(t.value.id,e),(0,k.hk)(),void(t.value.show=!1)}if(t.value.edit!==t.value.id){if(k.XE.value.find((e=>e.id===t.value.id)))return void b.T.alert("UID重复","出错了");const e=(0,E.U2)(t.value.edit);(0,E.IV)(t.value.edit),(0,E.t8)(t.value.id,e)}const e=(0,E.U2)(t.value.id);e.user.name=t.value.name,e.user.avatar=t.value.avatar,(0,E.t8)(t.value.id,e),(0,k.hk)(),k.ar.value===t.value.edit&&(k.ar.value=t.value.id),t.value.show=!1}async function n(e){try{await b.T.confirm("真的要删除吗？","提示")}catch(a){return}e.id===k.ar.value&&(k.ar.value=k.XE.value[0].id),(0,E.IV)(e.id),(0,k.hk)()}return{i18n:W.i18n,allUsers:k.XE,currentUser:k.ar,getAvatar:e,datatable:a,handleCurrentChange:l,addUser:r,editUser:i,delUser:n,edit:t,saveForm:d}}}),D={userSelectorItem:"user-selector-item-a1c68a",userManager:"user-manager-af1dcf"},A=l(48998);const M={};M["$style"]=D;const T=(0,A.Z)(x,[["render",C],["__cssModules",M]]);var X=T}}]);