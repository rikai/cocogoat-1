"use strict";(self["define"]=self["define"]||[]).push([[4954],{86022:function(e,t,a){a(21703);const n=(e,t)=>Math.floor(Math.random()*(t-e+1)+e),s=()=>{const e=new Error("Delay aborted");return e.name="AbortError",e},i=({clearTimeout:e,setTimeout:t,willResolve:a})=>(n,{value:i,signal:l}={})=>{if(l&&l.aborted)return Promise.reject(s());let r,o,c;const u=e||clearTimeout,d=()=>{u(r),c(s())},v=()=>{l&&l.removeEventListener("abort",d)},w=new Promise(((e,s)=>{o=()=>{v(),a?e(i):s(i)},c=s,r=(t||setTimeout)(o,n)}));return l&&l.addEventListener("abort",d,{once:!0}),w.clear=()=>{u(r),r=null,o()},w},l=e=>{const t=i({...e,willResolve:!0});return t.reject=i({...e,willResolve:!1}),t.range=(e,a,s)=>t(n(e,a),s),t},r=l();r.createWithTimers=l,e.exports=r,e.exports["default"]=r},31060:function(e,t,a){a.d(t,{zG:function(){return h}});var n=a(61976),s=a(71836),i=a(69997),l=a(84627),r=a(40192),o=a(51020),c=a(82619),u=a(75345);function d(){let e;e=new l.Cc(new URL(a.p+a.u(4679),a.b)),console.log("Worker created using worker-plugin");const t=(0,n.Ud)(e);return{worker:t,_worker:e}}function v(){const{worker:e,_worker:t}=d(),{worker:a,_worker:n}=d(),{scannerOnImage:l,scannerOnLine:v,recognizeAchievement:w}=e,{recognizeAchievement:h,scannerOnLine:g}=a;let p=e=>{};const f=e=>{p=e},m=e=>{throw p(-99),e};t.addEventListener("error",m),n.addEventListener("error",m);const y=(async()=>{try{const[t,n]=(0,i.LS)(),l=r.hP?"ort-wasm-simd.wasm":"ort-wasm.wasm",d=r.hP?"opencv-simd.wasm":"opencv-normal.wasm";await t,await(0,i.sB)([l,d,"ppocr.ort"],(e=>p(e)),n);const v=(0,u.Z)(c.i18n.amos);await Promise.all([e.setResources(s.ZP),a.setResources(s.ZP),e.initAchievementMap(o.Z,v),a.initAchievementMap(o.Z,v)]),p(100)}catch(l){throw p(-1),l}t.removeEventListener("error",m),n.removeEventListener("error",m),await Promise.all([e.init(),a.init()])})();return{recognizeAchievement:h,recognizeAchievement2:w,scannerOnLine:g,scannerOnLine2:v,scannerOnImage:l,initPromise:y,workerCV:e,workerOCR:a,onProgress:f}}let w;function h(){return w||(w=v()),w}},21277:function(e,t,a){function n(e,t){parent&&window!==parent&&parent.postMessage({app:"cocogoat.scanner.achievement",event:e,data:JSON.parse(JSON.stringify(t))},"*")}a.d(t,{l:function(){return n}})},57813:function(e,t,a){a.r(t),a.d(t,{default:function(){return fe}});var n=a(19812),s=a(55893);const i={key:0},l={key:1,style:{"padding-top":"20px"}},r={class:"inline-status"},o={key:1,class:"pbar"},c={key:0,class:"pbar-bar-text"};function u(e,t,a,u,d,v){const w=(0,n.up)("Loader"),h=(0,n.up)("float-content-b"),g=(0,n.up)("web-capturer"),p=(0,n.up)("float-content"),f=(0,n.up)("c-ready");return(0,n.wg)(),(0,n.iD)("main",null,[e.state===e.S.Init?((0,n.wg)(),(0,n.iD)("section",i,[(0,n.Wm)(w,{onDone:t[0]||(t[0]=t=>e.state++)})])):((0,n.wg)(),(0,n.iD)("section",l,[((0,n.wg)(),(0,n.j4)(g,{ref:"cap",key:e.capKey,popup:e.state===e.S.Wait||e.state===e.S.Capture,onExit:t[1]||(t[1]=t=>e.state=e.S.Processing),onReady:t[2]||(t[2]=t=>e.state=e.S.Wait)},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{capture:e.capture,state:e.state===e.S.Capture?1:0,success:e.recognized.success,fail:e.recognized.fail,scanned:e.scanned,duplicate:e.dup,webControlEnabled:e.webControlEnabled},null,8,["capture","state","success","fail","scanned","duplicate","webControlEnabled"])])),_:1},8,["popup"])),e.state>e.S.Wait?((0,n.wg)(),(0,n.iD)("div",{key:0,class:(0,s.C_)(e.$style.statusInner)},[(0,n._)("div",r,[(0,n.Wm)(p,{"in-float":!1,capture:!1,state:1,success:e.recognized.success,fail:e.recognized.fail,scanned:e.scanned,duplicate:e.dup,onClick:t[3]||(t[3]=t=>e.state===e.S.Capture&&(e.state=e.S.Processing))},null,8,["success","fail","scanned","duplicate"])]),e.state===e.S.Capture?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"no-box",onClick:t[4]||(t[4]=t=>e.state===e.S.Capture&&(e.state=e.S.Processing))},(0,s.zw)(e.webControlEnabled>0?"自动滚动进行中":"请按手动匀速滚动页面，完成后点此结束"),1)):(0,n.kq)("",!0),e.state>e.S.Capture?((0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("div",{class:(0,s.C_)(["pbar-bar",{finish:e.state===e.S.Finish}])},[(0,n._)("div",{class:"pbar-bar-in",style:(0,s.j5)({width:(e.recognized.success+e.recognized.fail+e.dup)/e.scanned*100+"%"})},null,4),e.state===e.S.Finish?((0,n.wg)(),(0,n.iD)("div",c,"完成")):(0,n.kq)("",!0)],2),e.state===e.S.Finish?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"restart",onClick:t[5]||(t[5]=(...t)=>e.reset&&e.reset(...t))},"重新开始")):(0,n.kq)("",!0)])):(0,n.kq)("",!0)],2)):(0,n.kq)("",!0),e.state===e.S.Wait?((0,n.wg)(),(0,n.j4)(f,{key:1,onDone:t[6]||(t[6]=t=>e.state=e.S.Capture)})):(0,n.kq)("",!0)]))])}a(85827),a(21703);var d=a(16197),v=a(12507),w=a(31060),h=a(20521),g=a(77225);function p(e,t,a,s,i,l){return(0,n.wg)(),(0,n.iD)("div")}const f="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1024 1024' fill='%23fff'%3E%3Cpath d='M421.646 361.414v-93.081c0-7.562 2.678-13.996 8.038-19.366 5.354-5.346 11.812-8.022 19.366-8.022h246.373c7.562 0 14.012 2.676 19.356 8.022 5.37 5.372 8.038 11.804 8.038 19.366v246.405c0 7.554-2.668 13.988-8.038 19.358-5.346 5.328-11.794 8.024-19.356 8.024H602.35v202.605c0 10.576-3.736 19.582-11.254 27.102-7.484 7.462-16.514 11.232-27.1 11.232H219.07c-10.574 0-19.616-3.77-27.112-11.232-7.508-7.52-11.254-16.526-11.254-27.102V399.758c0-10.588 3.748-19.594 11.254-27.112 7.496-7.484 16.538-11.232 27.112-11.232h202.573zm0 60.234H279.31c-10.574 0-19.618 3.748-27.112 11.232-7.508 7.52-11.254 16.526-11.254 27.112v224.497c0 10.576 3.748 19.582 11.254 27.102 7.494 7.462 16.538 11.232 27.112 11.232h224.455c10.586 0 19.616-3.77 27.1-11.232 7.52-7.52 11.254-16.526 11.254-27.102V542.118h-93.066c-7.554 0-14.012-2.694-19.366-8.024-5.362-5.37-8.038-11.804-8.038-19.358v-93.088zm87.64-120.47c-7.554 0-14.012 2.678-19.366 8.024-5.362 5.37-8.038 11.804-8.038 19.368v125.936c0 7.554 2.678 13.988 8.038 19.358 5.354 5.33 11.812 8.024 19.366 8.024h125.906c7.562 0 14.012-2.694 19.356-8.024 5.37-5.37 8.037-11.804 8.037-19.358V328.57c0-7.562-2.667-13.996-8.037-19.368-5.346-5.346-11.794-8.024-19.356-8.024H509.288zM225.169 85.038l-49.932-28.83c-14.406-8.319-19.342-26.737-11.024-41.14s26.736-19.343 41.14-11.025l104.332 60.234c14.404 8.318 19.342 26.736 11.024 41.14L260.473 209.75c-8.318 14.406-26.736 19.342-41.14 11.024s-19.342-26.736-11.024-41.14l23.282-40.326c-40.44 15.522-74.804 37.426-103.092 65.712-42.704 42.704-71.337 99.733-85.903 171.087L.002 333.512c14.744-71.535 43.36-128.545 85.85-171.037 36.211-36.212 82.65-62.026 139.315-77.442zm536.998 808.386l49.932 28.828c14.404 8.318 19.342 26.736 11.024 41.14s-26.736 19.342-41.14 11.024L677.651 914.18c-14.404-8.318-19.341-26.736-11.024-41.14l60.236-104.331c8.318-14.404 26.736-19.342 41.14-11.024s19.342 26.736 11.024 41.14l-23.282 40.326c40.44-15.52 74.804-37.424 103.092-65.712 42.704-42.704 71.338-99.734 85.904-171.09l42.591 42.592c-14.744 71.534-43.36 128.548-85.85 171.038-36.211 36.212-82.649 62.025-139.315 77.441z'/%3E%3C/svg%3E",m="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1024 1024' fill='%23fff'%3E%3Cpath d='M468.867 212.468a43.133 43.133 0 1 0 86.266 0 43.133 43.133 0 1 0-86.266 0zM468.867 383.4a43.133 43.133 0 1 0 86.266 0 43.133 43.133 0 1 0-86.266 0zM468.867 554.334a43.133 43.133 0 1 0 86.266 0 43.133 43.133 0 1 0-86.266 0zM609.448 651.782L512 749.229l-97.448-97.447c-17.572-17.573-43.132-17.573-59.107 0s-17.573 43.132 0 59.107l127.8 127.8c7.987 7.988 20.767 12.78 30.353 12.78s20.767-4.792 30.352-12.78l127.8-127.8c17.573-17.572 17.573-43.132 0-59.107-19.17-17.573-44.73-17.573-62.302 0z'/%3E%3Cpath d='M555.133 0h-84.668C302.727 0 171.732 132.593 171.732 298.733v426.534c0 166.14 132.592 298.733 298.733 298.733h84.668c166.14 0 298.733-132.593 298.733-298.733V298.733C852.268 132.593 721.273 0 555.133 0zM767.6 723.67c0 119.812-94.253 212.467-212.468 212.467h-84.668c-119.813 0-212.468-94.252-212.468-212.468V298.733c0-119.813 94.253-212.468 212.468-212.468h84.668c119.812 0 212.468 94.253 212.468 212.468V723.67z'/%3E%3C/svg%3E",y=new Image;y.src=f;const b=new Image;b.src=m;var C=(0,n.aZ)({props:{state:Number,success:Number,fail:Number,duplicate:Number,scanned:Number,webControlEnabled:Number},setup(e){const t=(0,n.f3)("canvas");function a(){const e=t.value.getContext("2d");e.textAlign="left",e.fillStyle="#fff",e.fillRect(0,0,t.value.width,t.value.height),e.fillStyle="#7e7e7e",e.fillRect(0,0,.28*t.value.width,t.value.height),e.drawImage(y,.05*t.value.width,.112*t.value.width,.18*t.value.width,.18*t.value.width),e.fillStyle="#999",e.font=.056*t.value.width+"px 微软雅黑",e.fillText("请切换到游戏窗口",.42*t.value.width,.18*t.value.width),e.fillText("打开任意成就页面",.42*t.value.width,.26*t.value.width)}function s(){const a=t.value.getContext("2d");a.textAlign="left",a.fillStyle="#fff",a.fillRect(0,0,t.value.width,t.value.height),a.fillStyle="#4096fe",a.fillRect(0,0,.28*t.value.width,t.value.height),a.drawImage(b,.05*t.value.width,.112*t.value.width,.18*t.value.width,.18*t.value.width),a.font=.044*t.value.width+"px 微软雅黑",e.webControlEnabled&&e.webControlEnabled>0?(a.fillText("自动翻页进行中，请勿移动鼠标",.348*t.value.width,.292*t.value.width),a.fillText("如需中断，请按Win键停止识别",.356*t.value.width,.352*t.value.width)):(a.fillText("匀速向下翻页 完成后点此结束",.348*t.value.width,.292*t.value.width),a.fillText("尽量将鼠标保持在左侧图标处",.356*t.value.width,.352*t.value.width)),a.fillText("扫描",.34*t.value.width,.092*t.value.width),a.fillStyle="#00b57a",a.fillText("成功",.508*t.value.width,.092*t.value.width),a.fillStyle="#cf0000",a.fillText("失败",.676*t.value.width,.092*t.value.width),a.fillStyle="#999",a.fillText("重复",.844*t.value.width,.092*t.value.width),i()}function i(){if(0===e.state)return;const a=t.value.getContext("2d");a.fillStyle="#fff",a.fillRect(.28*t.value.width,.112*t.value.width,.72*t.value.width,.12*t.value.width),a.font=.08*t.value.width+"px 微软雅黑",a.textAlign="center",a.fillStyle="#4096fe",a.fillText((e.scanned||0).toString(),.38*t.value.width,.2*t.value.width),a.fillStyle="#00b57a",a.fillText((e.success||0).toString(),.552*t.value.width,.2*t.value.width),a.fillStyle="#cf0000",a.fillText((e.fail||0).toString(),.72*t.value.width,.2*t.value.width),a.fillStyle="#999",a.fillText((e.duplicate||0).toString(),.888*t.value.width,.2*t.value.width)}return(0,n.YP)((()=>e.state),(e=>{0===e?a():s()})),(0,n.YP)(e,(()=>{i()}),{deep:!0}),(0,n.bv)((()=>{0===e.state?a():s()})),{}}}),x=a(48998);const E=(0,x.Z)(C,[["render",p]]);var k=E,_=a(21277),S=a(86022),L=a.n(S),P=a(86463),D=a.n(P),I=a(13065),T=a(14287),W=a(75444),z=a(1607),R=a(83889),M=a(93043),F=a(91281),Z=(a(9917),a(62416),a(6504)),O=a(51064);const A={class:"content"},H=(0,n._)("div",{class:"title"},"还差最后一步",-1),N={class:"desc"},U=(0,n.Uk)(" 请手动切换到成就列表界面，然后点击下面按钮继续 "),V=(0,n._)("br",null,null,-1),q={key:0},$={key:1},j={key:2},Y={class:"l"},B={class:"m"},K=(0,n._)("div",{class:"t"},"我已打开成就列表界面",-1),G={key:0,class:"d"},J={key:1,class:"d"},Q={class:"r"};function X(e,t,a,i,l,r){const o=O.v,c=(0,n.up)("fa-icon"),u=Z.mi;return(0,n.wg)(),(0,n.iD)("div",{class:(0,s.C_)(e.$style.ready)},[(0,n._)("div",A,[H,(0,n._)("div",N,[U,V,e.hasPictureInPicture?((0,n.wg)(),(0,n.iD)("div",q,"如果没有看到悬浮窗，请点击页面空白处")):e.windowId>0?((0,n.wg)(),(0,n.iD)("div",$,[(0,n.Wm)(o,{title:"当前浏览器不支持悬浮窗",description:"如需中断扫描，请按Win键",type:"warning","show-icon":""})])):((0,n.wg)(),(0,n.iD)("div",j,[(0,n.Wm)(o,{title:"当前浏览器不支持悬浮窗",description:"完成翻页后，请点击“停止共享屏幕”按钮或手动回到本窗口点击停止扫描",type:"warning","show-icon":""})]))])]),(0,n.Wm)(u,{class:"start-btn start-gray",onClick:t[0]||(t[0]=t=>e.$emit("done"))},{default:(0,n.w5)((()=>[(0,n._)("div",Y,[(0,n.Wm)(c,{icon:"toggle-on"})]),(0,n._)("div",B,[K,e.windowId>0?((0,n.wg)(),(0,n.iD)("div",G,"将自动切换到原神窗口并开始翻页")):((0,n.wg)(),(0,n.iD)("div",J,"点击后请回到原神窗口并手动匀速滚动页面"))]),(0,n._)("div",Q,[(0,n.Wm)(c,{icon:"angle-right"})])])),_:1})],2)}var ee=a(40192);z.vI.add(T.WZW);var te=(0,n.aZ)({props:{windowId:{type:Number,default:0}},emits:["done"],setup(){return{hasPictureInPicture:ee.AM}}}),ae={ready:"ready-bbdcc7"};const ne={};ne["$style"]=ae;const se=(0,x.Z)(te,[["render",X],["__cssModules",ne]]);var ie=se;const{scannerOnLine:le,scannerOnLine2:re,scannerOnImage:oe,initPromise:ce,workerCV:ue,workerOCR:de}=(0,w.zG)();var ve;(function(e){e[e["Fail"]=-1]="Fail",e[e["Init"]=0]="Init",e[e["Ready"]=1]="Ready",e[e["Request"]=2]="Request",e[e["Wait"]=3]="Wait",e[e["Capture"]=4]="Capture",e[e["Processing"]=5]="Processing",e[e["Finish"]=6]="Finish"})(ve||(ve={})),z.vI.add(T.ik8,W.EPy);var we=(0,n.aZ)({name:"AchievementScanner",components:{FloatContent:g.Z,FloatContentB:k,Loader:R.Z,CReady:ie,WebCapturer:F.Z},setup(){const e=(0,I.yj)(),t=window===parent,a=(0,h.iH)(!1),s=(0,h.iH)([]),i=(0,h.iH)(0),l=(0,h.iH)(0),r=(0,n.Fl)((()=>({success:s.value.filter((e=>e.success)).length,fail:s.value.filter((e=>!e.success)).length}))),o=async({line:t,thread:a})=>{if(t){let n=le;a&&y.value===ve.Processing&&(f.concurrency=2,n=re);const i=await n(t);if(i.success){const a=s.value.find((e=>{if(!e.success)return!1;const t=e;return t.achievement.id===i.achievement.id}));i.done&&!e.query.withImage||(i.images={main:(0,v.rT)(t).toDataURL()}),a?l.value++:s.value.push(i)}else i.images={main:(0,v.rT)(t).toDataURL()},s.value.push(i),(new Image).src=i.images.main}y.value!==ve.Processing&&await L()(400)},c=document.createElement("canvas"),u=c.getContext("2d");let w=null,g=0;const p=async({imageData:e,keepLastLine:t})=>{const a=await oe((0,v.Q8)(e),t),n=i.value,s=a.reduce(((e,t)=>e+t.image.rows),0);let l=0;for(const r of a)r.image.rows>s/a.length*2/3&&((!w||l<2)&&(w=r,l++),f.push({line:r.image,thread:i.value%2===0}),i.value++);if(t&&f.push({line:null,thread:!1}),x.value>0&&(n===i.value?g++:g=Math.max(0,g-1),g>5))return g=0,void(y.value=ve.Processing)},f=D().promise(o,1);f.drain=()=>{y.value===ve.Processing&&(y.value=ve.Finish)};const m=D().promise(p,1),y=(0,h.iH)(ve.Init);ce.then((()=>{y.value=ve.Ready}));const b=(0,h.iH)(null),C=(0,h.iH)(Date.now()),x=(0,n.Fl)((()=>b.value?b.value.windowId:-1));let E=new d.p;(0,n.YP)(b,(e=>{e&&(E=e.control)}));let k=new AbortController;const S=async()=>{if(!b.value)return;c.width=b.value.video.videoWidth,c.height=b.value.video.videoHeight;let e=null,t={x:0,y:0},a=-1;const n=async(n=!0)=>{e||(e=await ue.getRect()),w&&e&&(t.x&&t.y||(t=await E.toAbsolute(x.value,e.x,e.y+w.y+2*w.image.rows/3,{dx:c.width,dy:c.height})),await E.SetCursorPos(t.x,t.y),await E.mouse_event(E.MOUSEEVENTF_LEFTDOWN,0,0,0),await E.mouse_event(E.MOUSEEVENTF_LEFTUP,0,0,0),n?await E.mouse_event(E.MOUSEEVENTF_WHEEL,0,0,-120,11):await E.mouse_event(E.MOUSEEVENTF_WHEEL,0,0,-120,2)),n&&await L()(a>0?a:60)},s=async()=>{console.log("->latency measurement start");const e=await(0,M.s)(ue.diffCached,(()=>b.value.capture({x:0,y:0,w:0,h:0})),(()=>n(!1)));console.log("->latency measurement done",e),a=Math.min(130,Math.max(e.latency,40))};let i=!0;while(y.value===ve.Capture)try{let e=null;while(!e)u&&u.drawImage(b.value.video,0,0,c.width,c.height),e=u&&u.getImageData(0,0,c.width,c.height),e||(console.warn("->capture FAILD"),await L()(60));m.push({imageData:e,keepLastLine:!1}),x.value?i?(await L()(60),await n(!1),await L()(100),i=!1):await(a>0?n():s()):(await(0,M.h)(ue.diffCached,(()=>b.value.capture({x:0,y:0,w:0,h:0})),{interval:150,signal:k.signal}),console.log("->changed"))}catch(l){l instanceof Error&&"ECANCEL"===l.message&&(y.value=ve.Processing)}};(0,n.YP)((()=>y.value),(async()=>{if(y.value===ve.Ready&&((0,_.l)("ready",null),(0,_.l)("state","ready")),y.value===ve.Capture&&((0,_.l)("state","capture"),x.value&&E.activeWindow(x.value),console.log("capture"),S()),b.value){if(y.value===ve.Processing){k.abort(),u&&u.drawImage(b.value.video,0,0,c.width,c.height);const e=u&&u.getImageData(0,0,c.width,c.height);e&&m.push({imageData:e,keepLastLine:!0}),b.value.stop(),console.log("processing"),(0,_.l)("state","processing"),f.resume(),x.value&&E.hwnd&&E.activeWindow(E.hwnd)}y.value===ve.Finish&&(console.log("finish"),(0,_.l)("state","finish"),(0,_.l)("result",{result:s.value,dup:l.value}))}}));const P=async()=>{await Promise.all([ue.reset(),de.reset()]),s.value=[],i.value=0,l.value=0,y.value=ve.Ready,w=null,g=0,k=new AbortController,C.value=Date.now()},T=e=>{const{event:t}=e.data;switch(t){case"reset":P();break;case"start":b.value&&b.value.requestCapture();break}};return t||(window.addEventListener("message",T),(0,n.Jd)((()=>{window.removeEventListener("message",T)}))),(0,n.YP)([i,r,l],(()=>{(0,_.l)("progress",{scanned:i.value,...r.value,dup:l.value})})),{S:ve,state:y,results:s,scanned:i,recognized:r,capture:a,dup:l,isTop:t,reset:P,webControl:E,webControlEnabled:x,cap:b,capKey:C}}}),he={loader:"loader-ed1218",scannerCssloadLoader:"scanner-cssload-loader-a98e2b",scannerCssloadLoaderInner:"scanner-cssload-loader-inner-a4c871",floatwindow:"floatwindow-b2c0ef",statusInner:"status-inner-e6d784"};const ge={};ge["$style"]=he;const pe=(0,x.Z)(we,[["render",u],["__cssModules",ge]]);var fe=pe},83889:function(e,t,a){a.d(t,{Z:function(){return L}});var n=a(19812),s=a(55893);const i={class:"l"},l={class:"x"},r=(0,n._)("div",{class:"text"},[(0,n.Uk)("当前浏览器不支持此功能"),(0,n._)("br"),(0,n.Uk)("请升级或更换浏览器")],-1),o={key:1,class:"scanner-loading"},c={class:"loader-animation"},u=(0,n._)("div",{class:"loader-text"},"椰羊正在饮甘露，马上就来",-1),d={class:"loader-progress"},v={class:"loader-progress-text"};function w(e,t,a,w,h,g){const p=(0,n.up)("fa-icon"),f=(0,n.up)("icon-loading");return(0,n.wg)(),(0,n.iD)("div",null,[e.ocrCompatible?((0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("div",{class:(0,s.C_)(e.$style.loader)},[(0,n._)("div",c,[(0,n.Wm)(f,{class:"loader-svg",percent:.88*e.progress+5},null,8,["percent"])]),u,(0,n._)("div",d,[(0,n._)("div",{class:"loader-progress-bar",style:(0,s.j5)({width:e.progress+"%"})},null,4)]),(0,n._)("div",v,[(0,n._)("span",null,(0,s.zw)(e.progressText||`${e.progress.toFixed(2)}%`),1)])],2)])):((0,n.wg)(),(0,n.iD)("div",{key:0,class:(0,s.C_)(e.$style.showUncompatible)},[(0,n._)("span",i,[(0,n.Wm)(p,{icon:["fab","internet-explorer"]}),(0,n._)("span",l,[(0,n.Wm)(p,{icon:"triangle-exclamation"})])]),r],2))])}var h=a(20521),g=a(40192),p=a(31060),f=a(21277),m=a(92002),y=a(1607),b=a(14287),C=a(75444);y.vI.add(b.ik8,C.EPy);var x=(0,n.aZ)({components:{IconLoading:m.Z},emits:["done"],setup(e,{emit:t}){const a=(0,h.iH)(0),s=(0,h.iH)("获取资源地址");return(0,n.bv)((async()=>{if(!g.KL)return;const e=(0,p.zG)();e.onProgress((e=>{if(!(a.value<0)){if((0,f.l)("load",e),a.value=e,e<-90)return(0,f.l)("load",!1),void(s.value="应用初始化失败, 请联系开发者");if(e<0)return(0,f.l)("load",!1),void(s.value="加载失败, 请刷新重试或联系开发者");s.value="",e>=100&&(s.value="校验完整性",setTimeout((()=>{(0,f.l)("load",!0),s.value="应用初始化"}),140))}})),e.initPromise.then((()=>{t("done")}))})),{ocrCompatible:g.KL,progress:a,progressText:s}}}),E={showUncompatible:"show-uncompatible-cfbfd0",loader:"loader-a3e60a",scannerCssloadLoader:"scanner-cssload-loader-eb1b08",scannerCssloadLoaderInner:"scanner-cssload-loader-inner-c70159"},k=a(48998);const _={};_["$style"]=E;const S=(0,k.Z)(x,[["render",w],["__cssModules",_]]);var L=S}}]);