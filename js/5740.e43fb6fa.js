"use strict";(self["define"]=self["define"]||[]).push([[5740],{12507:function(e,t,n){n.d(t,{Tj:function(){return r},Q8:function(){return o},eW:function(){return a},rT:function(){return s}});n(48675),n(3462),n(21703);function r(e){return!("object"!==typeof e||!e||!("type"in e)||"number"!==typeof e.type||"undefined"!==typeof e.clone)}function o(e){return{rows:e.height,cols:e.width,type:24,data:new Uint8Array(e.data)}}function a(e){const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");if(!n)throw new Error('canvas.getContext("2d") failed');return n.drawImage(e,0,0),o(n.getImageData(0,0,e.width,e.height))}function s(e){if(24!==e.type)throw new Error(`Converting type ${e.type} to canvas faild. Only CV_8UC4 is supported.`);const t=document.createElement("canvas");t.width=e.cols,t.height=e.rows;const n=t.getContext("2d");if(!n)throw new Error("Could not get context");const r=n.createImageData(e.cols,e.rows);return r.data.set(e.data),n.putImageData(r,0,0),t}},13137:function(e,t,n){n.d(t,{zG:function(){return w}});var r=n(61976),o=n(71836),a=n(69997),s=n(84627),i=n(40192),c=n(82619),d=n(12507),l=n(75345);function u(){let e;e=new s.Cc(new URL(n.p+n.u(7741),n.b)),console.log("Worker created using worker-plugin");const t=(0,r.Ud)(e);return{worker:t,_worker:e}}function f(){const{worker:e,_worker:t}=u(),{worker:n,_worker:r}=u(),{onScreenShot:s,diffCached:f,diffCachedA:p}=e,{onScreenShot:w}=n;let v=e=>{};const g=e=>{v=e},m=e=>{throw v(-99),e};t.addEventListener("error",m),r.addEventListener("error",m);const h=(async()=>{try{const[t,r]=(0,a.LS)(),s=i.hP?"ort-wasm-simd.wasm":"ort-wasm.wasm",d=i.hP?"opencv-simd.wasm":"opencv-normal.wasm";await t,await(0,a.sB)([s,d,"yas.ort"],(e=>v(e)),r);const u=(0,l.Z)(c.i18n.artifacts),f=(0,l.Z)(c.i18n.atifactParams),p=(0,l.Z)(c.i18n.characters);await Promise.all([e.setResources(o.ZP),n.setResources(o.ZP),e.initMap(u,f,p),n.initMap(u,f,p)]),v(100)}catch(s){throw v(-1),s}t.removeEventListener("error",m),r.removeEventListener("error",m),await Promise.all([e.init(),n.init()])})();return{onScreenShot:s,onScreenShot2:w,initPromise:h,workerCV:e,workerOCR:n,onProgress:g,IMatFromImageElement:d.eW,diffCached:f,diffCachedA:p}}let p;function w(){return p||(p=f()),p}},45021:function(e,t,n){function r(e,t){parent&&window!==parent&&parent.postMessage({app:"cocogoat.scanner.artifact",event:e,data:JSON.parse(JSON.stringify(t))},"*")}n.d(t,{l:function(){return r}})},56999:function(e,t,n){n.d(t,{Z:function(){return E}});var r=n(19812),o=n(55893);const a={class:"l"},s={class:"x"},i=(0,r._)("div",{class:"text"},[(0,r.Uk)("当前浏览器不支持此功能"),(0,r._)("br"),(0,r.Uk)("请升级或更换浏览器")],-1),c={key:1,class:"scanner-loading"},d={class:"loader-animation"},l=(0,r._)("div",{class:"loader-text"},"椰羊正在饮甘露，马上就来",-1),u={class:"loader-progress"},f={class:"loader-progress-text"};function p(e,t,n,p,w,v){const g=(0,r.up)("fa-icon"),m=(0,r.up)("icon-loading");return(0,r.wg)(),(0,r.iD)("div",null,[e.ocrCompatible?((0,r.wg)(),(0,r.iD)("div",c,[(0,r._)("div",{class:(0,o.C_)(e.$style.loader)},[(0,r._)("div",d,[(0,r.Wm)(m,{class:"loader-svg",percent:.88*e.progress+5},null,8,["percent"])]),l,(0,r._)("div",u,[(0,r._)("div",{class:"loader-progress-bar",style:(0,o.j5)({width:e.progress+"%"})},null,4)]),(0,r._)("div",f,[(0,r._)("span",null,(0,o.zw)(e.progressText||`${e.progress.toFixed(2)}%`),1)])],2)])):((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,o.C_)(e.$style.showUncompatible)},[(0,r._)("span",a,[(0,r.Wm)(g,{icon:["fab","internet-explorer"]}),(0,r._)("span",s,[(0,r.Wm)(g,{icon:"triangle-exclamation"})])]),i],2))])}var w=n(20521),v=n(40192),g=n(13137),m=n(45021),h=n(92002),y=n(1607),_=n(14287),C=n(75444);y.vI.add(_.ik8,C.EPy);var k=(0,r.aZ)({components:{IconLoading:h.Z},emits:["done"],setup(e,{emit:t}){const n=(0,w.iH)(0),o=(0,w.iH)("获取资源地址");return(0,r.bv)((async()=>{if(!v.KL)return;const e=(0,g.zG)();window.$cocogoat.artifact_scanner_instance=e,e.onProgress((e=>{if(!(n.value<0)){if((0,m.l)("load",e),n.value=e,e<-90)return(0,m.l)("load",!1),void(o.value="应用初始化失败, 请联系开发者");if(e<0)return(0,m.l)("load",!1),void(o.value="加载失败, 请刷新重试或联系开发者");o.value="",e>=100&&(o.value="校验完整性",setTimeout((()=>{(0,m.l)("load",!0),o.value="应用初始化"}),140))}})),e.initPromise.then((()=>{t("done")}))})),{ocrCompatible:v.KL,progress:n,progressText:o}}}),b={showUncompatible:"show-uncompatible-cb1e05",loader:"loader-d5392a"},x=n(48998);const P={};P["$style"]=b;const Z=(0,x.Z)(k,[["render",p],["__cssModules",P]]);var E=Z},75740:function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var r=n(19812);function o(e,t,n,o,a,s){const i=(0,r.up)("router-view"),c=(0,r.up)("Loader");return e.done?((0,r.wg)(),(0,r.j4)(i,{key:0})):((0,r.wg)(),(0,r.j4)(c,{key:1,onDone:t[0]||(t[0]=t=>e.done=!0)}))}var a=n(20521),s=n(56999),i=(0,r.aZ)({components:{Loader:s.Z},setup(){return{done:(0,a.iH)(!1)}}}),c=n(48998);const d=(0,c.Z)(i,[["render",o]]);var l=d}}]);