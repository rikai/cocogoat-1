(self["define"]=self["define"]||[]).push([[2650],{73796:function(n){function r(n,r){(null==r||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}n.exports=r,n.exports.__esModule=!0,n.exports["default"]=n.exports},8557:function(n){function r(n){if(Array.isArray(n))return n}n.exports=r,n.exports.__esModule=!0,n.exports["default"]=n.exports},13294:function(n,r,e){var t=e(73796);function a(n){if(Array.isArray(n))return t(n)}n.exports=a,n.exports.__esModule=!0,n.exports["default"]=n.exports},65053:function(n,r,e){function t(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}e(21703),n.exports=t,n.exports.__esModule=!0,n.exports["default"]=n.exports},16125:function(n,r,e){function t(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}e(21703),n.exports=t,n.exports.__esModule=!0,n.exports["default"]=n.exports},30101:function(n,r,e){e(81299);var t=e(33917),a=e(56102);function o(r,e,i){return a()?(n.exports=o=Reflect.construct,n.exports.__esModule=!0,n.exports["default"]=n.exports):(n.exports=o=function(n,r,e){var a=[null];a.push.apply(a,r);var o=Function.bind.apply(n,a),i=new o;return e&&t(i,e.prototype),i},n.exports.__esModule=!0,n.exports["default"]=n.exports),o.apply(null,arguments)}n.exports=o,n.exports.__esModule=!0,n.exports["default"]=n.exports},39885:function(n){function r(n,r){for(var e=0;e<r.length;e++){var t=r[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function e(n,e,t){return e&&r(n.prototype,e),t&&r(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}n.exports=e,n.exports.__esModule=!0,n.exports["default"]=n.exports},10021:function(n){function r(n,r,e){return r in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n}n.exports=r,n.exports.__esModule=!0,n.exports["default"]=n.exports},46907:function(n){function r(e){return n.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},n.exports.__esModule=!0,n.exports["default"]=n.exports,r(e)}n.exports=r,n.exports.__esModule=!0,n.exports["default"]=n.exports},63490:function(n,r,e){e(21703);var t=e(33917);function a(n,r){if("function"!==typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&t(n,r)}n.exports=a,n.exports.__esModule=!0,n.exports["default"]=n.exports},87654:function(n){function r(n){return n&&n.__esModule?n:{default:n}}n.exports=r,n.exports.__esModule=!0,n.exports["default"]=n.exports},22768:function(n,r,e){var t=e(51382)["default"];function a(n){if("function"!==typeof WeakMap)return null;var r=new WeakMap,e=new WeakMap;return(a=function(n){return n?e:r})(n)}function o(n,r){if(!r&&n&&n.__esModule)return n;if(null===n||"object"!==t(n)&&"function"!==typeof n)return{default:n};var e=a(r);if(e&&e.has(n))return e.get(n);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in n)if("default"!==s&&Object.prototype.hasOwnProperty.call(n,s)){var f=i?Object.getOwnPropertyDescriptor(n,s):null;f&&(f.get||f.set)?Object.defineProperty(o,s,f):o[s]=n[s]}return o["default"]=n,e&&e.set(n,o),o}n.exports=o,n.exports.__esModule=!0,n.exports["default"]=n.exports},12386:function(n){function r(n){return-1!==Function.toString.call(n).indexOf("[native code]")}n.exports=r,n.exports.__esModule=!0,n.exports["default"]=n.exports},56102:function(n,r,e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}e(81299),n.exports=t,n.exports.__esModule=!0,n.exports["default"]=n.exports},91838:function(n){function r(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}n.exports=r,n.exports.__esModule=!0,n.exports["default"]=n.exports},34324:function(n){function r(n,r){var e=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var t,a,o=[],i=!0,s=!1;try{for(e=e.call(n);!(i=(t=e.next()).done);i=!0)if(o.push(t.value),r&&o.length===r)break}catch(f){s=!0,a=f}finally{try{i||null==e["return"]||e["return"]()}finally{if(s)throw a}}return o}}n.exports=r,n.exports.__esModule=!0,n.exports["default"]=n.exports},95526:function(n,r,e){function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e(21703),n.exports=t,n.exports.__esModule=!0,n.exports["default"]=n.exports},13725:function(n,r,e){function t(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e(21703),n.exports=t,n.exports.__esModule=!0,n.exports["default"]=n.exports},55156:function(n,r,e){e(21703);var t=e(51382)["default"],a=e(65053);function o(n,r){if(r&&("object"===t(r)||"function"===typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return a(n)}n.exports=o,n.exports.__esModule=!0,n.exports["default"]=n.exports},33917:function(n){function r(e,t){return n.exports=r=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},n.exports.__esModule=!0,n.exports["default"]=n.exports,r(e,t)}n.exports=r,n.exports.__esModule=!0,n.exports["default"]=n.exports},42989:function(n,r,e){var t=e(8557),a=e(34324),o=e(82355),i=e(95526);function s(n,r){return t(n)||a(n,r)||o(n,r)||i()}n.exports=s,n.exports.__esModule=!0,n.exports["default"]=n.exports},25069:function(n,r,e){var t=e(13294),a=e(91838),o=e(82355),i=e(13725);function s(n){return t(n)||a(n)||o(n)||i()}n.exports=s,n.exports.__esModule=!0,n.exports["default"]=n.exports},51382:function(n){function r(e){return n.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},n.exports.__esModule=!0,n.exports["default"]=n.exports,r(e)}n.exports=r,n.exports.__esModule=!0,n.exports["default"]=n.exports},82355:function(n,r,e){var t=e(73796);function a(n,r){if(n){if("string"===typeof n)return t(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?t(n,r):void 0}}n.exports=a,n.exports.__esModule=!0,n.exports["default"]=n.exports},25629:function(n,r,e){e(21703);var t=e(46907),a=e(33917),o=e(12386),i=e(30101);function s(r){var e="function"===typeof Map?new Map:void 0;return n.exports=s=function(n){if(null===n||!o(n))return n;if("function"!==typeof n)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(n))return e.get(n);e.set(n,r)}function r(){return i(n,arguments,t(this).constructor)}return r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a(r,n)},n.exports.__esModule=!0,n.exports["default"]=n.exports,s(r)}n.exports=s,n.exports.__esModule=!0,n.exports["default"]=n.exports},9545:function(n,r,e){n.exports=e(59421)},10543:function(n,r,e){"use strict";var t=e(42396),a=e(88297),o=a(t("String.prototype.indexOf"));n.exports=function(n,r){var e=t(n,!!r);return"function"===typeof e&&o(n,".prototype.")>-1?a(e):e}},88297:function(n,r,e){"use strict";var t=e(97503),a=e(42396),o=a("%Function.prototype.apply%"),i=a("%Function.prototype.call%"),s=a("%Reflect.apply%",!0)||t.call(i,o),f=a("%Object.getOwnPropertyDescriptor%",!0),l=a("%Object.defineProperty%",!0),u=a("%Math.max%");if(l)try{l({},"a",{value:1})}catch(h){l=null}n.exports=function(n){var r=s(t,i,arguments);if(f&&l){var e=f(r,"length");e.configurable&&l(r,"length",{value:1+u(0,n.length-(arguments.length-1))})}return r};var c=function(){return s(t,o,arguments)};l?l(n.exports,"apply",{value:c}):n.exports.apply=c},73819:function(n,r,e){e(21703);var t=Object.prototype.hasOwnProperty,a=Object.prototype.toString;n.exports=function(n,r,e){if("[object Function]"!==a.call(r))throw new TypeError("iterator must be a function");var o=n.length;if(o===+o)for(var i=0;i<o;i++)r.call(e,n[i],i,n);else for(var s in n)t.call(n,s)&&r.call(e,n[s],s,n)}},86824:function(n,r,e){"use strict";e(21703);var t="Function.prototype.bind called on incompatible ",a=Array.prototype.slice,o=Object.prototype.toString,i="[object Function]";n.exports=function(n){var r=this;if("function"!==typeof r||o.call(r)!==i)throw new TypeError(t+r);for(var e,s=a.call(arguments,1),f=function(){if(this instanceof e){var t=r.apply(this,s.concat(a.call(arguments)));return Object(t)===t?t:this}return r.apply(n,s.concat(a.call(arguments)))},l=Math.max(0,r.length-s.length),u=[],c=0;c<l;c++)u.push("$"+c);if(e=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(f),r.prototype){var h=function(){};h.prototype=r.prototype,e.prototype=new h,h.prototype=null}return e}},97503:function(n,r,e){"use strict";var t=e(86824);n.exports=Function.prototype.bind||t},42396:function(n,r,e){"use strict";var t;e(21703),e(48675),e(3462),e(9170),e(32120),e(81299);var a=SyntaxError,o=Function,i=TypeError,s=function(n){try{return o('"use strict"; return ('+n+").constructor;")()}catch(r){}},f=Object.getOwnPropertyDescriptor;if(f)try{f({},"")}catch(P){f=null}var l=function(){throw new i},u=f?function(){try{return l}catch(n){try{return f(arguments,"callee").get}catch(r){return l}}}():l,c=e(3266)(),h=Object.getPrototypeOf||function(n){return n.__proto__},d={},p="undefined"===typeof Uint8Array?t:h(Uint8Array),v={"%AggregateError%":"undefined"===typeof AggregateError?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?t:ArrayBuffer,"%ArrayIteratorPrototype%":c?h([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"===typeof Atomics?t:Atomics,"%BigInt%":"undefined"===typeof BigInt?t:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?t:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?t:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?t:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":d,"%Int8Array%":"undefined"===typeof Int8Array?t:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?t:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":c?h(h([][Symbol.iterator]())):t,"%JSON%":"object"===typeof JSON?JSON:t,"%Map%":"undefined"===typeof Map?t:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&c?h((new Map)[Symbol.iterator]()):t,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?t:Promise,"%Proxy%":"undefined"===typeof Proxy?t:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?t:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?t:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&c?h((new Set)[Symbol.iterator]()):t,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":c?h(""[Symbol.iterator]()):t,"%Symbol%":c?Symbol:t,"%SyntaxError%":a,"%ThrowTypeError%":u,"%TypedArray%":p,"%TypeError%":i,"%Uint8Array%":"undefined"===typeof Uint8Array?t:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?t:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?t:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?t:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?t:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?t:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?t:WeakSet},w=function n(r){var e;if("%AsyncFunction%"===r)e=s("async function () {}");else if("%GeneratorFunction%"===r)e=s("function* () {}");else if("%AsyncGeneratorFunction%"===r)e=s("async function* () {}");else if("%AsyncGenerator%"===r){var t=n("%AsyncGeneratorFunction%");t&&(e=t.prototype)}else if("%AsyncIteratorPrototype%"===r){var a=n("%AsyncGenerator%");a&&(e=h(a.prototype))}return v[r]=e,e},y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},m=e(97503),_=e(80042),g=m.call(Function.call,Array.prototype.concat),b=m.call(Function.apply,Array.prototype.splice),A=m.call(Function.call,String.prototype.replace),E=m.call(Function.call,String.prototype.slice),x=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,M=/\\(\\)?/g,k=function(n){var r=E(n,0,1),e=E(n,-1);if("%"===r&&"%"!==e)throw new a("invalid intrinsic syntax, expected closing `%`");if("%"===e&&"%"!==r)throw new a("invalid intrinsic syntax, expected opening `%`");var t=[];return A(n,x,(function(n,r,e,a){t[t.length]=e?A(a,M,"$1"):r||n})),t},N=function(n,r){var e,t=n;if(_(y,t)&&(e=y[t],t="%"+e[0]+"%"),_(v,t)){var o=v[t];if(o===d&&(o=w(t)),"undefined"===typeof o&&!r)throw new i("intrinsic "+n+" exists, but is not available. Please file an issue!");return{alias:e,name:t,value:o}}throw new a("intrinsic "+n+" does not exist!")};n.exports=function(n,r){if("string"!==typeof n||0===n.length)throw new i("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof r)throw new i('"allowMissing" argument must be a boolean');var e=k(n),t=e.length>0?e[0]:"",o=N("%"+t+"%",r),s=o.name,l=o.value,u=!1,c=o.alias;c&&(t=c[0],b(e,g([0,1],c)));for(var h=1,d=!0;h<e.length;h+=1){var p=e[h],w=E(p,0,1),y=E(p,-1);if(('"'===w||"'"===w||"`"===w||'"'===y||"'"===y||"`"===y)&&w!==y)throw new a("property names with quotes must have matching quotes");if("constructor"!==p&&d||(u=!0),t+="."+p,s="%"+t+"%",_(v,s))l=v[s];else if(null!=l){if(!(p in l)){if(!r)throw new i("base intrinsic for "+n+" exists, but the property is not available.");return}if(f&&h+1>=e.length){var m=f(l,p);d=!!m,l=d&&"get"in m&&!("originalValue"in m.get)?m.get:l[p]}else d=_(l,p),l=l[p];d&&!u&&(v[s]=l)}}return l}},3266:function(n,r,e){"use strict";var t="undefined"!==typeof Symbol&&Symbol,a=e(51194);n.exports=function(){return"function"===typeof t&&("function"===typeof Symbol&&("symbol"===typeof t("foo")&&("symbol"===typeof Symbol("bar")&&a())))}},51194:function(n){"use strict";n.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var n={},r=Symbol("test"),e=Object(r);if("string"===typeof r)return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;var t=42;for(r in n[r]=t,n)return!1;if("function"===typeof Object.keys&&0!==Object.keys(n).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(n).length)return!1;var a=Object.getOwnPropertySymbols(n);if(1!==a.length||a[0]!==r)return!1;if(!Object.prototype.propertyIsEnumerable.call(n,r))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(n,r);if(o.value!==t||!0!==o.enumerable)return!1}return!0}},28098:function(n,r,e){"use strict";var t=e(51194);n.exports=function(){return t()&&!!Symbol.toStringTag}},80042:function(n,r,e){"use strict";var t=e(97503);n.exports=t.call(Function.call,Object.prototype.hasOwnProperty)},64974:function(n){"function"===typeof Object.create?n.exports=function(n,r){r&&(n.super_=r,n.prototype=Object.create(r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(n,r){if(r){n.super_=r;var e=function(){};e.prototype=r.prototype,n.prototype=new e,n.prototype.constructor=n}}},10695:function(n,r,e){"use strict";var t=e(28098)(),a=e(10543),o=a("Object.prototype.toString"),i=function(n){return!(t&&n&&"object"===typeof n&&Symbol.toStringTag in n)&&"[object Arguments]"===o(n)},s=function(n){return!!i(n)||null!==n&&"object"===typeof n&&"number"===typeof n.length&&n.length>=0&&"[object Array]"!==o(n)&&"[object Function]"===o(n.callee)},f=function(){return i(arguments)}();i.isLegacyArguments=s,n.exports=f?i:s},49321:function(n,r,e){"use strict";var t,a=Object.prototype.toString,o=Function.prototype.toString,i=/^\s*(?:function)?\*/,s=e(28098)(),f=Object.getPrototypeOf,l=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(n){}};n.exports=function(n){if("function"!==typeof n)return!1;if(i.test(o.call(n)))return!0;if(!s){var r=a.call(n);return"[object GeneratorFunction]"===r}if(!f)return!1;if("undefined"===typeof t){var e=l();t=!!e&&f(e)}return f(n)===t}},48040:function(n,r,e){"use strict";var t=e(73819),a=e(27546),o=e(10543),i=o("Object.prototype.toString"),s=e(28098)(),f="undefined"===typeof globalThis?e.g:globalThis,l=a(),u=o("Array.prototype.indexOf",!0)||function(n,r){for(var e=0;e<n.length;e+=1)if(n[e]===r)return e;return-1},c=o("String.prototype.slice"),h={},d=e(92814),p=Object.getPrototypeOf;s&&d&&p&&t(l,(function(n){var r=new f[n];if(Symbol.toStringTag in r){var e=p(r),t=d(e,Symbol.toStringTag);if(!t){var a=p(e);t=d(a,Symbol.toStringTag)}h[n]=t.get}}));var v=function(n){var r=!1;return t(h,(function(e,t){if(!r)try{r=e.call(n)===t}catch(a){}})),r};n.exports=function(n){if(!n||"object"!==typeof n)return!1;if(!s||!(Symbol.toStringTag in n)){var r=c(i(n),8,-1);return u(l,r)>-1}return!!d&&v(n)}},28646:function(n,r,e){"use strict";e(21703),e(48675),e(3462),Object.defineProperty(r,"__esModule",{value:!0}),r._rand_int=i,r._shuffle=f,r._shuffled=l,r._rand_rows0=u,r._rand_cols0=c,r._rand_rankdef=d;var t=e(85008),a=e(48782),o=e(32515);function i(n,r){if(0!==n%1)throw new Error("Assertion failed.");if(0!==r%1)throw new Error("Assertion failed.");if(!(n<r))throw new Error("Assertion failed.");return Math.floor(Math.random()*(r-n))+n}var s=!0;function f(n,r,e){if(s&&(s=!1,console.warn(new Error("_shuffle deprecated, use nd.rand.AleaRNG instead."))),n.length%1!==0)throw new Error("Assertion failed.");if(null==r&&(r=0),null==e&&(e=n.length),0!==r%1)throw new Error("Assertion failed.");if(0!==e%1)throw new Error("Assertion failed.");if(!(r<=e))throw new Error("Assertion failed.");for(var t=r;t<e-1;t++){var a=i(t,e),o=n[a];n[a]=n[t],n[t]=o}}function l(n,r,e){return n=n.slice(),f(n,r,e),n}function u(){for(var n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];if(!(2<=r.length))throw new Error("Assertion failed.");for(var a=(0,t.tabulate)(r,"float64",(function(){return 8*Math.random()-4})),o=r.pop(),s=r.pop(),f=a.data,l=new Int32Array(s),u=f.length;(u-=s*o)>=0;){for(var c=s;c-- >0;)l[c]=c;for(var h=i(0,s),d=s;d>h;){var p=i(0,d--),v=l[p];l[p]=l[d];for(var w=o;w-- >0;)f[u+o*v+w]=0}}return Object.freeze(f.buffer),Object.freeze(a),a}function c(){for(var n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];if(!(2<=r.length))throw new Error("Assertion failed.");for(var a=(0,t.tabulate)(r,"float64",(function(){return 8*Math.random()-4})),o=r.pop(),s=r.pop(),f=a.data,l=new Int32Array(o),u=f.length;(u-=s*o)>=0;){for(var c=o;c-- >0;)l[c]=c;for(var h=i(0,o),d=o;d>h;){var p=i(0,d--),v=l[p];l[p]=l[d];for(var w=s;w-- >0;)f[u+o*w+v]=0}}return Object.freeze(f.buffer),Object.freeze(a),a}var h=!0;function d(){h&&(h=!1,console.warn(new Error("_rand_rankdef deprecated, use nd.rand.AleaRNG instead.")));for(var n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];if(!(2<=r.length))throw new Error("Assertion failed.");for(var s=r.pop(),f=r.pop(),l=Math.min(f,s),u=(0,t.tabulate)(r,"int32",(function(){return i(0,l+1)})),c=o.rand_ortho.apply(void 0,["float64"].concat(r,[f,l])),d=o.rand_ortho.apply(void 0,["float64"].concat(r,[l,s])),p=(0,t.tabulate)([].concat(r,[l,l]),"float64",(function(){for(var n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];var t=r.pop(),a=r.pop(),o=u.apply(void 0,r);return a!==t||o<=a?0:8*Math.random()+.1})),v=(0,a.matmul)(c,p,d),w=p.data.length;(w-=l*l)>=0;)for(var y=1e9*Math.random()+1,m=l;m-- >0;)p.data[w+l*m+m]*=y;return Object.freeze(u.data.buffer),Object.freeze(v.data.buffer),[v,u]}},53791:function(n,r,e){"use strict";e(21703);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.heap_sort_gen=i;var a=t(e(9545)),o=a["default"].mark(i);function i(n){var r,e,t,i,s,f,l,u,c,h=arguments;return a["default"].wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:function(n,r){return(n>r)-(n<r)},n.length%1===0){a.next=3;break}throw new Error("Assertion failed.");case 3:if(n.length>=0){a.next=5;break}throw new Error("Assertion failed.");case 5:if(r instanceof Function){a.next=7;break}throw new Error("Assertion failed.");case 7:for(e=0,t=n.length,i=function(e,t){return r(n[e],n[t])<0},s=function(r,e){var t=n[r];n[r]=n[e],n[e]=t},f=function(n){return t-1-(t-2-n>>1)},l=function(n){return t-2-(t-1-n<<1)},u=function n(r){var t=l(r);t>e?(i(t,t-1)||--t,i(t,r)&&(s(t,r),n(t))):t===e&&i(t,r)&&s(t,r)},c=f(0);c<t;c++)u(c);case 13:if(!(e<t)){a.next=20;break}return s(e,t-1),a.next=17,n[e++];case 17:u(t-1),a.next=13;break;case 20:case"end":return a.stop()}}),o)}},57482:function(n,r,e){"use strict";e(48675),e(3462),Object.defineProperty(r,"__esModule",{value:!0}),r.is_array=void 0;var t=e(53623),a=new Set([Array,Float32Array,Float64Array,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Uint8ClampedArray,t.Complex128Array].map((function(n){return n.prototype}))),o=function(n){return a.has(Object.getPrototypeOf(n))};r.is_array=o},39059:function(n,r,e){"use strict";e(21703),e(48675),e(3462),e(85827);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.concat=s;var a=t(e(25069)),o=e(30065),i=e(11882);function s(n,r,e){if(null==e&&(null==r?(e=n,n=void 0):(e=r,r=void 0,"string"===typeof n&&(r=n,n=void 0))),e=Array.from(e,(function(n){return(0,o.asarray)(r,n)})),null==n&&(n=0),null==r&&(r=i.super_dtype.apply(void 0,(0,a["default"])(e.map((function(n){return n.dtype}))))),0>n&&(n+=e[0].shape.length),0>n||n>=e[0].shape.length)throw new Error("Axis out of bounds.");for(var t=Int32Array.from(e[0].shape),s=function(r){var a=e[r].shape;if(t.length!=a.length)throw new Error("All shapes must have the same length.");if(!t.every((function(r,e){return t[e]===a[e]||n===e})))throw new Error("Shape along all axes but the concatentation axis must match.");t[n]+=a[n]},f=e.length;--f>0;)s(f);var l=t.slice(n+1).reduce((function(n,r){return n*r}),1),u=Int32Array.from(e,(function(n){return n.data.length})),c=new i.ARRAY_TYPES[r](t.reduce((function(n,r){return n*r}),1)),h=c.length;function d(r){if(r===n)for(var a=e.length;a-- >0;)for(var o=e[a].shape[r]*l;o-- >0;)c[--h]=e[a].data[--u[a]];else for(var i=t[r];i-- >0;)d(r+1)}return d(0),new o.NDArray(t,c)}},7074:function(n,r,e){"use strict";e(21703),e(25438);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.Complex=void 0;var a=t(e(16125)),o=t(e(39885)),i=t(e(95551)),s=function(){function n(r,e){if((0,a["default"])(this,n),null==r&&(r=0),null==e&&(e=0),null==r.re&&null==r.im||(e=r.im||0,r=r.re||0),this.re=1*r,this.im=1*e,isNaN(r))throw new Error("Real value is NaN.");if(isNaN(e))throw new Error("Imaginary value is NaN.");Object.freeze(this)}return(0,o["default"])(n,[{key:"add",value:function(r,e){return null==r&&(r=0),null==e&&(e=0),null==r.re&&null==r.im||(e=r.im||0,r=r.re||0),new n(this.re+r,this.im+e)}},{key:"sub",value:function(r,e){return null==r&&(r=0),null==e&&(e=0),null==r.re&&null==r.im||(e=r.im||0,r=r.re||0),new n(this.re-r,this.im-e)}},{key:"mul",value:function(r,e){return null==r&&(r=0),null==e&&(e=0),null==r.re&&null==r.im||(e=r.im||0,r=r.re||0),new n(this.re*r-this.im*e,this.re*e+this.im*r)}},{key:"div",value:function(r,e){if(null==r&&(r=0),null==e&&(e=0),null==r.re&&null==r.im||(e=r.im||0,r=r.re||0),0==e)return new n(this.re/r,this.im/r);if(Math.abs(r)>=Math.abs(e)){var t=e/r;return new n((this.re+this.im*t)/(r+e*t),(this.im-this.re*t)/(r+e*t))}var a=r/e;return new n((this.re*a+this.im)/(r*a+e),(this.im*a-this.re)/(r*a+e))}},{key:"equals",value:function(n,r){return null==n&&(n=0),null==r&&(r=0),null==n.re&&null==n.im||(r=n.im||0,n=n.re||0),this.re==n&&this.im==r}},{key:"abs",value:function(){return Math.hypot(this.re,this.im)}},{key:"arg",value:function(){return Math.atan2(this.im,this.re)}},{key:"conj",value:function(){return new n(this.re,-this.im)}},{key:"toFixed",value:function(r){return new n(this.re.toFixed(r),this.im.toFixed(r))}},{key:"sqrt",value:function(){var r=this.abs();return new n(i["default"].sqrt(i["default"].mul(i["default"].add(r,this.re),.5)),i["default"].sqrt(i["default"].mul(i["default"].sub(r,this.re),.5)))}},{key:Symbol["for"]("nodejs.util.inspect.custom"),value:function(){return this.toString()}},{key:"toString",value:function(){return 0==this.im?this.re.toString():0==this.re?"".concat(this.im,"j"):this.im<0?"".concat(this.re," - ").concat(-this.im,"j"):"".concat(this.re," + ").concat(this.im,"j")}},{key:"valueOf",value:function(){return 0==this.im?this.re:this}}]),n}();r.Complex=s},53623:function(n,r,e){"use strict";e(21703),e(48675),e(3462);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.Complex128Array=void 0;var a=t(e(25069)),o=t(e(9545)),i=t(e(16125)),s=t(e(39885)),f=t(e(51382)),l=e(7074);function u(n){var r={get:function(n,r){return"symbol"!==(0,f["default"])(r)&&r%1===0?n.get(r):n[r]},set:function(n,r,e){return"symbol"!==(0,f["default"])(r)&&r%1===0?(n.set(r,e),!0):(n[r]=e,!0)}},e=function(){function e(t,a,o){return(0,i["default"])(this,e),t%1===0?(o=t,this._array=new n(2*o)):(null!=o&&(o*=2),this._array=new n(t,a,o)),Object.seal(this),new Proxy(this,r)}return(0,s["default"])(e,null,[{key:"BYTES_PER_ELEMENT",get:function(){return 2*n.BYTES_PER_ELEMENT}},{key:"name",get:function(){return"Complex".concat(8*e.BYTES_PER_ELEMENT,"Array")}}]),(0,s["default"])(e,[{key:Symbol.iterator,value:o["default"].mark((function n(){var r;return o["default"].wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=0;case 1:if(!(r<this.length)){n.next=7;break}return n.next=4,this[r];case 4:r++,n.next=1;break;case 7:case"end":return n.stop()}}),n,this)}))},{key:"keys",value:o["default"].mark((function n(){var r;return o["default"].wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=0;case 1:if(!(r<this.length)){n.next=7;break}return n.next=4,r;case 4:r++,n.next=1;break;case 7:case"end":return n.stop()}}),n,this)}))},{key:"values",value:o["default"].mark((function n(){return o["default"].wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.delegateYield(this[Symbol.iterator](),"t0",1);case 1:case"end":return n.stop()}}),n,this)}))},{key:"entries",value:o["default"].mark((function n(){var r;return o["default"].wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=0;case 1:if(!(r<this.length)){n.next=7;break}return n.next=4,[r,this[r]];case 4:r++,n.next=1;break;case 7:case"end":return n.stop()}}),n,this)}))},{key:"forEach",value:function(n,r){for(var e=0;e<source.length;e++)n.call(r,source[e],e)}},{key:"map",value:function(n,r){return e.from(this,n,r)}},{key:"reduce",value:function(n,r){var e=0;if(null==r){if(0==this.length)throw new TypeError("TypeError: Reduce of empty array with no initial value.");r=this[e++]}for(;e<this.length;e++)r=n(r,this[e],e,this);return r}},{key:"slice",value:function(n,r){return null!=n&&(n*=2),null!=r&&(r*=2),new e(this._array.slice(n,r).buffer)}},{key:"subarray",value:function(n,r){null!=n&&(n*=2),null!=r&&(r*=2);var t=this._array.subarray(n,r);return new e(t.buffer,t.byteOffset,t.length/2)}},{key:"join",value:function(n){null==n&&(n=", ");for(var r="",e=0;e<this.length;e++)e>0&&(r+=n),r+=this[e].toString();return r}},{key:"fill",value:function(n,r,e){n instanceof l.Complex||(n=new l.Complex(n)),null==r&&(r=0),null==e&&(e=this.length),0>e&&(e+=this.length),0>r&&(r+=this.length);for(var t=this._array.length;(t-=2)>=0;)this._array[t+1]=n.im,this._array[t+0]=n.re;return this}},{key:"get",value:function(n){return new l.Complex(this._array[2*n+0],this._array[2*n+1])}},{key:"set",value:function(n,r){if(n*=2,"number"===typeof r||!isNaN(r))return this._array[n+0]=r,void(this._array[n+1]=isNaN(r)?NaN:0);"re"in r&&"im"in r||(r=new l.Complex(r)),this._array[n+0]=r.re,this._array[n+1]=r.im}},{key:Symbol["for"]("nodejs.util.inspect.custom"),value:function(n){return"Complex128Array "+util.inspect(Array.from(this),n)}},{key:"toString",value:function(n){return this.join(",")}},{key:"buffer",get:function(){return this._array.buffer}},{key:"byteOffset",get:function(){return this._array.byteOffset}},{key:"byteLength",get:function(){return this._array.byteLength}},{key:"length",get:function(){return this._array.length>>>1}},{key:Symbol.toStringTag,get:function(){throw new Error("not yet implemented.")}}],[{key:"from",value:function(r,t,o){if(r.hasOwnProperty("length")||(r=(0,a["default"])(r)),null==t){if(r instanceof e)return new e(n.from(r._array).buffer,0,r.length);if(r instanceof Int32Array||r instanceof Float32Array||r instanceof Float64Array){for(var i=new n(2*r.length),s=r.length;s-- >0;)i[s<<1]=r[s];return new e(i.buffer,0,r.length)}}var f=new e(r.length);t=t||function(n){return n};for(var l=0;l<r.length;l++)f[l]=t.call(o,r[l],l);return f}},{key:"of",value:function(){for(var n=new e(arguments.length),r=0;r<arguments.length;r++)n[r]=r<0||arguments.length<=r?void 0:arguments[r];return n}}]),e}();return e}e(47926);var c=u(Float64Array);r.Complex128Array=c},90053:function(n,r,e){"use strict";e(48675),e(3462),e(21703);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.nextUp=f,r.nextDown=l,r.midl=u;var a=t(e(42989)),o=e(70087),i=Float64Array.of(NaN),s=new Int32Array(i.buffer);if(2!==s.length)throw new Error("Assertion failed.");function f(n){if(n*=1,0===n)return+Number.MIN_VALUE;if(!(n<1/0))return n;i[0]=n;var r=1-o.IS_LITTLE_ENDIAN,e=1*o.IS_LITTLE_ENDIAN;return n>0?(s[e]+=-1===s[r],s[r]+=1):(s[e]-=0===s[r],s[r]-=1),i[0]}function l(n){if(n*=1,0===n)return-Number.MIN_VALUE;if(!(n>-1/0))return n;i[0]=n;var r=1-o.IS_LITTLE_ENDIAN,e=1*o.IS_LITTLE_ENDIAN;return n>0?(s[e]-=0===s[r],s[r]-=1):(s[e]+=-1===s[r],s[r]+=1),i[0]}function u(n,r){if(n*=1,r*=1,isNaN(n))throw new Error("mid(x,y): x must be number.");if(isNaN(r))throw new Error("mid(x,y): x must be number.");if(Math.sign(n)*r<0){var e=(n+r)/2;if(!(e<Math.max(n,r)))throw new Error("Assertion failed.");if(!(e>Math.min(n,r)))throw new Error("Assertion failed.");return e}var t=Math.abs(n)<=Math.abs(r)?[n,r]:[r,n],o=(0,a["default"])(t,2),i=o[0],s=o[1],f=i+.5*(s-i);if(!(f<=Math.max(n,r)))throw new Error("Assertion failed.");if(!(f>=Math.min(n,r)))throw new Error("Assertion failed.");return f===r?n:f}},11882:function(n,r,e){"use strict";e(48675),e(3462),e(21703),e(85827),Object.defineProperty(r,"__esModule",{value:!0});var t={ARRAY_TYPES:!0,eps:!0,cast_scalar:!0,_check_dtype:!0,dtypeof:!0,super_dtype:!0,is_subdtype:!0};r.eps=s,r.cast_scalar=f,r._check_dtype=l,r.dtypeof=u,r.is_subdtype=h,r.super_dtype=r.ARRAY_TYPES=void 0;var a=e(7074);Object.keys(a).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return a[n]}}))}));var o=e(53623);Object.keys(o).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return o[n]}}))}));var i={int32:Int32Array,float32:Float32Array,float64:Float64Array,complex128:o.Complex128Array,object:Array};function s(n){switch(l(n),n){case"complex128":return new a.Complex(Number.EPSILON);case"float32":return 1.1920928955078125e-7;default:return Number.EPSILON}}function f(n,r){return"int32"===r?4294967295&n:"float32"===r?Math.fround(n):"complex128"===r?n instanceof a.Complex?n:new a.Complex(n):1*n}function l(n){if(!i.hasOwnProperty(n))throw new Error("Invalid dtype '"+n+"'. Must be one of {'"+Object.getOwnPropertyNames(i).join("', '")+"'}.")}function u(n){return n%1===0?n<=~(1<<31)&&n>=1<<31?"int32":"object":1*n==n?"float64":n instanceof a.Complex?"complex128":"object"}r.ARRAY_TYPES=i;var c=function(){for(var n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];return r.reduce((function(n,r){return l(n),l(r),"object"===n||"object"===r?"object":"complex128"===n||"complex128"===r?"complex128":"float64"===n||"float64"===r?"float64":"float32"===n||"float32"===r?"float32":"int32"}))};function h(n,r){l(n),l(r);var e={int32:0,float32:1,float64:2,complex128:3,object:4};return e[n]<=e[r]}r.super_dtype=c},20162:function(n,r,e){"use strict";e(25438);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.MutableComplex=void 0;var a=t(e(16125)),o=t(e(39885)),i=function(){function n(r,e){(0,a["default"])(this,n),this.re=1*r,this.im=1*e}return(0,o["default"])(n,[{key:"abs",value:function(){return Math.hypot(this.re,this.im)}},{key:"/=",value:function(n,r){if(0===r)this.re/=n,this.im/=n;else{var e=this.re;if(Math.abs(n)>=Math.abs(r)){var t=r/n;this.re=(e+this.im*t)/(n+r*t),this.im=(this.im-e*t)/(n+r*t)}else{var a=n/r;this.re=(e*a+this.im)/(n*a+r),this.im=(this.im*a-e)/(n*a+r)}}}},{key:"= c0*c1",value:function(n,r,e,t){this.re=n*e-r*t,this.im=n*t+r*e}},{key:"-= c0*c1",value:function(n,r,e,t){this.re-=n*e-r*t,this.im-=n*t+r*e}},{key:Symbol["for"]("nodejs.util.inspect.custom"),value:function(){return this.toString()}},{key:"toString",value:function(){return 0==this.im?this.re.toString():0==this.re?"".concat(this.im,"j"):this.im<0?"".concat(this.re," - ").concat(-this.im,"j"):"".concat(this.re," + ").concat(this.im,"j")}}]),n}();r.MutableComplex=i},42622:function(n,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=e(4552);Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[n]}})}))},4552:function(n,r,e){"use strict";e(21703),e(48675),e(3462),Object.defineProperty(r,"__esModule",{value:!0}),r.regular_simplex=o;var t=e(30065),a=e(11882);function o(n,r){if(null==r)r=n,n="float64";else{if(!(n in a.ARRAY_TYPES))throw new Error("regular_simplex(dtype,N): dtype '".concat(n,"' not supported."));if(n.startsWith("int"))throw new Error("regular_simplex(dtype,N): dtype must not be integral.")}if(r%1!==0)throw new Error("regular_simplex(N): N must be a valid integer.");if(!(0<r))throw new Error("regular_simplex(N): N must be greater than 0.");r|=0;for(var e=new a.ARRAY_TYPES[n]((r+1)*r),o=Int32Array.of(r+1,r),i=1;i<r+1;i++){for(var s=0;s<i-1;s++)e[r*i+s]=e[r*(i-1)+s];e[r*i+(i-2)]/=i,e[r*i+(i-1)]=Math.sqrt((i+1)/(2*i))}return new t.NDArray(o,e)}},76539:function(n,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=e(72375);Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[n]}})}))},72375:function(n,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.odeint_rk4=o;var t=e(30065),a=e(45854);function o(n,r,e,o){r=(0,t.asarray)(r);var i=n(r,e).mapElems((function(n){return n*o})),s=n((0,a.zip_elems)([r,i],(function(n,r){return n+r/2})),e+o/2).mapElems((function(n){return n*o})),f=n((0,a.zip_elems)([r,s],(function(n,r){return n+r/2})),e+o/2).mapElems((function(n){return n*o})),l=n((0,a.zip_elems)([r,f],(function(n,r){return n+r})),e+o).mapElems((function(n){return n*o}));return(0,a.zip_elems)([r,i,s,f,l],(function(n,r,e,t,a){return n+(r+2*(e+t)+a)/6}))}},37161:function(n,r,e){"use strict";e(21703),e(48675),e(3462);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.b64_decode=v,r.b64_decode_gen=w,r.b64_encode=y,r.b64_encode_gen=m;var a=t(e(9545));function o(n,r){var e;if("undefined"===typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=i(n))||r&&n&&"number"===typeof n.length){e&&(n=e);var t=0,a=function(){};return{s:a,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,f=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var n=e.next();return s=n.done,n},e:function(n){f=!0,o=n},f:function(){try{s||null==e["return"]||e["return"]()}finally{if(f)throw o}}}}function i(n,r){if(n){if("string"===typeof n)return s(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?s(n,r):void 0}}function s(n,r){(null==r||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}var f=a["default"].mark(w),l=a["default"].mark(m),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c="\f\n\r\t\v ",h=Int32Array.from({length:256},(function(){return-2}));if(64!==u.length)throw new Error("Assertion failed.");for(var d=u.length;d-- >0;)h[u.charCodeAt(d)]=d;for(var p=c.length;p-- >0;)h[c.charCodeAt(p)]=-1;function v(n){return Uint8Array.from(w(n))}function w(n){var r,e,t,o,i,s,l;return a["default"].wrap((function(a){while(1)switch(a.prev=a.next){case 0:t=function(){console.warn("_b64_decode(b64_chars): Base64 sequence ended unexpectedly.")},e=function(){while(1){var e=void 0,t=n.next();if(e=t.value,r=t.done,r=r||"="===e,r)return NaN;if("string"!==typeof e||1!==e.length)throw new Error("_b64_decode(b64_chars): Invalid token in character sequence: ".concat(e,"."));if(e=h[e.charCodeAt(0)],-1!==e){if(!(e>=0))throw new Error("_b64_decode(b64_chars): Invalid base64 character '".concat(e,"'."));return e}}},n=n[Symbol.iterator]();case 3:if(o=e(),!r){a.next=7;break}return a.abrupt("return");case 7:if(i=e(),!r){a.next=10;break}return a.abrupt("return",t());case 10:return a.next=12,o<<2|i>>4;case 12:if(s=e(),!r){a.next=15;break}return a.abrupt("return");case 15:return a.next=17,(15&i)<<4|s>>2;case 17:if(l=e(),!r){a.next=20;break}return a.abrupt("return");case 20:return a.next=22,(3&s)<<6|63&l;case 22:a.next=3;break;case 24:case"end":return a.stop()}}),f)}function y(n){var r,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t="",a=o(m(n,e));try{for(a.s();!(r=a.n()).done;){var i=r.value;t+=i}}catch(s){a.e(s)}finally{a.f()}return t}function m(n){var r,e,t,i,s,f,c,h,d,p,v,w=arguments;return a["default"].wrap((function(l){while(1)switch(l.prev=l.next){case 0:if(r=w.length>1&&void 0!==w[1]?w[1]:{},e=r.pad,t=void 0===e||e,i=r.linewidth,s=void 0===i?128:i,0<s){l.next=3;break}throw new Error("_b64_encode(bytes,{linewidth}): Invalid linewidth: ".concat(s,"."));case 3:f=n[Symbol.iterator](),n=a["default"].mark((function n(){var r,e,t;return a["default"].wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=o(f),n.prev=1,r.s();case 3:if((e=r.n()).done){n.next=12;break}if(t=e.value,t*=1,0<=t&&t<256){n.next=8;break}throw new Error("_b64_encode(bytes): Invalid token in byte sequence: ".concat(t));case 8:return n.next=10,t;case 10:n.next=3;break;case 12:n.next=17;break;case 14:n.prev=14,n.t0=n["catch"](1),r.e(n.t0);case 17:return n.prev=17,r.f(),n.finish(17);case 20:case"end":return n.stop()}}),n,null,[[1,14,17,20]])}))(),c=a["default"].mark((function r(){var e,t,o,i,s,f;return a["default"].wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(o=void 0,i=n.next(),e=i.value,t=i.done,!t){r.next=7;break}return r.abrupt("return");case 7:return r.next=9,e>>2;case 9:if(o=(3&e)<<4,s=n.next(),e=s.value,t=s.done,!t){r.next=17;break}return r.next=16,o;case 16:return r.abrupt("return");case 17:return r.next=19,e>>4|o;case 19:if(o=(15&e)<<2,f=n.next(),e=f.value,t=f.done,!t){r.next=27;break}return r.next=26,o;case 26:return r.abrupt("return");case 27:return r.next=29,e>>6|o;case 29:return r.next=31,63&e;case 31:r.next=0;break;case 33:case"end":return r.stop()}}),r)}))(),h=0,d=o(c),l.prev=8,d.s();case 10:if((p=d.n()).done){l.next=23;break}if(v=p.value,"number"===typeof v){l.next=14;break}throw new Error("Assertion failed.");case 14:if(0<=v&&v<64){l.next=16;break}throw new Error("Assertion failed.");case 16:return l.next=18,u[v];case 18:if(0!==++h%s){l.next=21;break}return l.next=21,"\n";case 21:l.next=10;break;case 23:l.next=28;break;case 25:l.prev=25,l.t0=l["catch"](8),d.e(l.t0);case 28:return l.prev=28,d.f(),l.finish(28);case 31:if(!t){l.next=37;break}case 32:if(0===h++%4){l.next=37;break}return l.next=35,"=";case 35:l.next=32;break;case 37:case"end":return l.stop()}}),l,null,[[8,25,28,31]])}},70087:function(n,r,e){"use strict";e(48675),e(3462),Object.defineProperty(r,"__esModule",{value:!0});var t={IS_LITTLE_ENDIAN:!0,WHITESPACES:!0};r.WHITESPACES=r.IS_LITTLE_ENDIAN=void 0;var a=e(37161);Object.keys(a).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return a[n]}}))}));var o=e(96161);Object.keys(o).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return o[n]}}))}));var i=e(92855);Object.keys(i).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return i[n]}}))}));var s=1===new Int16Array(Uint8Array.of(1,0).buffer)[0];r.IS_LITTLE_ENDIAN=s;var f="\f\n\r\t\v ";r.WHITESPACES=f},96161:function(n,r,e){"use strict";e(21703),e(48675),e(3462),e(85827);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.istr_parse=d,r.istr_stringify=p,r.istr_stringify_gen=v;var a=t(e(9545)),o=e(11882),i=e(37161),s=e(70087),f=e(30065),l=a["default"].mark(v);function u(n,r){var e;if("undefined"===typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=c(n))||r&&n&&"number"===typeof n.length){e&&(n=e);var t=0,a=function(){};return{s:a,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var n=e.next();return i=n.done,n},e:function(n){s=!0,o=n},f:function(){try{i||null==e["return"]||e["return"]()}finally{if(s)throw o}}}}function c(n,r){if(n){if("string"===typeof n)return h(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?h(n,r):void 0}}function h(n,r){(null==r||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}function d(n){n=n[Symbol.iterator]();for(var r=[];;){var e=n.next(),t=e.value,a=e.done;if(a)throw new Error("b64_parse(b64_chars): Invalid b64_chars.");if("["===t)break;r.push(t)}if(r=r.join("").trim(),""===r)throw new Error("b64_parse(b64_chars): dtype=object not (yet) supported.");(0,o._check_dtype)(r);for(var l=[],u=[];;){var c=n.next(),h=c.value,d=c.done;if(d)throw new Error("b64_parse(b64_chars): Invalid b64_chars.");if("]"===h&&0===u.length)break;if("]"!==h&&","!==h)u.push(h);else{var p=u.join("");if(isNaN(p))throw new Error('b64_parse(b64_chars): Invalid shape entry: "'.concat(p,'".'));if(l.push(1*p),"]"===h)break;u=[]}}l=Int32Array.from(l),n=(0,i.b64_decode_gen)(n);for(var v=o.ARRAY_TYPES[r],w=new Uint8Array(l.reduce((function(n,r){return n*r}),v.BYTES_PER_ELEMENT)),y=new Uint8Array(v.BYTES_PER_ELEMENT),m=0;m<w.length;){for(var _=0;_<y.length;_++){var g=n.next(),b=g.value,A=g.done;if(A)throw new Error("b64_parse(b64_chars): b64_chars too short.");y[_]=b}s.IS_LITTLE_ENDIAN||y.reverse();for(var E=0;E<y.length;E++,m++)w[m]=y[E]}return new f.NDArray(l,new v(w.buffer))}function p(n){var r,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t="",a=u(v(n,e));try{for(a.s();!(r=a.n()).done;){var o=r.value;t+=o}}catch(i){a.e(i)}finally{a.f()}return t}function v(n){var r,e,t=arguments;return a["default"].wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:{},n=(0,f.asarray)(n),e=n.data,"object"!==n.dtype){a.next=5;break}throw new Error("b64_format(A): A.dtype='".concat(n.dtype,"' not supported."));case 5:if(s.IS_LITTLE_ENDIAN){a.next=7;break}throw new Error("Big endianness not (yet) supported.");case 7:return a.delegateYield("".concat(n.dtype,"[").concat(n.shape.join(","),"]\n"),"t0",8);case 8:return a.delegateYield((0,i.b64_encode_gen)(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),r),"t1",9);case 9:case"end":return a.stop()}}),l)}},92855:function(n,r,e){"use strict";e(48675),e(3462),e(21703),e(85827);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.npy_serialize=h,r.npy_serialize_gen=d,r.npy_deserialize=p;var a=t(e(25069)),o=t(e(9545)),i=e(45321),s=e(11882),f=e(30065),l=e(70087),u=o["default"].mark(d),c="NUMPY";function h(n){return Uint8Array.from(d(n))}function d(n){var r,e,t,a,i,s;return o["default"].wrap((function(o){while(1)switch(o.prev=o.next){case 0:n=(0,f.asarray)(n),r=function(){switch(n.dtype){default:throw new Error("nd_to_npy: A.dtype=".concat(n.dtype," not yet supported."));case"int32":return"i4";case"float32":return"f4";case"float64":return"f8";case"complex128":return"c16"}}(),r=l.IS_LITTLE_ENDIAN?"<"+r:">"+r,e='{"descr": "'.concat(r,'", "fortran_order": False, "shape": (').concat(n.shape).concat(n.ndim>0?",":"",")}"),t=0;case 5:if(!(t<c.length)){o.next=11;break}return o.next=8,c.codePointAt(t);case 8:t++,o.next=5;break;case 11:return o.next=13,1;case 13:return o.next=15,0;case 15:if(a=e.length+11+63>>>6<<6,!(a>65535)){o.next=18;break}throw new Error("nd_to_npy: Header too large.");case 18:return o.next=20,a-10>>>0&255;case 20:return o.next=22,a-10>>>8&255;case 22:if(a%64===0){o.next=24;break}throw new Error("Assertion failed.");case 24:i=0;case 25:if(!(i<e.length)){o.next=31;break}return o.next=28,e.codePointAt(i);case 28:i++,o.next=25;break;case 31:s=e.length+11;case 32:if(!(s<a)){o.next=38;break}return o.next=35," ".codePointAt(0);case 35:s++,o.next=32;break;case 38:return o.next=40,"\n".codePointAt(0);case 40:return o.delegateYield(new Uint8Array(n.data.buffer,n.data.byteOffset,n.data.byteLength),"t0",41);case 41:case"end":return o.stop()}}),u)}function p(n){var r,e=function(){var r=n[Symbol.iterator]();return function(){var n=r.next(),e=n.value,t=n.done;if(t)throw new Error("npy_to_nd: byte sequence ended unexpectedly.");return e}}();n=void 0;var t="";while(t.length<6)t+=String.fromCodePoint(e());if(t!==c)throw new Error("npy_to_nd: byte sequence does not start with 'NUMPY'.");var u="".concat(e(),".").concat(e());switch(u){default:throw new Error("npy_bytes: npy-file version ".concat(u," not supported."));case"1.0":case"2.0":}var h=function(){var n=1*e()+256*e();if("2.0"===u&&(n+=65536*e()+e()*(1<<24)),n<0)throw new Error("Assertion failed.");return(0,i.pyon_parse)(o["default"].mark((function r(){return o["default"].wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!(n-- >0)){r.next=5;break}return r.next=3,String.fromCodePoint(e());case 3:r.next=0;break;case 5:case"end":return r.stop()}}),r)}))())}(),d=function(){switch(h.descr[0]){default:throw new Error("npy_to_nd: dtype '".concat(h.descr,"' not yet supported."));case"<":return!0;case">":return!1}}(),p=function(){switch(h.descr.slice(1)){default:throw new Error("npy_to_nd: dtype '".concat(h.descr,"' not yet supported."));case"i4":return"int32";case"f4":return"float32";case"f8":return"float64";case"c16":return"complex128"}}(),v=s.ARRAY_TYPES[p],w=Uint8Array.from({length:h.shape.reduce((function(n,r){return n*r}),v.BYTES_PER_ELEMENT)},e);if(d!==l.IS_LITTLE_ENDIAN)for(var y=v.BYTES_PER_ELEMENT>>>p.startsWith("complex"),m=0;m<w.length;m+=y)for(var _=m,g=m+y;_<--g;_++){var b=w[_];w[_]=w[g],w[g]=b}var A=Int32Array.from(h.shape);h.fortran_order&&A.reverse();var E=new f.NDArray(A,new v(w.buffer));return h.fortran_order&&E.ndim>1&&(E=(r=E).transpose.apply(r,(0,a["default"])(o["default"].mark((function n(){var r;return o["default"].wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=E.ndim;case 1:if(!(r-- >0)){n.next=6;break}return n.next=4,r;case 4:n.next=1;break;case 6:case"end":return n.stop()}}),n)}))()))),E}},45321:function(n,r,e){"use strict";e(21703);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.pyon_parse=f;var a=t(e(42989));function o(n,r){var e;if("undefined"===typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=i(n))||r&&n&&"number"===typeof n.length){e&&(n=e);var t=0,a=function(){};return{s:a,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,f=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var n=e.next();return s=n.done,n},e:function(n){f=!0,o=n},f:function(){try{s||null==e["return"]||e["return"]()}finally{if(f)throw o}}}}function i(n,r){if(n){if("string"===typeof n)return s(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?s(n,r):void 0}}function s(n,r){(null==r||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}function f(n){var r=function(){var r=!1,e=0,t=n[Symbol.iterator](),a=function(){var n=t.next(),a=n.value,o=n.done;if(++e,o){if(r)throw new Error("pyon_parse: Character sequence ended unexpectedly.");return r=!0,null}return a},o=function(){for(var n;;)switch(n=a()){default:return n;case"\f":case"\n":case"\r":case"\t":case"\v":case" ":}},i=function(n,r){var t=null==r?"Invalid character":"Expected ".concat(r,", but ");throw new Error("pyon_parse: ".concat(t," '").concat(n,"' encountered as ").concat(e,"-th character."))};return[a,o,i]}(),e=(0,a["default"])(r,3),t=e[0],i=e[1],s=e[2];function f(){switch(w){default:s(w);case"{":return u();case'"':case"'":return p();case"(":case"[":return c();case"T":return h();case"F":return d();case"N":return v();case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case".":case"8":case"+":case"9":case"-":return l()}}function l(){var n="";n:for(;;w=t())switch(w){case"\f":case"\n":case"\r":case"\t":case"\v":case" ":w=i();default:break n;case"0":case"1":case"2":case"3":case"a":case"A":case"4":case"b":case"B":case"5":case"c":case"C":case"6":case"d":case"D":case"7":case"e":case"E":case".":case"8":case"f":case"F":case"+":case"9":case"e":case"E":case"-":n+=w}return n=1*n.trim(),isNaN(n)&&s(n),n}function u(){var n={};if("{"!==w)throw new Error("Assertion failed.");for(;;){if("}"===(w=i()))return w=i(),n;var r=f();switch(":"!==w&&s(w,end),w=i(),n[r]=f(),w){default:s(w,",' or '}");case",":continue;case"}":return w=i(),n}}}function c(){for(var n=function(){switch(w){case"(":return")";case"[":return"]";default:throw new Error("Assertion failed.")}}(),r=[];;){switch(w=i()){case n:return w=i(),r;default:}switch(r.push(f()),w){default:s(w,",' or '".concat(n));case",":continue;case n:return w=i(),r}}}function h(){if("T"!==w)throw new Error("Assertion failed.");var n,r=o("rue");try{for(r.s();!(n=r.n()).done;){var e=n.value;w=t(),e!==w&&s(w,e)}}catch(s){r.e(s)}finally{r.f()}return w=i(),!0}function d(){if("F"!==w)throw new Error("Assertion failed.");var n,r=o("alse");try{for(r.s();!(n=r.n()).done;){var e=n.value;w=t(),e!==w&&s(w,e)}}catch(s){r.e(s)}finally{r.f()}return w=i(),!1}function p(){var n=w;switch(n){default:throw new Error("Assertion failed.");case"'":case'"':}for(var r="";;)switch(w=t()){case n:return w=i(),r;case"\\":switch(w=t()){case"u":for(var e=0,a=0;a<4;a++)switch(e<<=8,w=t()){default:s(w,"Hexadecimal digit");case"f":case"F":++e;case"e":case"E":++e;case"d":case"D":++e;case"c":case"C":++e;case"b":case"B":++e;case"a":case"A":++e;case"9":++e;case"8":++e;case"7":++e;case"6":++e;case"5":++e;case"4":++e;case"3":++e;case"2":++e;case"1":++e;case"0":++e}r+=String.fromCodePoint(e);continue;case"b":r+="\b";continue;case"f":r+="\f";continue;case"n":r+="\n";continue;case"r":r+="\r";continue;case"t":r+="\t";continue;case'"':case"'":case"\\":}default:r+=w}}function v(){if("N"!==w)throw new Error("Assertion failed.");var n,r=o("one");try{for(r.s();!(n=r.n()).done;){var e=n.value;w=t(),e!==w&&s(w,e)}}catch(s){r.e(s)}finally{r.f()}return w=i(),null}var w=i();return f()}},67456:function(n,r,e){"use strict";e(21703),e(48675),e(3462);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0});var a={linspace:!0,range:!0,cartesian_prod:!0,enumerate:!0,zip:!0,repeat:!0};r.linspace=y,r.range=m,r.cartesian_prod=_,r.enumerate=g,r.zip=b,r.repeat=A;var o=t(e(25069)),i=t(e(9545)),s=e(92733);function f(n,r){var e;if("undefined"===typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=l(n))||r&&n&&"number"===typeof n.length){e&&(n=e);var t=0,a=function(){};return{s:a,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var n=e.next();return i=n.done,n},e:function(n){s=!0,o=n},f:function(){try{i||null==e["return"]||e["return"]()}finally{if(s)throw o}}}}function l(n,r){if(n){if("string"===typeof n)return u(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?u(n,r):void 0}}function u(n,r){(null==r||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}Object.keys(s).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(a,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return s[n]}}))}));var c=i["default"].mark(y),h=i["default"].mark(m),d=i["default"].mark(_),p=i["default"].mark(g),v=i["default"].mark(b),w=i["default"].mark(A);function y(n,r,e){var t,a;return i["default"].wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(e%1===0){o.next=2;break}throw new Error("linspace(start,end,num): num must be an integer greater than 1.");case 2:if(e>1){o.next=4;break}throw new Error("linspace(start,end,num): num must be an integer.greater than 1.");case 4:if(isFinite(n)){o.next=6;break}throw new Error("linspace(start,end,num): start must be a finite number.");case 6:if(isFinite(r)){o.next=8;break}throw new Error("linspace(start,end,num): end must be a finite number.");case 8:t=0;case 9:if(!(t<e)){o.next=16;break}return a=t/(e-1),o.next=13,n*(1-a)+a*r;case 13:t++,o.next=9;break;case 16:case"end":return o.stop()}}),c)}function m(n,r){var e,t,a,o=arguments;return i["default"].wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e=o.length>2&&void 0!==o[2]?o[2]:1,n%1===0){i.next=3;break}throw new Error("range(start, stop, step=1): start not a valid integer.");case 3:if(r%1===0){i.next=5;break}throw new Error("range(start, stop, step=1): stop not a valid integer.");case 5:if(e%1===0){i.next=7;break}throw new Error("range(start, stop, step=1): step not a valid integer.");case 7:if(0!==e){i.next=9;break}throw new Error("range(start, stop, step=1): step must not be 0.");case 9:if(!(0<e)){i.next=19;break}t=n;case 11:if(!(t<r)){i.next=17;break}return i.next=14,t;case 14:t+=e,i.next=11;break;case 17:i.next=26;break;case 19:a=n;case 20:if(!(a>r)){i.next=26;break}return i.next=23,a;case 23:a+=e,i.next=20;break;case 26:case"end":return i.stop()}}),h)}function _(){var n,r,e,t,a,s,l=arguments;return i["default"].wrap((function(u){while(1)switch(u.prev=u.next){case 0:for(s=function(r){var t,o,l;return i["default"].wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(r<e.length)){n.next=20;break}t=f(e[r]),n.prev=2,t.s();case 4:if((o=t.n()).done){n.next=10;break}return l=o.value,a[r]=l,n.delegateYield(s(r+1),"t0",8);case 8:n.next=4;break;case 10:n.next=15;break;case 12:n.prev=12,n.t1=n["catch"](2),t.e(n.t1);case 15:return n.prev=15,t.f(),n.finish(15);case 18:n.next=22;break;case 20:return n.next=22,a.slice();case 22:case"end":return n.stop()}}),n,null,[[2,12,15,18]])},n=i["default"].mark(s),r=l.length,e=new Array(r),t=0;t<r;t++)e[t]=l[t];return e=e.map((function(n){return n instanceof Array||n instanceof Float32Array||n instanceof Float64Array||n instanceof Int8Array||n instanceof Int16Array||n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint16Array||n instanceof Uint32Array?n.slice():(0,o["default"])(n)})),a=new Array(e.length),u.delegateYield(s(0),"t0",6);case 6:case"end":return u.stop()}}),d)}function g(n){var r,e,t,a;return i["default"].wrap((function(o){while(1)switch(o.prev=o.next){case 0:r=0,e=f(n),o.prev=2,e.s();case 4:if((t=e.n()).done){o.next=10;break}return a=t.value,o.next=8,[r++,a];case 8:o.next=4;break;case 10:o.next=15;break;case 12:o.prev=12,o.t0=o["catch"](2),e.e(o.t0);case 15:return o.prev=15,e.f(),o.finish(15);case 18:case"end":return o.stop()}}),p,null,[[2,12,15,18]])}function b(){var n,r,e,t,a,o,s,f,l=arguments;return i["default"].wrap((function(i){while(1)switch(i.prev=i.next){case 0:for(n=l.length,r=new Array(n),e=0;e<n;e++)r[e]=l[e];if(0<r.length){i.next=3;break}throw new Error("zip(...seqs): seqs.length must be at least 1.");case 3:for(t=r.length,a=t;a-- >0;)r[a]=r[a][Symbol.iterator]();case 5:o=[],s=0;case 7:if(!(s<t)){i.next=15;break}if(f=r[s].next(),!f.done){i.next=11;break}return i.abrupt("return");case 11:o.push(f.value);case 12:s++,i.next=7;break;case 15:return i.next=17,o;case 17:i.next=5;break;case 19:case"end":return i.stop()}}),v)}function A(n,r){var e;return i["default"].wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(void 0===r&&(r=n,n=1/0),n===1/0){t.next=6;break}if(n%1===0){t.next=4;break}throw new Error("repeat(n,seq): n must be a non-negative int or Infinity.");case 4:if(n>=0){t.next=6;break}throw new Error("repeat(n,seq): n must be a non-negative int or Infinity.");case 6:r=r instanceof Array||r instanceof Float32Array||r instanceof Float64Array||r instanceof Int8Array||r instanceof Int16Array||r instanceof Int32Array||r instanceof Uint8Array||r instanceof Uint16Array||r instanceof Uint32Array?r.slice():(0,o["default"])(r),e=n;case 8:if(!(e-- >0)){t.next=12;break}return t.delegateYield(r,"t0",10);case 10:t.next=8;break;case 12:case"end":return t.stop()}}),w)}},92733:function(n,r,e){"use strict";function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(n,r){return(n>r)-(n<r)};if(!(r instanceof Function))throw new Error("argmin(seq,compare_fn): compare_fn must be a function.");Symbol.iterator in n?n=n[Symbol.iterator]():console.warn("argmin(seq,compare_fn): seq[Symbol.iterator] does not exist.");for(var e=function(){var r=n.next();if(r.done)throw new Error("argmin(seq,compare_fn): seq must be an iterable containing at least one item.");return r.value}(),t=0,a=1;;a++){var o=n.next();if(o.done)return t;r(e,o.value)>0&&(t=a,e=o.value)}}function a(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(n,r){return(n>r)-(n<r)};if(!(r instanceof Function))throw new Error("argmax(seq,compare_fn): compare_fn must be a function.");return t(n,(function(n,e){return-r(n,e)}))}function o(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(n,r){return(n>r)-(n<r)};if(!(r instanceof Function))throw new Error("argmin(seq,compare_fn): compare_fn must be a function.");Symbol.iterator in n?n=n[Symbol.iterator]():console.warn("argmin(seq,compare_fn): seq[Symbol.iterator] does not exist.");for(var e=function(){var r=n.next();if(r.done)throw new Error("argmin(seq,compare_fn): seq must be an iterable containing at least one item.");return r.value}();;){var t=n.next();if(t.done)return e;r(e,t.value)>0&&(e=t.value)}}function i(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(n,r){return(n>r)-(n<r)};if(!(r instanceof Function))throw new Error("argmax(seq,compare_fn): compare_fn must be a function.");return o(n,(function(n,e){return-r(n,e)}))}e(21703),Object.defineProperty(r,"__esModule",{value:!0}),r.argmin=t,r.argmax=a,r.min=o,r.max=i},49595:function(n,r,e){"use strict";e(21703);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.KahanSum=void 0;var a=t(e(16125)),o=t(e(39885)),i=function(){function n(){(0,a["default"])(this,n),this.sum=this.rst=0}return(0,o["default"])(n,[{key:"set",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(isNaN(n*=1))throw new Error("Assertion failed.");if(isNaN(r*=1))throw new Error("Assertion failed.");this.sum=n,this.rst=r}},{key:"add",value:function(n){var r=n-this.rst,e=this.sum+r;this.rst=e-this.sum-r,this.sum=e}}]),n}();r.KahanSum=i},52894:function(n,r,e){"use strict";function t(n,r){var e=Math.max(Math.abs(n),Math.abs(r));if(0===e)return[1,0,0];n/=e,r/=e;var t=Math.sqrt(n*n+r*r);if(n/=t,r/=t,t*=e,!(0<=t))throw new Error("Assertion failed: "+t);return[n,r,t]}function a(n,r,e,t,a,o){if(r%1!==0)throw new Error("Assertion failed.");if(e%1!==0)throw new Error("Assertion failed.");if(t%1!==0)throw new Error("Assertion failed.");if(!(0<=r))throw new Error("Assertion failed.");if(!(0<=e))throw new Error("Assertion failed.");if(!(0<=t))throw new Error("Assertion failed.");if(0!==n.length%1)throw new Error("Assertion failed.");if(!(e<n.length-r+1))throw new Error("Assertion failed.");if(!(t<n.length-r+1))throw new Error("Assertion failed.");if(!(Math.abs(Math.hypot(a,o)-1)<=1e-6))throw new Error("Assertion failed.");r|=0,e|=0,t|=0,a=+a,o=+o;for(var i=0|r;i-- >0;){var s=n[e],f=n[t];n[e]=a*s+o*f,n[t]=a*f-o*s,e=e+1|0,t=t+1|0}}function o(n,r,e,t,a,o){if(!(Math.abs(Math.hypot(a,o)-1)<=1e-6))throw new Error("Assertion failed.");e|=0,t|=0,a=+a,o=+o;for(var i=0|r;i-- >0;){var s=n[e],f=n[t];n[e]=a*s-o*f,n[t]=a*f+o*s,e=e+r|0,t=t+r|0}}e(21703),e(25438),Object.defineProperty(r,"__esModule",{value:!0}),r._giv_rot_qr=t,r._giv_rot_rows=a,r._giv_rot_cols=o},12812:function(n,r){"use strict";function e(n,r,e,t){var a=Math.atan2(e-r,t+n),o=Math.atan2(e+r,t-n),i=(a-o)/2,s=(a+o)/2,f=Math.cos(i),l=Math.sin(i),u=Math.cos(s),c=Math.sin(s);if(a=u*(l*e+f*n)-c*(l*t+f*r),o=c*(f*e-l*n)+u*(f*t-l*r),Math.abs(a)<Math.abs(o)){var h=[f,-l];l=h[0],f=h[1];var d=[c,-u];u=d[0],c=d[1],a=o}return a<0&&(u=-u,c=-c),[f,l,u,c]}function t(n,r,e,t,o,i,s,f){n|=0,o|=0,s|=0;for(var l=0;l<n;l++)i[s+l]=e[n*l+l];a(n,r,t,o,i,s,f)}function a(n,r,e,t,a,o,i){n|=0,t|=0,o|=0;for(var s=n;s-- >0;){var f=a[o+s];if(f<0||Object.is(f,-0)){a[o+s]=-f;for(var l=0;l<n;l++)r[t+n*s+l]*=-1}}i.sort((function(n,r){return a[o+r]-a[o+n]}));for(var u=0;u<n;++u)for(var c=u;;){var h=i[c];if(i[c]=c,c=h,c<=u)break;for(var d=t+i[c]*n,p=t+c*n,v=0;v<n;v++){var w=r[d+v];r[d+v]=r[p+v],r[p+v]=w}for(var y=0;y<n;y++){var m=e[d+y];e[d+y]=e[p+y],e[p+y]=m}h=a[o+i[c]],a[o+i[c]]=a[o+c],a[o+c]=h}for(var _=0;_<n-1;_++)for(var g=_;++g<n;){var b=t+n*_+g,A=t+n*g+_,E=r[b];r[b]=r[A],r[A]=E}}Object.defineProperty(r,"__esModule",{value:!0}),r._svd_jac_angles=e,r._svd_jac_post=t,r._svd_jac_post_skip1=a},23608:function(n,r,e){"use strict";e(21703),e(48675),e(3462);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r._bidiag_decomp_horiz=h,r.bidiag_decomp=d;var a=t(e(42989)),o=e(30065),i=e(11882),s=e(52894),f=e(30716),l=e(13511);function u(n,r,e,t,o,i,u){n|=0,r|=0,t|=0,u|=0;var c=new f.FrobeniusNorm;if(n<r)throw new Error("Assertion failed.");for(var h=r;h-- >0;)i[u+r*h+h]=1;for(var d=0;d<r;d++){for(var p=t+r*d+d,v=d;++v<n;){var w=t+r*v+d,y=e[w];if(0!==y){var m=e[p],_=(0,s._giv_rot_qr)(m,y),g=(0,a["default"])(_,3),b=g[0],A=g[1],E=g[2];0!==A&&(b<0&&(b*=-1,A*=-1,E*=-1),(0,s._giv_rot_rows)(e,r-1-d,p+1,w+1,b,A),e[p]=E),e[w]=A}}if(d<r-2){c.reset();for(var x=r;--x>d+1;)c.include(e[t+r*d+x]);if(0===c.max)continue;var M=c.resultIncl(e[p+1])*(e[p+1]>0?-1:1);c.include(e[p+1]-=M);for(var k=c.max,N=Math.sqrt(c.sum),P=d;++P<r;)e[t+r*d+P]=e[t+r*d+P]/k/N;for(var O=0;O<r;O++){for(var j=0,S=d;++S<r;)j+=i[u+r*O+S]*e[t+r*d+S];j*=2;for(var R=d;++R<r;)i[u+r*O+R]-=e[t+r*d+R]*j}for(var I=d;++I<n;){for(var F=0,D=d;++D<r;)F+=e[t+r*I+D]*e[t+r*d+D];F*=2;for(var q=d;++q<r;)e[t+r*I+q]-=e[t+r*d+q]*F}e[p+1]=M,e.fill(0,p+2,t+r*(d+1))}}(0,l._transpose_inplace)(r,i,u);for(var L=r;--L>0;)o[u+r*L+L]=e[t+r*L+L],o[u+r*(L-1)+L]=e[t+r*(L-1)+L];o[u]=e[t];for(var T=0;T<r;T++)for(var Y=T;Y<r;Y++)e[t+r*T+Y]=+(T===Y);for(var G=r;G-- >0;)for(var U=n;--U>G;){var B=e[t+r*U+G];if(0!==B){e[t+r*U+G]=0;var J=Math.sqrt((1+B)*(1-B));(0,s._giv_rot_rows)(e,r-G,t+r*U+G,t+r*G+G,J,B)}}}function c(n,r,e,t,o){n|=0,o|=0;for(var i=new f.FrobeniusNorm,u=n;u-- >0;)r[o+n*u+u]=1;for(var c=n;c-- >0;)t[o+n*c+c]=1;for(var h=0;h<n-1;h++){for(var d=o+n*h+h,p=h;++p<n;){var v=o+n*p+h,w=e[v];if(0!==w){var y=e[d],m=(0,s._giv_rot_qr)(y,w),_=(0,a["default"])(m,3),g=_[0],b=_[1],A=_[2];e[v]=0,0!==b&&(e[d]=A,(0,s._giv_rot_rows)(e,n-1-h,d+1,v+1,g,b),(0,s._giv_rot_rows)(r,1+p,o+n*h,o+n*p,g,b))}}i.reset();for(var E=n;--E>h+1;)i.include(e[o+n*h+E]);if(0!==i.max){var x=i.resultIncl(e[d+1])*(e[d+1]>0?-1:1);i.include(e[d+1]-=x);for(var M=i.max,k=Math.sqrt(i.sum),N=h;++N<n;)e[o+n*h+N]=e[o+n*h+N]/M/k;for(var P=0;P<n;P++){for(var O=0,j=h;++j<n;)O+=t[o+n*P+j]*e[o+n*h+j];O*=2;for(var S=h;++S<n;)t[o+n*P+S]-=e[o+n*h+S]*O}for(var R=h;++R<n;){for(var I=0,F=h;++F<n;)I+=e[o+n*R+F]*e[o+n*h+F];I*=2;for(var D=h;++D<n;)e[o+n*R+D]-=e[o+n*h+D]*I}e[d+1]=x,e.fill(0,d+2,o+n*(h+1))}}(0,l._transpose_inplace)(n,t,o),(0,l._transpose_inplace)(n,r,o)}function h(n,r,e,t,o,i,u,c){if(n|=0,r|=0,t|=0,i|=0,c=c+r|0,!(n<=r))throw Error("Assertion failed.");for(var h=new f.FrobeniusNorm,d=n;d-- >0;)e[t+n*d+d]=1;for(var p=0;p<n&&p<r-1;p++){for(var v=c+r*p+p,w=p;++w<n;){var y=c+r*w+p,m=u[y];if(0!==m){var _=u[v],g=(0,s._giv_rot_qr)(_,m),b=(0,a["default"])(g,3),A=b[0],E=b[1],x=b[2];u[y]=0,0!==E&&(u[v]=x,(0,s._giv_rot_rows)(u,r-1-p,v+1,y+1,A,E),(0,s._giv_rot_rows)(e,1+w,t+n*p,t+n*w,A,E))}}var M=c+r*(p-1);h.reset();for(var k=r-1;;){var N=u[M+k]=u[c+r*p+k];if(--k<=p)break;h.include(N)}if(0!==h.max){var P=h.resultIncl(u[M+(p+1)])*(u[M+(p+1)]>0?-1:1);h.include(u[M+(p+1)]-=P);for(var O=h.max,j=Math.sqrt(h.sum),S=p;++S<r;)u[M+S]=u[M+S]/O/j;for(var R=p;++R<n;){for(var I=0,F=p;++F<r;)I+=u[c+r*R+F]*u[M+F];I*=2;for(var D=p;++D<r;)u[c+r*R+D]-=u[M+D]*I}u[v+1]=P}else u[M+(p+1)]=0}(0,l._transpose_inplace)(n,e,t);for(var q=n;q-- >0;)o[i+(n+1)*q+(q+1)]=q<r-1?u[c+r*q+(q+1)]:0,o[i+(n+1)*q+q]=u[c+r*q+q];for(var L=Math.min(n,r-1);;){if(--L,u.fill(0,c+r*L,c+r*(L+1)),u[c+r*L+(L+1)]=1,L<0)break;for(var T=c+r*(L-1),Y=L;Y<n;Y++){for(var G=0,U=L;++U<r;)G+=u[c+r*Y+U]*u[T+U];G*=2;for(var B=L;++B<r;)u[c+r*Y+B]-=u[T+B]*G}}}function d(n){if(n=(0,o.asarray)(n),n.ndim<2)throw new Error("bidiag_decomp(A): A must be at least 2D.");if(n.dtype.startsWith("complex"))throw new Error("bidiag_decomp(A): complex A not yet supported.");var r="float32"===n.dtype?"float32":"float64",e=i.ARRAY_TYPES[r],t=Int32Array.from(n.shape),s=Int32Array.from(t),f=Int32Array.from(t),l=n.shape.slice(-2),d=(0,a["default"])(l,2),p=d[0],v=d[1],w=n.data.length/(p*v)|0,y=0|Math.min(p,v),m=0|(p>=v?y:y+1);t[t.length-1]=y,s[s.length-2]=y,s[s.length-1]=m,f[f.length-2]=m;var _=function(){if(p===v){for(var r=e.from(n.data),t=new e(r.length),a=new e(r.length),o=0;o<r.length;o+=v*v)c(v,t,r,a,o);return[t,r,a]}if(p>v){var i=e.from(n.data);n=void 0;for(var s=new e(w*v*v),f=new e(w*v*v),l=0,d=0;d<s.length;l+=p*v,d+=v*v)u(p,v,i,l,s,f,d);return[i,s,f]}var y=new e(w*(p+1)*v);if(!(p<v))throw new Error("Assertion failed.");n=n.data;for(var m=0,_=v;_<y.length;_+=v)for(var g=_+p*v;_<g;m++,_++)y[_]=n[m];n=void 0;for(var b=new e(w*p*p),A=new e(w*p*(p+1)),E=0,x=0,M=0;x<A.length;E+=p*p,x+=p*(p+1),M+=(p+1)*v)h(p,v,b,E,A,x,y,M);return[b,A,y]}(),g=(0,a["default"])(_,3),b=g[0],A=g[1],E=g[2];return[new o.NDArray(t,b),new o.NDArray(s,A),new o.NDArray(f,E)]}},9588:function(n,r,e){"use strict";e(21703),e(48675),e(3462),e(85827);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r._cholesky_decomp=l,r.cholesky_decomp=u,r.cholesky_solve=c;var a=t(e(42989)),o=e(11882),i=e(49595),s=e(30065),f=e(14748);function l(n,r,e,t){if(!(n<=r))throw new Error("Assertion failed.");for(var a=new i.KahanSum,o=0;o<n;o++)for(var s=0;s<=o;s++){a.set(e[t+r*o+s]);for(var f=0;f<s;f++)a.add(-e[t+r*o+f]*e[t+r*s+f]);if(o>s)e[t+r*o+s]=a.sum/e[t+r*s+s];else if(e[t+r*o+o]=Math.sqrt(a.sum),isNaN(e[t+r*o+o]))throw new Error("Matrix contains NaNs or is (near) singular.")}}function u(n){n=(0,s.asarray)(n);var r="float32"===n.dtype?"float32":"float64",e=n.shape,t=e.slice(-2),i=(0,a["default"])(t,2),f=i[0],u=i[1];n=n.data;var c=new o.ARRAY_TYPES[r](n.length);if(f!=u)throw new Error("Last two dimensions must be quadratic.");for(var h=0;h<c.length;h+=f*f){for(var d=0;d<f;d++)for(var p=0;p<=d;p++)c[h+f*d+p]=n[h+f*d+p];l(f,f,c,h)}return new s.NDArray(e,c)}function c(n,r){if(n=(0,s.asarray)(n),r=(0,s.asarray)(r),n.ndim<2)throw new Error("L must be at least 2D.");if(r.ndim<2)throw new Error("y must be at least 2D.");var e=n.shape.slice(-2),t=(0,a["default"])(e,2),i=t[0],l=t[1],u=r.shape.slice(-2),c=(0,a["default"])(u,2),h=c[0],d=c[1];if(i!=l)throw new Error("Last two dimensions of L must be quadratic.");if(h!=l)throw new Error("L and y don't match.");var p=Math.max(n.ndim,r.ndim),v=Int32Array.from({length:p},(function(){return 1}));v[p-2]=h,v[p-1]=d;for(var w=0,y=[n,r];w<y.length;w++)for(var m=y[w],_=p-2,g=m.ndim-2;_-- >0&&g-- >0;)if(1===v[_])v[_]=m.shape[g];else if(v[_]!=m.shape[g]&&1!=m.shape[g])throw new Error("Shapes are not broadcast-compatible.");var b="float32"===n.dtype&&"float32"===r.dtype?"float32":"float64",A=new o.ARRAY_TYPES[b](v.reduce((function(n,r){return n*r}),1)),E=n.data,x=r.data,M=0,k=1,N=0,P=1,O=0;function j(e){if(e===p-2){k=i*i,P=i*d;for(var t=0;t<P;t++)A[O+t]=x[N+t];return(0,f._tril_solve)(h,h,d,E,M,A,O),(0,f._tril_t_solve)(h,h,d,E,M,A,O),M+=k,N+=P,void(O+=P)}for(var a=v[e];;a--){if(j(e+1),1==a)break;n.shape[e-p+n.ndim]>1||(M-=k),r.shape[e-p+r.ndim]>1||(N-=P)}k*=n.shape[e-p+n.ndim]||1,P*=r.shape[e-p+r.ndim]||1}return j(0),new s.NDArray(v,A)}},7319:function(n,r,e){"use strict";e(21703);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.slogdet=r.det=r.slogdet_tri=r.det_tri=void 0;var a=t(e(42989)),o=e(30065),i=e(11882),s=e(99777),f=function(n){if(n=(0,o.asarray)(n),n.ndim<2)throw new Error("det_tri(a): a.shape=[".concat(n.shape,"]; a.ndim must be at least 2."));var r=n.shape,e=r.slice(-2),t=(0,a["default"])(e,2),s=t[0],f=t[1];if(s!==f)throw new Error("det_tri(a): a must be square matrices.");var l=i.ARRAY_TYPES[n.dtype],u=n.data;n=void 0;for(var c=new l(u.length/(f*f)),h=0,d=0;h<c.length;h++){var p=d;d+=f*f;for(var v=1;p<d;p+=f+1)v*=u[p];c[h]=v}return new o.NDArray(r.slice(0,-2),c)};r.det_tri=f;var l=function(n){if(n=(0,o.asarray)(n),n.ndim<2)throw new Error("det_tri(A): A.ndim must be at least 2.");var r=n.shape,e=r.slice(-2),t=(0,a["default"])(e,2),s=t[0],f=t[1];if(s!==f)throw new Error("det_tri(A): A must be square matrices.");var l=i.ARRAY_TYPES["float32"===n.dtype?"float32":"float64"];n=n.data;for(var u=new l(n.length/(f*f)),c=new l(u.length),h=0,d=0;h<c.length;h++){var p=d;d+=f*f;for(var v=1,w=0;p<d;p+=f+1)v*=Math.sign(n[p]),w+=Math.log(Math.abs(n[p]));u[h]=v,c[h]=w}var y=r.slice(0,-2);return[new o.NDArray(y,u),new o.NDArray(y,c)]};r.slogdet_tri=l;var u=function(n){var r=(0,s.qr_decomp)(n),e=(0,a["default"])(r,2),t=(e[0],e[1]);return f(t)};r.det=u;var c=function(n){var r=(0,s.qr_decomp)(n),e=(0,a["default"])(r,2),t=(e[0],e[1]);return l(t)};r.slogdet=c},93992:function(n,r,e){"use strict";e(21703),e(85827),e(48675),e(3462);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.diag_mat=f,r.diag=l;var a=t(e(42989)),o=t(e(25069)),i=e(30065),s=e(11882);function f(n){if(n.ndim<1)throw new Error("diag_mat(diag): diag.ndim=".concat(n.ndim," is less than 1."));n=(0,i.asarray)(n);var r=n.shape,e=r[r.length-1],t=n.data,a=s.ARRAY_TYPES[n.dtype].from({length:r.reduce((function(n,r){return n*r}))*e},(function(){return 0}));if(n=void 0,r.length<1)throw new Error("diag_mat(diag): diag must be at least 1d.");if(e<=0)throw new Error("Assertion Failed!");for(var f=0,l=0;;){var u=f+e;while(1){if(a[l]=t[f],++f===u)break;l+=e+1}if(++l==a.length)break}return new i.NDArray(Int32Array.of.apply(Int32Array,(0,o["default"])(r).concat([e])),a)}function l(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(n.ndim<2)throw new Error("diag(A, offset): A.ndim=".concat(n.ndim," is less than 2."));n=(0,i.asarray)(n);var e=n.shape.slice(-2),t=(0,a["default"])(e,2),o=t[0],f=t[1],l=n.shape.slice(0,-1),u=s.ARRAY_TYPES[n.dtype];if(n=n.data,!(r>-o&&r<+f))throw new Error("diag(A, offset): offset=".concat(r," out of A.shape=[").concat(n.shape,"]."));var c=Math.min(o,o+r,f,f-r);l[l.length-1]=c;for(var h=new u(l.reduce((function(n,r){return n*r}))),d=Math.max(0,r,-r*f),p=0,v=0;v<n.length;p+=c,v+=o*f)for(var w=0;w<c;w++)h[p+w]=n[v+d+f*w+w];return new i.NDArray(l,h)}},88429:function(n,r,e){"use strict";e(21703),e(48675),e(3462);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.eigen=c,r.eigenvals=h,r.eigen_balance_pre=d,r.eigen_balance_post=v;var a=t(e(25069)),o=t(e(42989)),i=e(56493),s=e(30065),f=e(11882),l=e(45854),u=t(e(95551));function c(n){var r=d(n,2),e=(0,o["default"])(r,2),t=e[0],a=e[1],s=(0,i.schur_decomp)(a),f=(0,o["default"])(s,2),l=f[0],u=f[1],c=(0,i.schur_eigen)(l,u),h=(0,o["default"])(c,2),p=h[0],v=h[1];if(!v.dtype.startsWith("complex"))throw new Error("Assertion failed.");if(!t.dtype.startsWith("float"))throw new Error("Assertion failed.");for(var w=n.shape[n.ndim-1],y=new Float64Array(w),m=new Float64Array(w),_=v.data._array,g=t.data,b=0,A=0;A<_.length;b+=w,A+=2*w*w){y.fill(0),m.fill(0);for(var E=0;E<w;E++)for(var x=g[b+E],M=0;M<2*w;M++){var k=Math.abs(_[A+2*w*E+M]*=x);if(k>0){var N=M>>1;k>m[N]&&(y[N]*=Math.pow(m[N]/k,2),m[N]=k),y[N]+=Math.pow(k/m[N],2)}}for(var P=0;P<w;P++){var O=m[P];y[P]=isFinite(O)?Math.sqrt(y[P])*O:O}for(var j=0;j<w;j++)for(var S=0;S<2*w;S++)_[A+2*w*j+S]/=y[S>>1]}return[p,v]}function h(n){var r=d(n,2),e=(0,o["default"])(r,2),t=(e[0],e[1]),a=(0,i.schur_decomp)(t),s=(0,o["default"])(a,2),f=(s[0],s[1]);return(0,i.schur_eigenvals)(f)}function d(n,r){if(null==r&&(r=2),r>Number.MAX_VALUE)return p(n);var e=n.shape[n.ndim-1],t=f.ARRAY_TYPES["float32"===n.dtype?"float32":"float64"],a=n.shape,o=a.slice(0,-1);if(!(r>=1))throw new Error("Invalid norm p=".concat(r,";"));if(n.shape[n.ndim-2]!=e)throw new Error("A is not square");n=t.from(n.data);var i=new t(n.length/e),l=Math.pow(.95,1/r);i.fill(1);for(var u=n.length,c=i.length;u>0;){u-=e*e,c-=e;for(var h,d=!1;!d;)for(h=0,d=!0;h<e;h++){for(var v=0,w=0,y=0,m=0,_=0;_<e;_++)if(h!==_){var g=Math.abs(n[u+e*h+_]);if(g>0){if(g>m){var b=m/g;m=g,y*=Math.pow(b,r)}var A=g/m;y+=Math.pow(A,r)}var E=Math.abs(n[u+e*_+h]);if(E>0){if(E>w){var x=w/E;w=E,v*=Math.pow(x,r)}var M=E/w;v+=Math.pow(M,r)}}if(y=isFinite(y)?Math.pow(y,1/r)*m:y,v=isFinite(v)?Math.pow(v,1/r)*w:v,y*v!=0){if(!isFinite(y*v))throw new Error("NaN encountered.");var k=v>=y?Math.pow(1+Math.pow(y/v,r),1/r)*v:Math.pow(1+Math.pow(v/y,r),1/r)*y,N=1;while(y>=2*v)v*=2,y/=2,N*=2;while(v>=2*y)v/=2,y*=2,N/=2;var P=v>=y?Math.pow(1+Math.pow(y/v,r),1/r)*v:Math.pow(1+Math.pow(v/y,r),1/r)*y;if(!(P>=l*k)){d=!1,i[c+h]*=N;for(var O=0;O<e;O++)n[u+e*h+O]/=N,n[u+e*O+h]*=N}}}}return[new s.NDArray(o,i),new s.NDArray(a,n)]}function p(n){var r=n.shape[n.ndim-1],e=f.ARRAY_TYPES["float32"===n.dtype?"float32":"float64"],t=n.shape,a=t.slice(0,-1);if(n.shape[n.ndim-2]!=r)throw new Error("A is not square");n=e.from(n.data);var o=new e(n.length/r);o.fill(1);for(var i=n.length,l=o.length;i>0;){i-=r*r,l-=r;for(var u,c=!1;!c;)for(u=0,c=!0;u<r;u++){for(var h=0,d=0,p=0;p<r;p++)if(u!==p){var v=Math.abs(n[i+r*u+p]);d=Math.max(d,v);var w=Math.abs(n[i+r*p+u]);h=Math.max(h,w)}if(d*h!==0){var y=Math.max(h,d);if(0!=y){if(!isFinite(y))throw new Error("NaN encountered.");var m=1;while(d>=2*h)h*=2,d/=2,m*=2;while(h>=2*d)h/=2,d*=2,m/=2;var _=Math.max(h,d);if(!(_>=y)){c=!1,o[l+u]*=m;for(var g=0;g<r;g++)n[i+r*u+g]/=m,n[i+r*g+u]*=m}}}}}return[new s.NDArray(a,o),new s.NDArray(t,n)]}function v(n,r){if(r.ndim<2)throw new Error("eigen_balance_post(D,V): V.ndim must be at least 2.");var e=r.shape.slice(-2),t=(0,o["default"])(e,2),i=t[0],s=t[1];if(i!==s)throw new Error("eigen_balance_post(D,V): V must be square.");var c=f.ARRAY_TYPES["float64"],h=(0,l.zip_elems)([r,n.reshape.apply(n,(0,a["default"])(n.shape).concat([1]))],"complex128",u["default"].mul);r=h.data;for(var d=new c(s),p=new c(s),v=0;v<r.length;v+=i*s){d.fill(0),p.fill(0);for(var w=0;w<s;w++)for(var y=0;y<s;y++){var m=u["default"].abs(r[v+s*w+y]);m>0&&(m>p[y]&&(d[y]*=Math.pow(p[y]/m,2),p[y]=m),d[y]+=Math.pow(m/p[y],2))}for(var _=0;_<s;_++){var g=p[_];d[_]=isFinite(g)?Math.sqrt(d[_])*g:g}for(var b=0;b<s;b++)for(var A=0;A<s;A++)r[v+s*b+A]=u["default"].div(r[v+s*b+A],d[A])}return h}},34955:function(n,r,e){"use strict";e(21703),e(48675),e(3462),e(85827);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.eye=s;var a=t(e(42989)),o=e(11882),i=e(30065);function s(){for(var n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];var t=r[0]in o.ARRAY_TYPES?r.shift():"float64";if(r.length<1)throw new Error("Size parameter missing.");1==r.length&&r.push(r[r.length-1]),r=Int32Array.from(r,(function(n){if(0!==n%1)throw new Error("eye(): Invalid shape [".concat(r,"]."));return n}));for(var s=new o.ARRAY_TYPES[t](r.reduce((function(n,r){return n*r}))),f=r.slice(-2),l=(0,a["default"])(f,2),u=l[0],c=l[1],h=s.length;(h-=u*c)>=0;)for(var d=Math.min(u,c);d-- >0;)s[h+c*d+d]=1;var p=new i.NDArray(r,s);return p}},30128:function(n,r,e){"use strict";e(21703),Object.defineProperty(r,"__esModule",{value:!0}),r._hessenberg_decomp=i,r.hessenberg_decomp=s;var t=e(30065),a=e(11882),o=e(30716);function i(n,r,e,t){n|=0,t|=0;for(var a=n-1;a-- >0;)r[t+n*a+a]=1;for(var i=new o.FrobeniusNorm,s=t+n*(n-1),f=n;--f>1;){var l=t+n*f,u=l+(f-1);i.reset();for(var c=f-1;c-- >0;)i.include(e[l+c]);if(0!==i.max){var h=i.resultIncl(e[u])*(e[u]>0?-1:1);i.include(e[u]-=h);for(var d=i.max,p=Math.sqrt(i.sum),v=f;v-- >0;)e[l+v]=e[l+v]/d*Math.SQRT2/p;for(var w=f;w-- >0;){for(var y=0,m=f;m-- >0;)y+=e[t+n*w+m]*e[l+m];for(var _=f;_-- >0;)e[t+n*w+_]-=e[l+_]*y}r.fill(0,s,t+n*n);for(var g=f;g-- >0;)for(var b=n;b-- >0;)r[s+b]+=e[t+n*g+b]*e[l+g];for(var A=f;A-- >0;)for(var E=n;E-- >0;)e[t+n*A+E]-=e[l+A]*r[s+E];for(var x=n-1;x-- >0;){for(var M=0,k=f;k-- >0;)M+=r[t+n*x+k]*e[l+k];for(var N=f;N-- >0;)r[t+n*x+N]-=e[l+N]*M}e.fill(0,l,u),e[u]=h}}r.fill(0,s,t+n*n-1),r[t+n*n-1]=1}function s(n){if(n=(0,t.asarray)(n),n.ndim<2)throw new Error("hessenberg_decomp(A): A must at least be 2D.");n.dtype;var r=a.ARRAY_TYPES["float32"===n.dtype?"float32":"float64"],e=n.shape,o=0|e[e.length-1];if(o!=e[e.length-2])throw new Error("hessenberg_decomp(A): A must be square.");var s=r.from(n.data);n=void 0;for(var f=new r(s.length),l=s.length;(l-=o*o)>=0;)i(o,f,s,l);return[new t.NDArray(e,f),new t.NDArray(e,s)]}},33250:function(n,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t={cholesky_decomp:!0,cholesky_solve:!0,hessenberg_decomp:!0,ldl_decomp:!0,ldl_solve:!0,norm:!0,pldlp_decomp:!0,pldlp_solve:!0,pldlp_l:!0,pldlp_d:!0,pldlp_p:!0,qr_decomp:!0,qr_decomp_full:!0,qr_lstsq:!0,rrqr_decomp:!0,rrqr_decomp_full:!0,rrqr_rank:!0,rrqr_lstsq:!0,rrqr_solve:!0,srrqr_decomp_full:!0,solve:!0,svd_dc:!0,tril:!0,triu:!0,tril_solve:!0,triu_solve:!0,urv_decomp_full:!0,urv_lstsq:!0};Object.defineProperty(r,"cholesky_decomp",{enumerable:!0,get:function(){return o.cholesky_decomp}}),Object.defineProperty(r,"cholesky_solve",{enumerable:!0,get:function(){return o.cholesky_solve}}),Object.defineProperty(r,"hessenberg_decomp",{enumerable:!0,get:function(){return u.hessenberg_decomp}}),Object.defineProperty(r,"ldl_decomp",{enumerable:!0,get:function(){return c.ldl_decomp}}),Object.defineProperty(r,"ldl_solve",{enumerable:!0,get:function(){return c.ldl_solve}}),Object.defineProperty(r,"norm",{enumerable:!0,get:function(){return v.norm}}),Object.defineProperty(r,"pldlp_decomp",{enumerable:!0,get:function(){return y.pldlp_decomp}}),Object.defineProperty(r,"pldlp_solve",{enumerable:!0,get:function(){return y.pldlp_solve}}),Object.defineProperty(r,"pldlp_l",{enumerable:!0,get:function(){return y.pldlp_l}}),Object.defineProperty(r,"pldlp_d",{enumerable:!0,get:function(){return y.pldlp_d}}),Object.defineProperty(r,"pldlp_p",{enumerable:!0,get:function(){return y.pldlp_p}}),Object.defineProperty(r,"qr_decomp",{enumerable:!0,get:function(){return m.qr_decomp}}),Object.defineProperty(r,"qr_decomp_full",{enumerable:!0,get:function(){return m.qr_decomp_full}}),Object.defineProperty(r,"qr_lstsq",{enumerable:!0,get:function(){return m.qr_lstsq}}),Object.defineProperty(r,"rrqr_decomp",{enumerable:!0,get:function(){return b.rrqr_decomp}}),Object.defineProperty(r,"rrqr_decomp_full",{enumerable:!0,get:function(){return b.rrqr_decomp_full}}),Object.defineProperty(r,"rrqr_rank",{enumerable:!0,get:function(){return b.rrqr_rank}}),Object.defineProperty(r,"rrqr_lstsq",{enumerable:!0,get:function(){return b.rrqr_lstsq}}),Object.defineProperty(r,"rrqr_solve",{enumerable:!0,get:function(){return b.rrqr_solve}}),Object.defineProperty(r,"srrqr_decomp_full",{enumerable:!0,get:function(){return A.srrqr_decomp_full}}),Object.defineProperty(r,"solve",{enumerable:!0,get:function(){return M.solve}}),Object.defineProperty(r,"svd_dc",{enumerable:!0,get:function(){return N.svd_dc}}),Object.defineProperty(r,"tril",{enumerable:!0,get:function(){return S.tril}}),Object.defineProperty(r,"triu",{enumerable:!0,get:function(){return S.triu}}),Object.defineProperty(r,"tril_solve",{enumerable:!0,get:function(){return S.tril_solve}}),Object.defineProperty(r,"triu_solve",{enumerable:!0,get:function(){return S.triu_solve}}),Object.defineProperty(r,"urv_decomp_full",{enumerable:!0,get:function(){return R.urv_decomp_full}}),Object.defineProperty(r,"urv_lstsq",{enumerable:!0,get:function(){return R.urv_lstsq}});var a=e(23608);Object.keys(a).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return a[n]}}))}));var o=e(9588),i=e(93992);Object.keys(i).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return i[n]}}))}));var s=e(7319);Object.keys(s).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return s[n]}}))}));var f=e(88429);Object.keys(f).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return f[n]}}))}));var l=e(34955);Object.keys(l).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return l[n]}}))}));var u=e(30128),c=e(88235),h=e(47617);Object.keys(h).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return h[n]}}))}));var d=e(73564);Object.keys(d).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return d[n]}}))}));var p=e(48782);Object.keys(p).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return p[n]}}))}));var v=e(30716),w=e(43592);Object.keys(w).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return w[n]}}))}));var y=e(93769),m=e(99777),_=e(32515);Object.keys(_).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return _[n]}}))}));var g=e(67548);Object.keys(g).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return g[n]}}))}));var b=e(5323),A=e(97619),E=e(56493);Object.keys(E).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return E[n]}}))}));var x=e(27871);Object.keys(x).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return x[n]}}))}));var M=e(34071),k=e(29362);Object.keys(k).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return k[n]}}))}));var N=e(48660),P=e(69305);Object.keys(P).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return P[n]}}))}));var O=e(31221);Object.keys(O).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return O[n]}}))}));var j=e(15445);Object.keys(j).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return j[n]}}))}));var S=e(14748),R=e(63119)},88235:function(n,r,e){"use strict";e(21703),e(48675),e(3462),e(85827);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r._ldl_decomp=s,r.ldl_decomp=f,r._ldl_solve=l,r.ldl_solve=u;var a=t(e(42989)),o=e(11882),i=e(30065);function s(n,r,e,t){if(!(n<=r))throw new Error("Assertion failed.");for(var a=0;a<n;a++){for(var o=0;o<a;o++)for(var i=e[t+r*a+o]*e[t+r*o+o],s=a;s<n;s++)e[t+r*s+a]-=e[t+r*s+o]*i;for(var f=a;++f<n;)e[t+r*f+a]/=e[t+r*a+a]}}function f(n){n=(0,i.asarray)(n);var r=o.ARRAY_TYPES["float32"===n.dtype?"float32":"float64"],e=n.shape,t=e.slice(-2),f=(0,a["default"])(t,2),l=f[0],u=f[1];if(n=n.data,l!==u)throw new Error("Last two dimensions must be quadratic.");for(var c=new r(n.length),h=0;h<c.length;h+=l*l){for(var d=0;d<l;d++)for(var p=0;p<=d;p++)c[h+l*d+p]=n[h+l*d+p];s(l,l,c,h)}return new i.NDArray(e,c)}function l(n,r,e,t,a,o,i){if(0!==t.length%1)throw new Error("Assertion failed.");if(0!==o.length%1)throw new Error("Assertion failed.");if(0!==a%1)throw new Error("Assertion failed.");if(0!==i%1)throw new Error("Assertion failed.");if(0!==n%1)throw new Error("Assertion failed.");if(0!==r%1)throw new Error("Assertion failed.");if(0!==e%1)throw new Error("Assertion failed.");if(t.length-a<n*r)throw new Error("Assertion failed.");if(o.length-i<n*e)throw new Error("Assertion failed.");if(!(0<n))throw new Error("Assertion failed.");if(!(0<r))throw new Error("Assertion failed.");if(!(0<e))throw new Error("Assertion failed.");if(!(n<=r))throw new Error("Assertion failed.");for(var s=1;s<n;s++)for(var f=0;f<s;f++)for(var l=0;l<e;l++)o[i+e*s+l]-=t[a+r*s+f]*o[i+e*f+l];for(var u=0;u<n;u++)for(var c=0;c<e;c++)o[i+e*u+c]/=t[a+r*u+u];for(var h=n;h-- >1;)for(var d=h;d-- >0;)for(var p=e;p-- >0;)o[i+e*d+p]-=t[a+r*h+d]*o[i+e*h+p]}function u(n,r){if(n=(0,i.asarray)(n),r=(0,i.asarray)(r),n.ndim<2)throw new Error("ldl_solve(LD,y): LD must be at least 2D.");if(r.ndim<2)throw new Error("ldl_solve(LD,y): y must be at least 2D.");var e=n.shape.slice(-2),t=(0,a["default"])(e,2),s=t[0],f=t[1],u=r.shape.slice(-2),c=(0,a["default"])(u,2),h=c[0],d=c[1];if(s!=f)throw new Error("ldl_solve(LD,y): Last two dimensions of LD must be quadratic.");if(h!=f)throw new Error("ldl_solve(LD,y): LD and y don't match.");var p=Math.max(n.ndim,r.ndim),v=Int32Array.from({length:p},(function(){return 1}));v[p-2]=h,v[p-1]=d;for(var w=0,y=[n,r];w<y.length;w++)for(var m=y[w],_=p-2,g=m.ndim-2;_-- >0&&g-- >0;)if(1===v[_])v[_]=m.shape[g];else if(v[_]!=m.shape[g]&&1!=m.shape[g])throw new Error("Shapes are not broadcast-compatible.");var b="float32"===n.dtype&&"float32"===r.dtype?"float32":"float64",A=new o.ARRAY_TYPES[b](v.reduce((function(n,r){return n*r}),1)),E=n.data,x=r.data,M=0,k=1,N=0,P=1,O=0;function j(e){if(e===p-2){k=s*s,P=s*d;for(var t=0;t<P;t++)A[O+t]=x[N+t];return l(s,s,d,E,M,A,O),M+=k,N+=P,void(O+=P)}for(var a=v[e];;a--){if(j(e+1),1==a)break;n.shape[e-p+n.ndim]>1||(M-=k),r.shape[e-p+r.ndim]>1||(N-=P)}k*=n.shape[e-p+n.ndim]||1,P*=r.shape[e-p+r.ndim]||1}return j(0),new i.NDArray(v,A)}},47617:function(n,r,e){"use strict";var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.lstsq=i;var a=t(e(42989)),o=e(29362);function i(n,r){var e=(0,o.svd_decomp)(n),t=(0,a["default"])(e,3),i=t[0],s=t[1],f=t[2];return(0,o.svd_lstsq)(i,s,f,r)}},73564:function(n,r,e){"use strict";e(48675),e(3462),e(21703),e(85827);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.lu_decomp=f,r.lu_solve=l;var a=t(e(42989)),o=e(30065),i=e(11882),s=e(14748);function f(n){n=(0,o.asarray)(n);var r=i.ARRAY_TYPES["float32"===n.dtype?"float32":"float64"].from(n.data),e=n.shape.slice(-2),t=(0,a["default"])(e,2),s=t[0],f=t[1],l=new Int32Array(r.length/f);if(s!=f)throw new Error("Last two dimensions must be quadratic.");for(var u=0,c=0;u<r.length;u+=s*s,c+=s){for(var h=0;h<s;h++)l[c+h]=h;for(var d=0;d<s;d++){for(var p=u+d*s,v=d,w=d+1;w<s;w++)Math.abs(r[u+s*w+d])>Math.abs(r[u+s*v+d])&&(v=w);if(d!=v){var y=l[c+d];l[c+d]=l[c+v],l[c+v]=y;for(var m=u+v*s,_=0;_<s;_++){var g=r[p+_];r[p+_]=r[m+_],r[m+_]=g}}for(var b=d+1;b<s;b++){var A=u+b*s,E=r[A+d]/r[p+d];r[A+d]=E;for(var x=d+1;x<s;x++)r[A+x]-=E*r[p+x]}}}return[new o.NDArray(n.shape,r),new o.NDArray(n.shape.slice(0,-1),l)]}function l(n,r,e){if(void 0==e){e=r;var t=n,f=(0,a["default"])(t,2);n=f[0],r=f[1]}if(n=(0,o.asarray)(n),n.ndim<2)throw new Error("LU must be at least 2D.");if(r=(0,o.asarray)(r),r.ndim<1)throw new Error("P must be at least 1D.");if(e=(0,o.asarray)(e),e.ndim<2)throw new Error("y must be at least 2D.");var l=n.shape.slice(-2),u=(0,a["default"])(l,2),c=u[0],h=u[1],d=e.shape.slice(-2),p=(0,a["default"])(d,2),v=p[0],w=p[1];if(h!=c)throw new Error("Last two dimensions of LU must be quadratic.");if(h!=v)throw new Error("LU and y don't match.");if(h!=r.shape.slice(-1))throw new Error("LU and P don't match.");var y=Math.max(n.ndim,r.ndim+1,e.ndim),m=Int32Array.from({length:y},(function(){return 1}));m[y-2]=v,m[y-1]=w;for(var _=0,g=[n,e];_<g.length;_++)for(var b=g[_],A=y-2,E=b.ndim-2;A-- >0&&E-- >0;)if(1===m[A])m[A]=b.shape[E];else if(m[A]!=b.shape[E]&&1!=b.shape[E])throw new Error("LU and y are not broadcast-compatible.");for(var x=y-2,M=r.ndim-1;x-- >0&&M-- >0;)if(1===m[x])m[x]=r.shape[M];else if(m[x]!=r.shape[M]&&1!=r.shape[M])throw new Error("P is not broadcast-compatible.");var k=new(i.ARRAY_TYPES[[n,r,e].every((function(n){return"float32"===n.dtype}))?"float32":"float64"])(m.reduce((function(n,r){return n*r}),1)),N=n.data,P=r.data,O=e.data,j=0,S=1,R=0,I=1,F=0,D=1,q=0;function L(t){if(t===y-2){S=c*c,I=c,D=c*w;for(var a=0;a<v;a++)for(var o=q+w*a,i=F+w*P[R+a],f=0;f<w;f++)k[o+f]=O[i+f];for(var l=0;l<v;l++)for(var u=0;u<w;u++)for(var h=0;h<l;h++)k[q+l*w+u]-=N[j+c*l+h]*k[q+h*w+u];return(0,s._triu_solve)(v,v,w,N,j,k,q),j+=S,R+=I,F+=D,void(q+=D)}for(var d=m[t];;d--){if(L(t+1),1==d)break;n.shape[t-y+n.ndim]>1||(j-=S),r.shape[t-y+r.ndim+1]>1||(R-=I),e.shape[t-y+e.ndim]>1||(F-=D)}S*=n.shape[t-y+n.ndim]||1,I*=r.shape[t-y+r.ndim+1]||1,D*=e.shape[t-y+e.ndim]||1}return L(0),new o.NDArray(m,k)}},48782:function(n,r,e){"use strict";e(21703),e(48675),e(3462),e(85827);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.matmul2=y,r.matmul=m;var a=t(e(25069)),o=t(e(9545)),i=t(e(42989)),s=e(30065),f=e(11882),l=t(e(95551)),u=o["default"].mark((function n(){var r;return o["default"].wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=function(n){return new Function("A_shape","A","B_shape","B","C_shape","C","\n      const I = A_shape[A_shape.length-2],\n            K = A_shape[A_shape.length-1],\n            J = B_shape[B_shape.length-1]; \n      let\n        a = 0, aStride = 1,\n        b = 0, bStride = 1,\n        c = 0;\n\n      const loops = new Int32Array(C_shape.length-2);\n      for( let d=0; d >= 0; )\n        if( d === C_shape.length-2 ) {\n          aStride = I*K;\n          bStride = K*J;\n          for( const cEnd = c + I*J; c < cEnd; c += J, b -= bStride ) {\n          for( const aEnd = a + K  ; a < aEnd; c -= J, a++ ) {\n          for( const bEnd = b +   J; b < bEnd; c += 1, b++ ) {\n            ".concat(n,"\n          }}}\n          b += bStride;\n          d -= 1;\n        }\n        else\n        {\n          if( loops[d]++ > 0 ) {\n            if( loops[d] > C_shape[d] ) {\n              aStride *= A_shape[ d - C_shape.length + A_shape.length ] || 1;\n              bStride *= B_shape[ d - C_shape.length + B_shape.length ] || 1;\n              loops[d--] = 0;\n              continue;\n            }\n            if( ! (A_shape[ d - C_shape.length + A_shape.length ] > 1) ) a -= aStride;\n            if( ! (B_shape[ d - C_shape.length + B_shape.length ] > 1) ) b -= bStride;\n          }\n          ++d;\n        }\n    "))},n.next=3,r("C[c] += A[a]*B[b];");case 3:return n.next=5,r("\n    C[2*c+0] += A[a] * B[2*b+0];\n    C[2*c+1] += A[a] * B[2*b+1];\n  ");case 5:return n.next=7,r("\n    C[2*c+0] += B[b] * A[2*a+0];\n    C[2*c+1] += B[b] * A[2*a+1];\n  ");case 7:return n.next=9,r("\n    C[2*c+0] += B[2*b+0] * A[2*a+0]  -  B[2*b+1] * A[2*a+1];\n    C[2*c+1] += B[2*b+0] * A[2*a+1]  +  B[2*b+1] * A[2*a+0];\n  ");case 9:return n.next=11,r("C[c] = this.add(C[c], this.mul(A[a],B[b]));").bind(l["default"]);case 11:case"end":return n.stop()}}),n)}))(),c=(0,i["default"])(u,5),h=c[0],d=c[1],p=c[2],v=c[3],w=c[4];function y(n,r){if(n=(0,s.asarray)(n),r=(0,s.asarray)(r),n.ndim<2)throw new Error("A must be at least 2D.");if(r.ndim<2)throw new Error("B must be at least 2D.");var e=n.shape.slice(-2),t=(0,i["default"])(e,2),a=t[0],o=t[1],l=r.shape[r.ndim-1];if(r.shape[r.ndim-2]!=o)throw new Error("The last dimension of A and the 2nd to last dimension of B do not match.");var u=Math.max(n.ndim,r.ndim),c=Int32Array.from({length:u},(function(){return 1}));c[u-2]=a,c[u-1]=l;for(var y=0,m=[n,r];y<m.length;y++)for(var _=m[y],g=u-2,b=_.ndim-2;g-- >0&&b-- >0;)if(1===c[g])c[g]=_.shape[b];else if(c[g]!=_.shape[b]&&1!=_.shape[b])throw new Error("Shapes are not broadcast-compatible.");var A=f.ARRAY_TYPES[(0,f.super_dtype)(n.dtype,r.dtype)],E=new A(c.reduce((function(n,r){return n*r}),1));E instanceof Array&&E.fill(0);for(var x=0,M=0,k=[n,r];M<k.length;M++){var N=k[M];switch(x*=3,N.dtype){default:x+=1;case"complex128":x+=1;case"int32":case"float32":case"float64":}}switch(x){case 0:h(n.shape,n.data,r.shape,r.data,c,E);break;case 1:d(n.shape,n.data,r.shape,r.data._array,c,E._array);break;case 3:p(n.shape,n.data._array,r.shape,r.data,c,E._array);break;case 4:v(n.shape,n.data._array,r.shape,r.data._array,c,E._array);break;default:w(n.shape,n.data,r.shape,r.data,c,E);break}return new s.NDArray(c,E)}function m(){for(var n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];if(r=r.map((function(n){return(0,s.asarray)(n)})),1==r.length)return r[0];if(2==r.length)return y.apply(void 0,(0,a["default"])(r));function t(n,r){var e=n.slice(-2),t=(0,i["default"])(e,2),a=t[0],o=t[1],s=r[r.length-1];if(r[r.length-2]!=o)throw new Error("Shape mismatch.");var f=Math.max(n.length,r.length),l=Int32Array.from({length:f},(function(){return 1}));l[f-2]=a,l[f-1]=s;for(var u=0,c=[n,r];u<c.length;u++)for(var h=c[u],d=f-2,p=h.length-2;d-- >0&&p-- >0;)if(1===l[d])l[d]=h[p];else if(l[d]!=h[p]&&1!=h[p])throw new Error("Shapes are not broadcast-compatible.");return[l.reduce((function(n,r){return n*r}),1)*o,l]}for(var o=Array.from({length:r.length},(function(){return[]})),f=0;f<r.length;f++)o[f][f]=[0,r[f].shape];for(var l=2;l<=r.length;l++)for(var u=0;u<=r.length-l;u++){for(var c=1/0,h=void 0,d=1;d<l;d++){var p=(0,i["default"])(o[u][u+d-1],2),v=p[0],w=p[1],m=(0,i["default"])(o[u+d][u+l-1],2),_=m[0],g=m[1],b=t(w,g),A=(0,i["default"])(b,2),E=A[0],x=A[1];E+=v+_,E<c&&(c=E,h=x)}if(void 0===h)throw new Error("Integer overflow (too many FLOPs).");o[u][u+l-1]=[c,h]}function M(n,e){if(n==e)return r[n];for(var a,s=1/0,f=n;f<e;f++){var l=(0,i["default"])(o[n][f],2),u=l[0],c=l[1],h=(0,i["default"])(o[f+1][e],2),d=h[0],p=h[1],v=t(c,p),w=(0,i["default"])(v,2),m=w[0];w[1];m+=u+d,m<s&&(s=m,a=f)}return y(M(n,a),M(a+1,e))}return M(0,r.length-1)}},30716:function(n,r,e){"use strict";e(21703);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.norm=c,r.FrobeniusNorm=void 0;var a=t(e(16125)),o=t(e(39885)),i=e(30065);function s(n,r){var e;if("undefined"===typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=f(n))||r&&n&&"number"===typeof n.length){e&&(n=e);var t=0,a=function(){};return{s:a,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var n=e.next();return i=n.done,n},e:function(n){s=!0,o=n},f:function(){try{i||null==e["return"]||e["return"]()}finally{if(s)throw o}}}}function f(n,r){if(n){if("string"===typeof n)return l(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?l(n,r):void 0}}function l(n,r){(null==r||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}var u=function(){function n(){(0,a["default"])(this,n),this.sum=0,this.max=0,Object.seal(this)}return(0,o["default"])(n,[{key:"reset",value:function(){this.sum=this.max=0}},{key:"include",value:function(n){if(n=Math.abs(n),0!==n){if(this.max<n){var r=this.max/n;this.sum*=r*r,this.max=n}n/=this.max,this.sum+=n*n}}},{key:"resultIncl",value:function(n){n=Math.abs(n);var r=this.sum,e=this.max;if(0!==n){if(e<n){var t=e/n;r*=t*t,e=n}n/=e,r+=n*n}return isFinite(e)?Math.sqrt(r)*e:e}},{key:"result",get:function(){var n=this.max,r=this.sum;return isFinite(n)?Math.sqrt(r)*n:n}},{key:"resultSquare",get:function(){var n=this.max,r=this.sum;return isFinite(n)?r*n*n:n}}]),n}();function c(n){var r,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fro",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;switch(n=(0,i.asarray)(n),e){case"fro":r=new u;break;default:throw new Error("norm(A,ord,axis): Unsupported ord: ".concat(e,"."))}if(null==t){var a,o=s(n.data);try{for(o.s();!(a=o.n()).done;){var f=a.value;r.include(f)}}catch(l){o.e(l)}finally{o.f()}return r.result}throw new Error("norm(A,ord,axis): axis argument not yet supported.")}r.FrobeniusNorm=u},43592:function(n,r,e){"use strict";e(21703),e(48675),e(3462),e(85827);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.permute_rows=s,r.permute_cols=f,r.unpermute_rows=l,r.unpermute_cols=u;var a=t(e(42989)),o=e(30065),i=e(11882);function s(n,r){if(n=(0,o.asarray)(n),n.ndim<2)throw new Error("permute_rows(A,P): A.ndim must be at least 2.");if(r=(0,o.asarray)(r),r.ndim<1)throw new Error("permute_rows(A,P): P.ndim must be at least 1.");if("int32"!==r.dtype)throw new Error('permute_rows(A,P): P.dtype must be "int32".');var e=Math.max(n.ndim,r.ndim+1),t=Int32Array.from({length:e},(function(){return 1})),s=n.shape.slice(-2),f=(0,a["default"])(s,2),l=f[0],u=f[1];if(l!==r.shape[r.ndim-1])throw new Error("permute_rows(A,P): A.shape[-2] and P.shape[-1] must match.");for(var c=e,h=n.ndim;c-- >0&&h-- >0;)t[c]=n.shape[h];for(var d=e-2,p=r.ndim-1;d-- >0&&p-- >0;)if(1===t[d])t[d]=r.shape[p];else if(t[d]!=r.shape[p]&&1!=r.shape[p])throw new Error("permute_rows(A,P): A and P not broadcast-compatible.");var v=new i.ARRAY_TYPES[n.dtype](t.reduce((function(n,r){return n*r}))),w=n.shape,y=n.ndim,m=r.shape,_=r.ndim;n=n.data,r=r.data;var g=0,b=-1,A=0,E=-1,x=0;function M(a){if(a===e-2){for(var o=0;o<l;o++){var i=r[A+o];if(!(i>=0))throw new Error("permute_rows(A,P): P.contains invalid indices.");if(!(i<l))throw new Error("permute_rows(A,P): P.contains invalid indices.");for(var s=0;s<u;s++)v[x+u*o+s]=n[g+u*i+s]}return g+=b=l*u,A+=E=l,void(x+=b)}for(var f=t[a];;f--){if(M(a+1),1===f)break;w[a-e+y]>1||(g-=b),m[a-e+1+_]>1||(A-=E)}b*=w[a-e+y]||1,E*=m[a-e+1+_]||1}return M(0),new o.NDArray(t,v)}function f(n,r){if(n=(0,o.asarray)(n),n.ndim<2)throw new Error("permute_cols(A,P): A.ndim must be at least 2.");if(r=(0,o.asarray)(r),r.ndim<1)throw new Error("permute_cols(A,P): P.ndim must be at least 1.");if("int32"!==r.dtype)throw new Error('permute_cols(A,P): P.dtype must be "int32".');var e=Math.max(n.ndim,r.ndim+1),t=Int32Array.from({length:e},(function(){return 1})),s=n.shape.slice(-2),f=(0,a["default"])(s,2),l=f[0],u=f[1];if(u!==r.shape[r.ndim-1])throw new Error("permute_cols(A,P): A.shape[-1] and P.shape[-1] must match.");for(var c=e,h=n.ndim;c-- >0&&h-- >0;)t[c]=n.shape[h];for(var d=e-2,p=r.ndim-1;d-- >0&&p-- >0;)if(1===t[d])t[d]=r.shape[p];else if(t[d]!=r.shape[p]&&1!=r.shape[p])throw new Error("permute_cols(A,P): A and P not broadcast-compatible.");var v=new i.ARRAY_TYPES[n.dtype](t.reduce((function(n,r){return n*r}))),w=n.shape,y=n.ndim,m=r.shape,_=r.ndim;n=n.data,r=r.data;var g=0,b=-1,A=0,E=-1,x=0;function M(a){if(a===e-2){for(var o=0;o<l;o++)for(var i=0;i<u;i++){var s=r[A+i];if(!(s>=0))throw new Error("permute_cols(A,P): P.contains invalid indices.");if(!(s<u))throw new Error("permute_cols(A,P): P.contains invalid indices.");v[x+u*o+i]=n[g+u*o+s]}return g+=b=l*u,A+=E=u,void(x+=b)}for(var f=t[a];;f--){if(M(a+1),1===f)break;w[a-e+y]>1||(g-=b),m[a-e+1+_]>1||(A-=E)}b*=w[a-e+y]||1,E*=m[a-e+1+_]||1}return M(0),new o.NDArray(t,v)}function l(n,r){if(n=(0,o.asarray)(n),n.ndim<2)throw new Error("unpermute_rows(A,P): A.ndim must be at least 2.");if(r=(0,o.asarray)(r),r.ndim<1)throw new Error("unpermute_rows(A,P): P.ndim must be at least 1.");if("int32"!==r.dtype)throw new Error('unpermute_rows(A,P): P.dtype must be "int32".');var e=Math.max(n.ndim,r.ndim+1),t=Int32Array.from({length:e},(function(){return 1})),s=n.shape.slice(-2),f=(0,a["default"])(s,2),l=f[0],u=f[1];if(l!==r.shape[r.ndim-1])throw new Error("unpermute_rows(A,P): A.shape[-2] and P.shape[-1] must match.");for(var c=e,h=n.ndim;c-- >0&&h-- >0;)t[c]=n.shape[h];for(var d=e-2,p=r.ndim-1;d-- >0&&p-- >0;)if(1===t[d])t[d]=r.shape[p];else if(t[d]!=r.shape[p]&&1!=r.shape[p])throw new Error("unpermute_rows(A,P): A and P not broadcast-compatible.");var v=new i.ARRAY_TYPES[n.dtype](t.reduce((function(n,r){return n*r}))),w=n.shape,y=n.ndim,m=r.shape,_=r.ndim;n=n.data,r=r.data;var g=0,b=-1,A=0,E=-1,x=0;function M(a){if(a===e-2){for(var o=0;o<l;o++){var i=r[A+o];if(!(i>=0))throw new Error("unpermute_rows(A,P): P.contains invalid indices.");if(!(i<l))throw new Error("unpermute_rows(A,P): P.contains invalid indices.");for(var s=0;s<u;s++)v[x+u*i+s]=n[g+u*o+s]}return g+=b=l*u,A+=E=l,void(x+=b)}for(var f=t[a];;f--){if(M(a+1),1===f)break;w[a-e+y]>1||(g-=b),m[a-e+1+_]>1||(A-=E)}b*=w[a-e+y]||1,E*=m[a-e+1+_]||1}return M(0),new o.NDArray(t,v)}function u(n,r){if(n=(0,o.asarray)(n),n.ndim<2)throw new Error("unpermute_cols(A,P): A.ndim must be at least 2.");if(r=(0,o.asarray)(r),r.ndim<1)throw new Error("unpermute_cols(A,P): P.ndim must be at least 1.");if("int32"!==r.dtype)throw new Error('unpermute_cols(A,P): P.dtype must be "int32".');var e=Math.max(n.ndim,r.ndim+1),t=Int32Array.from({length:e},(function(){return 1})),s=n.shape.slice(-2),f=(0,a["default"])(s,2),l=f[0],u=f[1];if(u!==r.shape[r.ndim-1])throw new Error("unpermute_cols(A,P): A.shape[-1] and P.shape[-1] must match.");for(var c=e,h=n.ndim;c-- >0&&h-- >0;)t[c]=n.shape[h];for(var d=e-2,p=r.ndim-1;d-- >0&&p-- >0;)if(1===t[d])t[d]=r.shape[p];else if(t[d]!=r.shape[p]&&1!=r.shape[p])throw new Error("unpermute_cols(A,P): A and P not broadcast-compatible.");var v=new i.ARRAY_TYPES[n.dtype](t.reduce((function(n,r){return n*r}))),w=n.shape,y=n.ndim,m=r.shape,_=r.ndim;n=n.data,r=r.data;var g=0,b=-1,A=0,E=-1,x=0;function M(a){if(a===e-2){for(var o=0;o<l;o++)for(var i=0;i<u;i++){var s=r[A+i];if(!(s>=0))throw new Error("unpermute_cols(A,P): P.contains invalid indices.");if(!(s<u))throw new Error("unpermute_cols(A,P): P.contains invalid indices.");v[x+u*o+s]=n[g+u*o+i]}return g+=b=l*u,A+=E=u,void(x+=b)}for(var f=t[a];;f--){if(M(a+1),1===f)break;w[a-e+y]>1||(g-=b),m[a-e+1+_]>1||(A-=E)}b*=w[a-e+y]||1,E*=m[a-e+1+_]||1}return M(0),new o.NDArray(t,v)}},93769:function(n,r,e){"use strict";e(21703),e(48675),e(3462),e(85827);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r._pldlp_decomp=u,r.pldlp_decomp=c,r.pldlp_l=h,r.pldlp_d=d,r.pldlp_p=p,r._pldlp_solve=v,r.pldlp_solve=w;var a=t(e(42989)),o=e(11882),i=e(30065),s=function(n,r,e,t,a){if(0!==n%1)throw new Error("Assertion failed.");if(0!==r%1)throw new Error("Assertion failed.");if(0!==a%1)throw new Error("Assertion failed.");if(0!==t%1)throw new Error("Assertion failed.");if(0!==e.length%1)throw new Error("Assertion failed.");if(!(0<=n))throw new Error("Assertion failed.");if(!(n<=r))throw new Error("Assertion failed.");if(!(a>=0))throw new Error("Assertion failed.");if(!(a<n))throw new Error("Assertion failed.");for(var o=e[t+r*a+a],i=a;++i<n;)for(var s=e[t+r*i+a]/o,f=a;f++<i;)e[t+r*i+f]-=s*e[t+r*f+a];for(var l=a;++l<n;)e[t+r*l+a]/=o},f=function(n,r,e,t,a){if(0!==n%1)throw new Error("Assertion failed.");if(0!==r%1)throw new Error("Assertion failed.");if(0!==a%1)throw new Error("Assertion failed.");if(0!==t%1)throw new Error("Assertion failed.");if(0!==e.length%1)throw new Error("Assertion failed.");if(!(0<=n))throw new Error("Assertion failed.");if(!(n<=r))throw new Error("Assertion failed.");if(!(a>=0))throw new Error("Assertion failed.");if(!(a<n-1))throw new Error("Assertion failed.");for(var o=e[t+r*(a+1)+a],i=e[t+r*(a+1)+(a+1)]/o,s=e[t+r*a+a]/o,f=1/(i*s-1)/o,l=a+2;l<n;l++){for(var u=f*(i*e[t+r*l+a]-e[t+r*l+a+1]),c=f*(s*e[t+r*l+a+1]-e[t+r*l+a]),h=l;h<n;h++)e[t+r*h+l]-=e[t+r*h+a]*u+e[t+r*h+a+1]*c;e[t+r*l+a]=u,e[t+r*l+a+1]=c}},l=function(n,r,e,t,a,o,i,s){if(!(i<=s))throw new Error("Assertion failed: "+JSON.stringify({k:i,l:s}));if(!(n<=r))throw new Error("Assertion failed.");var f=a[o+i];a[o+i]=a[o+s],a[o+s]=f;for(var l=0;l<i;l++){var u=e[t+r*i+l];e[t+r*i+l]=e[t+r*s+l],e[t+r*s+l]=u}for(var c=i;++c<s;){var h=e[t+r*c+i];e[t+r*c+i]=e[t+r*s+c],e[t+r*s+c]=h}var d=e[t+r*i+i];e[t+r*i+i]=e[t+r*s+s],e[t+r*s+s]=d;for(var p=s;++p<n;){var v=e[t+r*p+i];e[t+r*p+i]=e[t+r*p+s],e[t+r*p+s]=v}};function u(n,r,e,t,a,o){if(!(n<=r))throw new Error("Assertion failed.");for(var i=0;i<n;i++)a[o+i]=i;for(var u=(Math.sqrt(17)+1)/8,c=0;c<n;c++){var h=!0;if(c<n-1){for(var d=void 0,p=-1/0,v=Math.abs(e[t+r*c+c]),w=c;++w<n;){var y=Math.abs(e[t+r*w+c]);p>=y||(p=y,d=w)}if(!(0<Math.max(p,v)))throw new Error("_pldlp_decomp(M,N, LD,LD_off, P,P_off): Zero column or NaN encountered.");if(v<u*p){for(var m=void 0,_=-1/0,g=c;g<d;g++){var b=Math.abs(e[t+r*d+g]);_>=b||(_=b,m=g)}for(var A=d;++A<n;){var E=Math.abs(e[t+r*A+d]);_>=E||(_=E,m=A)}if(d===m)throw new Error("Assertion failed.");if(v<u*p*(p/_)){var x=Math.abs(e[t+r*d+d]);x<u*_&&(h=!1,a[o+d]^=-1,++c),c!==d&&l(n,r,e,t,a,o,c,d)}}}h?s(n,r,e,t,c):f(n,r,e,t,c-1)}}function c(n){n=(0,i.asarray)(n);var r=o.ARRAY_TYPES["float32"===n.dtype?"float32":"float64"],e=n.shape,t=e.slice(0,-1),s=e.slice(-2),f=(0,a["default"])(s,2),l=f[0],c=f[1];if(n=n.data,l!==c)throw new Error("Last two dimensions must be quadratic.");for(var h=new r(n.length),d=new Int32Array(n.length/l),p=0;p<h.length;p+=l*l){for(var v=0;v<l;v++)for(var w=0;w<=v;w++)h[p+l*v+w]=n[p+l*v+w];var y=p/l;u(l,l,h,p,d,y)}return[new i.NDArray(e,h),new i.NDArray(t,d)]}function h(n,r){if(null==r){var e=n,t=(0,a["default"])(e,2);n=t[0],r=t[1]}if(n=(0,i.asarray)(n),r=(0,i.asarray)(r),n.ndim<2)throw new Error("pldlp_solve(LD,P,y): LD must be at least 2D.");if(r.ndim<1)throw new Error("pldlp_solve(LD,P,y): P must be at least 1D.");var s=n.shape[n.ndim-2];if(s!==n.shape[n.ndim-1])throw new Error("pldlp_solve(LD,P,y): LD must be square.");if(s!==r.shape[r.ndim-1])throw new Error("pldlp_solve(LD,P,y): LD and P shape mismatch.");var f=Math.max(n.ndim,r.ndim+1),l=Int32Array.from({length:f},(function(){return 1}));l[f-2]=s,l[f-1]=s;for(var u=0,c=[n.shape.slice(0,-2),r.shape.slice(0,-1)];u<c.length;u++)for(var h=c[u],d=f-2,p=h.length;d-- >0&&p-- >0;)if(1===l[d])l[d]=h[p];else if(l[d]!==h[p]&&1!==h[p])throw new Error("Shapes are not broadcast-compatible.");var v=[n,r].every((function(n){return"float32"===n.dtype}))?"float32":"float64",w=o.ARRAY_TYPES[v],y=new w(l.reduce((function(n,r){return n*r}),1)),m=n.data,_=r.data,g=0,b=1,A=0,E=1,x=0;function M(e){if(e===f-2){b=s*s,E=s;for(var t=0;t<s;t++){for(var a=t-(_[A+t]<0),o=0;o<a;o++)y[x+s*t+o]=m[g+s*t+o];y[x+s*t+t]=1}return g+=b,x+=b,void(A+=E)}for(var i=l[e];;i--){if(M(e+1),1===i)break;n.shape[e-f+n.ndim]>1||(g-=b),r.shape[e-f+r.ndim+1]>1||(A-=E)}b*=n.shape[e-f+n.ndim]||1,E*=r.shape[e-f+r.ndim+1]||1}return M(0),new i.NDArray(l,y)}function d(n,r){if(null==r){var e=n,t=(0,a["default"])(e,2);n=t[0],r=t[1]}if(n=(0,i.asarray)(n),r=(0,i.asarray)(r),n.ndim<2)throw new Error("pldlp_solve(LD,P,y): LD must be at least 2D.");if(r.ndim<1)throw new Error("pldlp_solve(LD,P,y): P must be at least 1D.");var s=n.shape[n.ndim-2];if(s!==n.shape[n.ndim-1])throw new Error("pldlp_solve(LD,P,y): LD must be square.");if(s!==r.shape[r.ndim-1])throw new Error("pldlp_solve(LD,P,y): LD and P shape mismatch.");var f=Math.max(n.ndim,r.ndim+1),l=Int32Array.from({length:f},(function(){return 1}));l[f-2]=s,l[f-1]=s;for(var u=0,c=[n.shape.slice(0,-2),r.shape.slice(0,-1)];u<c.length;u++)for(var h=c[u],d=f-2,p=h.length;d-- >0&&p-- >0;)if(1===l[d])l[d]=h[p];else if(l[d]!==h[p]&&1!==h[p])throw new Error("Shapes are not broadcast-compatible.");var v=[n,r].every((function(n){return"float32"===n.dtype}))?"float32":"float64",w=o.ARRAY_TYPES[v],y=new w(l.reduce((function(n,r){return n*r}),1)),m=n.data,_=r.data,g=0,b=1,A=0,E=1,x=0;function M(e){if(e===f-2){b=s*s,E=s;for(var t=0;t<s;t++)y[x+s*t+t]=m[g+s*t+t],_[A+t]<0&&(y[x+s*t+t-1]=y[x+s*(t-1)+t]=m[g+s*t+t-1]);return g+=b,x+=b,void(A+=E)}for(var a=l[e];;a--){if(M(e+1),1===a)break;n.shape[e-f+n.ndim]>1||(g-=b),r.shape[e-f+r.ndim+1]>1||(A-=E)}b*=n.shape[e-f+n.ndim]||1,E*=r.shape[e-f+r.ndim+1]||1}return M(0),new i.NDArray(l,y)}function p(n,r){if(null==r){var e=n,t=(0,a["default"])(e,2);n=t[0],r=t[1]}if(n=(0,i.asarray)(n),r=(0,i.asarray)(r),n.ndim<2)throw new Error("pldlp_solve(LD,P,y): LD must be at least 2D.");if(r.ndim<1)throw new Error("pldlp_solve(LD,P,y): P must be at least 1D.");var o=n.shape[n.ndim-2];if(o!==n.shape[n.ndim-1])throw new Error("pldlp_solve(LD,P,y): LD must be square.");if(o!==r.shape[r.ndim-1])throw new Error("pldlp_solve(LD,P,y): LD and P shape mismatch.");for(var s=n.ndim-2,f=r.ndim-1;s-- >0&&f-- >0;)if(1!==r.shape[f]&&1!==n.shape[s]&&n.shape[s]!==r.shape[f])throw new Error("Shapes are not broadcast-compatible.");var l=r.shape;r=Int32Array.from(r.data),n=void 0;for(var u=new Uint8Array(o),c=r.length;(c-=o)>=0;){u.fill(!1);for(var h=o;h-- >0;){var d=r[c+h];if(d<0){if(!(0<h)||r[c+h-1]<0)throw new Error("pldlp_solve(LD,P,y): P is invalid.");d^=-1}if(!(d>=0))throw new Error("pldlp_solve(LD,P,y): P contains out-of-bounds indices.");if(!(d<o))throw new Error("pldlp_solve(LD,P,y): P contains out-of-bounds indices.");if(u[d])throw new Error("pldlp_solve(LD,P,y): P contains duplicate indices.");u[d]=!0,r[c+h]=d}if(u.some((function(n){return!n})))throw new Error("pldlp_solve(LD,P,y): P is invalid.")}return new i.NDArray(l,r)}function v(n,r,e,t,a,o,i,s,f,l){if(0!==t.length%1)throw new Error("Assertion failed.");if(0!==o.length%1)throw new Error("Assertion failed.");if(0!==s.length%1)throw new Error("Assertion failed.");if(0!==l.length%1)throw new Error("Assertion failed.");if(0!==a%1)throw new Error("Assertion failed.");if(0!==i%1)throw new Error("Assertion failed.");if(0!==f%1)throw new Error("Assertion failed.");if(0!==n%1)throw new Error("Assertion failed.");if(0!==r%1)throw new Error("Assertion failed.");if(0!==e%1)throw new Error("Assertion failed.");if(t.length-a<n*r)throw new Error("Assertion failed.");if(o.length-i<n)throw new Error("Assertion failed.");if(s.length-f<n*e)throw new Error("Assertion failed.");if(l.length<n*e)throw new Error("Assertion failed.");if(!(0<n))throw new Error("Assertion failed.");if(!(0<r))throw new Error("Assertion failed.");if(!(0<e))throw new Error("Assertion failed.");if(!(n<=r))throw new Error("Assertion failed.");for(var u=0;u<n;u++){var c=o[i+u];c^=-(c<0);for(var h=0;h<e;h++)l[e*u+h]=s[f+e*c+h]}for(var d=1;d<n;d++)for(var p=d-(o[i+d]<0),v=0;v<p;v++)for(var w=0;w<e;w++)l[e*d+w]-=t[a+r*d+v]*l[e*v+w];for(var y=0;y<n;y++)if(y<n-1&&o[i+y+1]<0){for(var m=t[a+r*(y+1)+y],_=t[a+r*(y+1)+y+1]/m,g=t[a+r*y+y]/m,b=1/(_*g-1)/m,A=0;A<e;A++){var E=l[e*y+A],x=l[e*(y+1)+A];l[e*y+A]=b*(_*E-x),l[e*(y+1)+A]=b*(g*x-E)}++y}else for(var M=0;M<e;M++)l[e*y+M]/=t[a+r*y+y];for(var k=n;k-- >1;)for(var N=k-(o[i+k]<0),P=N;P-- >0;)for(var O=e;O-- >0;)l[e*P+O]-=t[a+r*k+P]*l[e*k+O];for(var j=0;j<n;j++){var S=o[i+j];S^=-(S<0);for(var R=0;R<e;R++)s[f+e*S+R]=l[e*j+R]}}function w(n,r,e){if(null==e){if(null==r)throw new Error("Assertion failed.");e=r;var t=n,s=(0,a["default"])(t,2);n=s[0],r=s[1]}if(n=(0,i.asarray)(n),r=(0,i.asarray)(r),e=(0,i.asarray)(e),n.ndim<2)throw new Error("pldlp_solve(LD,P,y): LD must be at least 2D.");if(r.ndim<1)throw new Error("pldlp_solve(LD,P,y): P must be at least 1D.");if(e.ndim<2)throw new Error("pldlp_solve(LD,P,y): y must be at least 2D.");var f=n.shape[n.ndim-2],l=e.shape[e.ndim-1];if(f!==n.shape[n.ndim-1])throw new Error("pldlp_solve(LD,P,y): LD must be square.");if(f!==r.shape[r.ndim-1])throw new Error("pldlp_solve(LD,P,y): LD and P shape mismatch.");if(f!==e.shape[e.ndim-2])throw new Error("pldlp_solve(LD,P,y): LD and y shape mismatch.");var u=Math.max(n.ndim,r.ndim+1,e.ndim),c=Int32Array.from({length:u},(function(){return 1}));c[u-2]=f,c[u-1]=l;for(var h=0,d=[n.shape.slice(0,-2),r.shape.slice(0,-1),e.shape.slice(0,-2)];h<d.length;h++)for(var p=d[h],w=u-2,y=p.length;w-- >0&&y-- >0;)if(1===c[w])c[w]=p[y];else if(c[w]!==p[y]&&1!==p[y])throw new Error("Shapes are not broadcast-compatible.");var m=[n,r,e].every((function(n){return"float32"===n.dtype}))?"float32":"float64",_=o.ARRAY_TYPES[m],g=new _(f*l),b=new _(c.reduce((function(n,r){return n*r}),1)),A=n.data,E=r.data,x=e.data,M=0,k=1,N=0,P=1,O=0,j=1,S=0;function R(t){if(t===u-2){k=f*f,P=f,j=f*l;for(var a=0;a<j;a++)b[S+a]=x[O+a];return v(f,f,l,A,M,E,N,b,S,g),M+=k,N+=P,O+=j,void(S+=j)}for(var o=c[t];;o--){if(R(t+1),1===o)break;n.shape[t-u+n.ndim]>1||(M-=k),r.shape[t-u+r.ndim+1]>1||(N-=P),e.shape[t-u+e.ndim]>1||(O-=j)}k*=n.shape[t-u+n.ndim]||1,P*=r.shape[t-u+r.ndim+1]||1,j*=e.shape[t-u+e.ndim]||1}return R(0),new i.NDArray(c,b)}},99777:function(n,r,e){"use strict";e(21703),e(48675),e(3462),e(85827);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.qr_decomp_full=u,r.qr_decomp=c,r._qr_decomp_inplace=h,r.qr_lstsq=d;var a=t(e(42989)),o=e(30065),i=e(11882),s=e(52894),f=e(13511),l=e(14748);function u(n){if(n=(0,o.asarray)(n),n.ndim<2)throw new Error("A must be at least 2D.");var r="float32"===n.dtype?"float32":"float64",e=i.ARRAY_TYPES[r],t="float32"===r?16:8,l=n.shape,u=Int32Array.from(l),c=l.slice(-2),h=(0,a["default"])(c,2),d=h[0],p=h[1],v=e.from(n.data);n=void 0,u[u.length-1]=d;for(var w=new e(v.length/p*d),y=0,m=0;y<w.length;y+=d*d,m+=d*p){for(var _=0;_<d;_++)w[y+d*_+_]=1;for(var g=0;g<p;g+=t)for(var b=g;b<d;b+=t)for(var A=b;A<b+t&&A<d;A++)for(var E=g;E<g+t&&E<p&&E<A;E++){var x=m+p*A+E,M=v[x];if(0!==M){var k=m+p*E+E,N=v[k],P=(0,s._giv_rot_qr)(N,M),O=(0,a["default"])(P,3),j=O[0],S=O[1],R=O[2];v[x]=0,0!==S&&(v[k]=R,(0,s._giv_rot_rows)(v,p-1-E,k+1,x+1,j,S),(0,s._giv_rot_rows)(w,1+A,y+d*E,y+d*A,j,S))}}(0,f._transpose_inplace)(d,w,y)}return[new o.NDArray(u,w),new o.NDArray(l,v)]}function c(n){if(n=(0,o.asarray)(n),n.ndim<2)throw new Error("qr_decomp(A): A.ndim must be at least 2.");var r=i.ARRAY_TYPES["float32"===n.dtype?"float32":"float64"],e=n.shape,t=Int32Array.from(e),f=e.slice(-2),l=(0,a["default"])(f,2),c=l[0],h=l[1];if(t[t.length-2]=h,c<=h)return u(n);var d=r.from(n.data);n=void 0;for(var p=new r(d.length/c*h),v=0,w=0;w<d.length;w+=c*h,v+=h*h){for(var y=1;y<c;y++)for(var m=Math.min(y,h),_=0;_<m;_++){var g=w+h*y+_,b=d[g];if(0!==b){var A=w+h*_+_,E=d[A],x=(0,s._giv_rot_qr)(E,b),M=(0,a["default"])(x,3),k=M[0],N=M[1],P=M[2];0!==N&&(k<0&&(k*=-1,N*=-1,P*=-1),(0,s._giv_rot_rows)(d,h-1-_,A+1,g+1,k,N),d[A]=P),d[g]=N}}for(var O=0;O<h;O++)for(var j=O;j<h;j++)p[v+h*O+j]=d[w+h*O+j],d[w+h*O+j]=+(O===j);for(var S=c;--S>0;)for(var R=Math.min(S,h),I=R;I-- >0;){var F=d[w+h*S+I];if(0!==F){d[w+h*S+I]=0;var D=Math.sqrt((1-F)*(1+F));(0,s._giv_rot_rows)(d,h-I,w+h*S+I,w+h*I+I,D,F)}}}return[new o.NDArray(e,d),new o.NDArray(t,p)]}function h(n,r,e,t,o,i,f){if(n%1!==0)throw new Error("Assertion failed.");if(r%1!==0)throw new Error("Assertion failed.");if(e%1!==0)throw new Error("Assertion failed.");if(o%1!==0)throw new Error("Assertion failed.");if(f%1!==0)throw new Error("Assertion failed.");if(t.length%1!==0)throw new Error("Assertion failed.");if(i.length%1!==0)throw new Error("Assertion failed.");if(!(0<=n))throw new Error("Assertion failed.");if(!(0<=r))throw new Error("Assertion failed.");if(!(0<=e))throw new Error("Assertion failed.");if(!(0<=o))throw new Error("Assertion failed.");if(!(0<=f))throw new Error("Assertion failed.");if(!(0<=t.length))throw new Error("Assertion failed.");if(!(0<=i.length))throw new Error("Assertion failed.");if(!(n*r<=t.length-o))throw new Error("Assertion failed.");if(!(n*e<=i.length-f))throw new Error("Assertion failed.");for(var l=1;l<n;l++)for(var u=0;u<r&&u<l;u++){var c=o+r*l+u,h=t[c];if(0!==h){var d=o+r*u+u,p=t[d],v=(0,s._giv_rot_qr)(p,h),w=(0,a["default"])(v,3),y=w[0],m=w[1],_=w[2];t[c]=0,0!==m&&(t[d]=_,(0,s._giv_rot_rows)(t,r-1-u,d+1,c+1,y,m),(0,s._giv_rot_rows)(i,e,f+e*u,f+e*l,y,m))}}}function d(n,r,e){if(void 0==e){e=r;var t=n,s=(0,a["default"])(t,2);n=s[0],r=s[1]}if(n=(0,o.asarray)(n),n.ndim<2)throw new Error("qr_lstsq(Q,R,y): Q.ndim must be at least 2.");if(r=(0,o.asarray)(r),r.ndim<2)throw new Error("qr_lstsq(Q,R,y): R.ndim must be at least 2.");if(e=(0,o.asarray)(e),e.ndim<2)throw new Error("qr_lstsq(Q,R,y): y.ndim must be at least 2.");var f=n.shape.slice(-2),u=(0,a["default"])(f,2),c=u[0],h=u[1],d=r.shape.slice(-1),p=(0,a["default"])(d,1),v=p[0],w=e.shape.slice(-1),y=(0,a["default"])(w,1),m=y[0],_=Math.min(h,v);if(c!=e.shape[e.ndim-2])throw new Error("qr_lstsq(Q,R,y): Q and y don't match.");if(h!=r.shape[r.ndim-2])throw new Error("qr_lstsq(Q,R,y): Q and R don't match.");if(v>c)throw new Error("qr_lstsq(Q,R,y): Under-determined systems not supported. Use rrqr instead.");var g=Math.max(n.ndim,r.ndim,e.ndim),b=Int32Array.from({length:g},(function(){return 1}));b[g-2]=v,b[g-1]=m;for(var A=0,E=[n,r,e];A<E.length;A++)for(var x=E[A],M=g-2,k=x.ndim-2;M-- >0&&k-- >0;)if(1===b[M])b[M]=x.shape[k];else if(b[M]!=x.shape[k]&&1!=x.shape[k])throw new Error("Q, R, y are not broadcast-compatible.");var N=i.ARRAY_TYPES[[n,r,e].every((function(n){return"float32"===n.dtype}))?"float32":"float64"],P=new N(b.reduce((function(n,r){return n*r}),1)),O=n.data,j=r.data,S=e.data,R=0,I=1,F=0,D=1,q=0,L=1,T=0;function Y(t){if(t===g-2){I=c*h,D=h*v,L=c*m;for(var a=0;a<_;a++)for(var o=0;o<m;o++)for(var i=0;i<c;i++)P[T+a*m+o]+=O[R+i*h+a]*S[q+i*m+o];return(0,l._triu_solve)(_,v,m,j,F,P,T),R+=I,F+=D,q+=L,void(T+=v*m)}for(var s=b[t];;s--){if(Y(t+1),1==s)break;n.shape[t-g+n.ndim]>1||(R-=I),r.shape[t-g+r.ndim]>1||(F-=D),e.shape[t-g+e.ndim]>1||(q-=L)}I*=n.shape[t-g+n.ndim]||1,D*=r.shape[t-g+r.ndim]||1,L*=e.shape[t-g+e.ndim]||1}return Y(0),new o.NDArray(b,P)}},32515:function(n,r,e){"use strict";e(21703),e(48675),e(3462),e(85827);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.rand_ortho=u;var a=t(e(42989)),o=e(11882),i=e(30065),s=e(48265),f=e(30716),l=!0;function u(n){for(var r=arguments.length,e=new Array(r>1?r-1:0),t=1;t<r;t++)e[t-1]=arguments[t];if(l&&(l=!1,console.warn(new Error("nd.la.rand_ortho is deprecated, use nd.rand.AleaRNG instead."))),n in o.ARRAY_TYPES||(e.unshift(n),n="float64"),!n.startsWith("float"))throw new Error("Unsupported dtype: '".concat(n,"'."));1===e.length&&e.push(e[0]);for(var u=e.length;u-- >0;)if(e[u]%1!==0||e[u]<1)throw new Error("shape[".concat(u,"] = ").concat(e[u]," not a positive integer."));e=Int32Array.from(e);for(var c=e.slice(-2),h=(0,a["default"])(c,2),d=h[0],p=h[1],v=Math.max(d,p),w=o.ARRAY_TYPES[n],y=new w(e.reduce((function(n,r){return n*r}))),m=new w(v*v),_=new w(v),g=new w(v),b=new f.FrobeniusNorm,A=0;A<y.length;A+=d*p){for(var E=0;E<v;E++)for(var x=0;x<v;x++)m[v*E+x]=1*(E===x);g[0]=Math.random()<=.5?-1:1;for(var M=v;M-- >1;){b.reset();for(var k=0;;k++){var N=_[k]=(0,s.rand_normal)();if(k>=M)break;b.include(N)}g[M]=_[M]>0?-1:1;var P=b.resultIncl(_[M])*g[M];if(0!==P){b.include(_[M]-=P);for(var O=b.max,j=Math.sqrt(b.sum),S=M;S>=0;S--)_[S]=_[S]/O/j;for(var R=v;R-- >0;){for(var I=0,F=M;F>=0;F--)I+=m[v*R+F]*_[F];I*=2;for(var D=M;D>=0;D--)m[v*R+D]-=_[D]*I}}}for(var q=0;q<v;q++)for(var L=0;L<v;L++)m[v*q+L]*=g[q];for(var T=0;T<d;T++)for(var Y=0;Y<p;Y++)y[A+p*T+Y]=m[v*T+Y]}return new i.NDArray(e,y)}},67548:function(n,r,e){"use strict";var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.rank=i;var a=t(e(42989)),o=e(29362);function i(n){var r=(0,o.svd_decomp)(n),e=(0,a["default"])(r,3),t=(e[0],e[1]);e[2];return(0,o.svd_rank)(t)}},5323:function(n,r,e){"use strict";e(21703),e(48675),e(3462),e(85827);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r._norm_update=h,r._norm=d,r._rrqr_rank=p,r.rrqr_decomp_full=v,r._rrqr_decomp_inplace=w,r.rrqr_decomp=y,r.rrqr_rank=m,r.rrqr_solve=_,r.rrqr_lstsq=g;var a=t(e(42989)),o=e(27871),i=e(30065),s=e(11882),f=e(30716),l=e(52894),u=e(13511),c=e(14748);function h(n,r,e,t){for(e|=0,t<<=1;t<n.length;t=t+2|0){var a=Math.abs(r[e+(t>>>1)]);if(0!==a){if(n[t]<a){var o=n[t]/a;n[t+1]*=o*o,n[t]=a}a/=n[t],n[t+1]+=a*a}}}function d(n,r){r<<=1;var e=n[r];return isFinite(e)?Math.sqrt(n[r+1])*e:e}function p(n,r,e,t,a){var o=Math.min(n,r);if(!(a.length>=o))throw new Error("Assertion failed.");for(var i=new f.FrobeniusNorm,l=o;l-- >0;){for(var u=r;u-- >l;)i.include(e[t+r*l+u]);if(a[l]=i.result,!isFinite(a[l]))throw new Error("Infinity or NaN encountered during rank estimation.")}var c=a instanceof Float32Array?"float32":"float64",h=2*(0,s.eps)(c)*Math.max(n,r)*a[0],d=o;while(d>0&&a[d-1]<=h)--d;return d}function v(n){if(n=(0,i.asarray)(n),n.ndim<2)throw new Error("A must be at least 2D.");var r=s.ARRAY_TYPES["float32"===n.dtype?"float32":"float64"],e=n.shape,t=Int32Array.from(e),o=t.slice(0,-1),f=e.slice(-2),c=(0,a["default"])(f,2),p=c[0],v=c[1],w=Math.min(p,v);t[t.length-1]=p,o[o.length-1]=v;var y=r.from(n.data);n=void 0;for(var m=new Int32Array(y.length/p),_=new r(y.length/v*p),g=new r(v<<1),b=0,A=0,E=0;b<_.length;b+=p*p,A+=p*v,E+=v){for(var x=0;x<v;x++)m[E+x]=x;for(var M=0;M<p;M++)_[b+p*M+M]=1;for(var k=0;k<p;k++)h(g,y,A+v*k,0);for(var N=0;N<w;N++){for(var P=-1,O=-1/0,j=N;j<v;j++){var S=d(g,j);O<S&&(P=j,O=S)}if(P!==N){for(var R=0;R<p;R++){var I=A+v*R+N,F=A+v*R+P,D=y[I];y[I]=y[F],y[F]=D}var q=m[E+N];m[E+N]=m[E+P],m[E+P]=q}if(g.fill(0,N<<1),0===O)break;for(var L=A+v*N+N,T=N;++T<p;){var Y=A+v*T+N,G=y[Y];if(0!==G){var U=y[L],B=(0,l._giv_rot_qr)(U,G),J=(0,a["default"])(B,3),z=J[0],C=J[1],X=J[2];y[Y]=0,0!==C&&(y[L]=X,(0,l._giv_rot_rows)(y,v-1-N,L+1,Y+1,z,C),(0,l._giv_rot_rows)(_,1+T,b+p*N,b+p*T,z,C))}h(g,y,A+v*T,N+1)}y[L]=(y[L]<0||Object.is(-0,y[L])?-1:1)*O}(0,u._transpose_inplace)(p,_,b)}return[new i.NDArray(t,_),new i.NDArray(e,y),new i.NDArray(o,m)]}function w(n,r,e,t,o,i,s,f,u,c){if(0!==n%1)throw new Error("Assertion failed.");if(0!==r%1)throw new Error("Assertion failed.");if(0!==e%1)throw new Error("Assertion failed.");if(0!==o%1)throw new Error("Assertion failed.");if(0!==s%1)throw new Error("Assertion failed.");if(0!==u%1)throw new Error("Assertion failed.");if(!(0<n))throw new Error("Assertion failed.");if(!(0<r))throw new Error("Assertion failed.");if(!(0<e))throw new Error("Assertion failed.");if(!(0<=o))throw new Error("Assertion failed.");if(!(0<=s))throw new Error("Assertion failed.");if(!(0<=u))throw new Error("Assertion failed.");if(!(n*r<=t.length-o))throw new Error("Assertion failed.");if(!(n*e<=i.length-s))throw new Error("Assertion failed.");if(!(r<=f.length-u))throw new Error("Assertion failed.");if(n|=0,r|=0,e|=0,o|=0,s|=0,u|=0,c.length!==r<<1)throw new Error("Assertion failed.");c.fill(0,0,r<<1);for(var p=0;p<n;p++)h(c,t,o+r*p,0);for(var v=Math.min(n,r),w=0;w<v;w++){for(var y=-1,m=-1/0,_=w;_<r;_++){var g=d(c,_);m<g&&(y=_,m=g)}if(y!==w){for(var b=0;b<n;b++){var A=o+r*b+w,E=o+r*b+y,x=t[A];t[A]=t[E],t[E]=x}var M=f[u+w];f[u+w]=f[u+y],f[u+y]=M}if(c.fill(0,w<<1),0===m)break;for(var k=o+r*w+w,N=w;++N<n;){var P=o+r*N+w,O=t[P];if(0!==O){var j=t[k],S=(0,l._giv_rot_qr)(j,O),R=(0,a["default"])(S,3),I=R[0],F=R[1],D=R[2];t[P]=0,0!==F&&(t[k]=D,(0,l._giv_rot_rows)(t,r-1-w,k+1,P+1,I,F),(0,l._giv_rot_rows)(i,e,s+e*w,s+e*N,I,F))}h(c,t,o+r*N,w+1)}t[k]=(t[k]<0||Object.is(-0,t[k])?-1:1)*m}}function y(n){if(n=(0,i.asarray)(n),n.ndim<2)throw new Error("A must be at least 2D.");var r=s.ARRAY_TYPES["float32"===n.dtype?"float32":"float64"],e=n.shape,t=Int32Array.from(e),o=e.slice(0,-1),f=e.slice(-2),u=(0,a["default"])(f,2),c=u[0],p=u[1];if(t[t.length-2]=p,o[o.length-1]=p,c<=p)return v(n);var w=r.from(n.data);n=void 0;for(var y=new Int32Array(w.length/c),m=new r(w.length/c*p),_=new r(p<<1),g=0,b=0,A=0;g<w.length;g+=c*p,b+=p*p,A+=p){for(var E=0;E<p;E++)y[A+E]=E;for(var x=0;x<c;x++)h(_,w,g+p*x,0);for(var M=0;M<p;M++){for(var k=-1,N=-1/0,P=M;P<p;P++){var O=d(_,P);N<O&&(k=P,N=O)}if(k!==M){for(var j=0;j<c;j++){var S=g+p*j+M,R=g+p*j+k,I=w[S];w[S]=w[R],w[R]=I}var F=y[A+M];y[A+M]=y[A+k],y[A+k]=F}if(_.fill(0,M<<1),0===N)break;for(var D=g+p*M+M,q=M;++q<c;){var L=g+p*q+M,T=w[L];if(0!==T){var Y=w[D],G=(0,l._giv_rot_qr)(Y,T),U=(0,a["default"])(G,3),B=U[0],J=U[1],z=U[2];0!==J&&(B<0&&(B*=-1,J*=-1,z*=-1),(0,l._giv_rot_rows)(w,p-1-M,D+1,L+1,B,J),w[D]=z),w[L]=J}h(_,w,g+p*q,M+1)}w[D]=(w[D]<0||Object.is(w[D],-0)?-1:1)*N}for(var C=0;C<p;C++)for(var X=m[b+p*C+C],V=X<0||Object.is(X,-0)?-1:1,Q=C;Q<p;Q++)m[b+p*C+Q]=w[g+p*C+Q]*V,w[g+p*C+Q]=V*(C===Q);for(var W=p;W-- >0;)for(var H=c;--H>W;){var K=w[g+p*H+W];if(0!==K){w[g+p*H+W]=0;var $=Math.sqrt((1-K)*(1+K));(0,l._giv_rot_rows)(w,p-W,g+p*H+W,g+p*W+W,$,K)}}}return[new i.NDArray(e,w),new i.NDArray(t,m),new i.NDArray(o,y)]}function m(n){n=(0,i.asarray)(n);var r=n.shape.slice(-2),e=(0,a["default"])(r,2),t=e[0],o=e[1],f=n.shape.slice(0,-2);n=n.data;for(var l=new s.ARRAY_TYPES["int32"](n.length/t/o),u=new s.ARRAY_TYPES["float32"===n.dtype?"float32":"float64"](Math.min(t,o)),c=0,h=0;c<l.length;c++,h+=t*o)l[c]=p(t,o,n,h,u);return new i.NDArray(f,l)}function _(n,r,e,t){if(void 0==t){if(void 0!=e)throw new Error("rrqr_lstsq(Q,R,P, y): Either 2 ([Q,R,P], y) or 4 arguments (Q,R,P, y) expected.");t=r;var f=n,l=(0,a["default"])(f,3);n=l[0],r=l[1],e=l[2]}n=(0,i.asarray)(n),r=(0,i.asarray)(r);var u=n.shape[n.ndim-2];if(u!==r.shape[r.ndim-1])throw new Error("rrqr_solve(Q,R,P, y): Q @ R not square.");for(var c=g(n,r,e,t),h=new s.ARRAY_TYPES["float32"===r.dtype?"float32":"float64"](u),d=0;d<r.data.length;d+=u*u){var v=p(u,u,r.data,d,h);if(v<u)throw new o.SingularMatrixSolveError(c)}return c}function g(n,r,e,t){if(void 0==t){if(void 0!=e)throw new Error("rrqr_lstsq(Q,R,P, y): Either 2 ([Q,R,P], y) or 4 arguments (Q,R,P, y) expected.");t=r;var o=n,f=(0,a["default"])(o,3);n=f[0],r=f[1],e=f[2]}if(n=(0,i.asarray)(n),n.ndim<2)throw new Error("rrqr_lstsq(Q,R,P, y): Q.ndim must be at least 2.");if(r=(0,i.asarray)(r),r.ndim<2)throw new Error("rrqr_lstsq(Q,R,P, y): R.ndim must be at least 2.");if(e=(0,i.asarray)(e),e.ndim<1)throw new Error("rrqr_lstsq(Q,R,P, y): P.ndim must be at least 1.");if(t=(0,i.asarray)(t),t.ndim<2)throw new Error("rrqr_lstsq(Q,R,P, y): y.ndim must be at least 2.");if("int32"!==e.dtype)throw new Error('rrqr_lstsq(Q,R,P, y): P.dtype must be "int32".');var l=n.shape.slice(-2),u=(0,a["default"])(l,2),h=u[0],d=u[1],v=r.shape.slice(-1),w=(0,a["default"])(v,1),y=w[0],m=t.shape.slice(-1),_=(0,a["default"])(m,1),g=_[0];if(h!=t.shape[t.ndim-2])throw new Error("rrqr_lstsq(Q,R,P,y): Q and y don't match.");if(d!=r.shape[r.ndim-2])throw new Error("rrqr_lstsq(Q,R,P,y): Q and R don't match.");if(y!=e.shape[e.ndim-1])throw new Error("rrqr_lstsq(Q,R,P,y): R and P don't match.");var b=Math.max(n.ndim,r.ndim,e.ndim+1,t.ndim),A=Int32Array.from({length:b},(function(){return 1}));A[b-2]=y,A[b-1]=g;for(var E=0,x=[n,r,t];E<x.length;E++)for(var M=x[E],k=b-2,N=M.ndim-2;k-- >0&&N-- >0;)if(1===A[k])A[k]=M.shape[N];else if(A[k]!=M.shape[N]&&1!=M.shape[N])throw new Error("rrqr_lstsq(Q,R,P,y): Q,R,P,y not broadcast-compatible.");for(var P=b-2,O=e.ndim-1;P-- >0&&O-- >0;)if(1===A[P])A[P]=e.shape[O];else if(A[P]!=e.shape[O]&&1!=e.shape[O])throw new Error("rrqr_lstsq(Q,R,P,y): Q,R,P,y not broadcast-compatible.");var j=s.ARRAY_TYPES[[n,r,t].every((function(n){return"float32"===n.dtype}))?"float32":"float64"],S=new j(Math.min(d,y)),R=new Int32Array(y),I=new j(A.reduce((function(n,r){return n*r}),1)),F=n.data,D=r.data,q=e.data,L=t.data,T=0,Y=1,G=0,U=1,B=0,J=1,z=0,C=1,X=0;function V(a){if(a===b-2){Y=h*d,U=d*y,J=y,C=h*g;for(var o=p(d,y,D,G,S),i=0;i<h;i++)for(var s=0;s<o;s++)for(var f=0;f<g;f++)I[X+s*g+f]+=F[T+i*d+s]*L[z+i*g+f];(0,c._triu_solve)(o,y,g,D,G,I,X);for(var l=y;l-- >0;)R[l]=q[B+l];for(var u=y;u-- >0;){var v=void 0;while((v=R[u])!==u){if(R[v]===v)throw new Error("rrqr_lstsq(Q,R,P,y): Invalid indices in P.");R[u]=R[v],R[v]=v;for(var w=g;w-- >0;){var m=I[X+g*u+w];I[X+g*u+w]=I[X+g*v+w],I[X+g*v+w]=m}}}return T+=Y,G+=U,B+=J,z+=C,void(X+=y*g)}for(var _=A[a];;_--){if(V(a+1),1==_)break;n.shape[a-b+n.ndim]>1||(T-=Y),r.shape[a-b+r.ndim]>1||(G-=U),e.shape[a-b+1+e.ndim]>1||(B-=J),t.shape[a-b+t.ndim]>1||(z-=C)}Y*=n.shape[a-b+n.ndim]||1,U*=r.shape[a-b+r.ndim]||1,J*=e.shape[a-b+1+e.ndim]||1,C*=t.shape[a-b+t.ndim]||1}return V(0),new i.NDArray(A,I)}},56493:function(n,r,e){"use strict";e(21703),e(25438);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.schur_eigenvals=d,r.schur_eigen=p,r.schur_decomp=v;var a=t(e(42989)),o=e(11882),i=e(20162),s=e(95551),f=e(30065),l=e(66022),u=e(52894),c=e(30128),h=e(48782);function d(n){n=(0,f.asarray)(n);var r=n.shape.slice(-1),e=(0,a["default"])(r,1),t=e[0],i=n.shape.slice(0,-1),l=new o.ARRAY_TYPES["complex128"](n.data.length/t);if(n.shape[n.ndim-2]!=t)throw new Error("T is not square.");n=n.data;for(var u=0,c=function(r,e){return n[u+t*r+e]},h=0;u<n.length;u+=t*t,h+=t)for(var d=t-1;d>=0;d--){var p=d-1;if(0===d||0==c(d,p))l[h+d]=c(d,d);else{var v=c(p,p),w=c(p,d),y=c(d,p),m=c(d,d),_=s.math.sub(v,m),g=s.math.add(v,m),b=s.math.add(s.math.mul(_,_),s.math.mul(s.math.mul(4,w),y));if(b>=0)throw new Error("schur_eigenvals(T): T must not contain real eigenvalued 2x2 blocks.");var A=s.math.mul(.5,s.math.sqrt(b)),E=s.math.mul(.5,g);l[h+p]=s.math.add(E,A),l[h+d]=s.math.sub(E,A),d--}}return new f.NDArray(i,l)}function p(n,r){if(n=(0,f.asarray)(n),r=(0,f.asarray)(r),n.ndim!=r.ndim)throw new Error("Q.ndim != T.ndim.");for(var e=r.ndim;e-- >0;)if(n.shape[e]!=r.shape[e])throw new Error("Q.shape != T.shape.");var t=r.shape.slice(-1),l=(0,a["default"])(t,1),u=l[0],c=r.shape,d=c.slice(0,-1);if(r.shape[r.ndim-2]!=u)throw new Error("Q is not square.");var p=o.ARRAY_TYPES["complex128"],v=p.from(r.data);r=void 0;var w=new p(v.length/u),y=v._array,m=(w._array,new p(u)),_=m._array,g=new p(u),b=g._array,A=m._array.subarray(0,u),E=g._array.subarray(u),x=new i.MutableComplex(NaN,NaN),M=new i.MutableComplex(NaN,NaN),k=new i.MutableComplex(NaN,NaN),N=NaN;function P(n,r,e){for(var t=Math.min(u,e+2),a=r._array,o=e;o-- >0;){for(var i=t;--i>o;){var s=a[2*i+0],f=y[2*(O+u*o+i)+0],l=a[2*i+1],c=y[2*(O+u*o+i)+1];a[2*o+0]-=s*f-l*c,a[2*o+1]-=s*c+l*f}if(0==o||0==j(o,o-1)){var h=y[2*(O+u*o+o)+0]-n.re,d=y[2*(O+u*o+o)+1]-n.im;M.re=a[2*o+0],M.im=a[2*o+1],Math.hypot(h,d)<=N?M.abs()<=N?(a[2*o+0]=0,a[2*o+1]=0):(a[2*o]=1,a.fill(0,2*o+1,2*t)):(M["/="](h,d),a[2*o+0]=M.re,a[2*o+1]=M.im)}else{for(var p=o-1,v=t;--v>o;){var w=a[2*v+0],m=y[2*(O+u*p+v)+0],_=a[2*v+1],g=y[2*(O+u*p+v)+1];a[2*p+0]-=w*m-_*g,a[2*p+1]-=w*g+_*m}var b=y[2*(O+u*p+p)+0]-n.re,A=y[2*(O+u*p+p)+1]-n.im,E=y[2*(O+u*o+o)+0]-n.re,P=y[2*(O+u*o+o)+1]-n.im,S=y[2*(O+u*p+o)+0],R=y[2*(O+u*p+o)+1],I=y[2*(O+u*o+p)+0],F=y[2*(O+u*o+p)+1];if(k["= c0*c1"](b,A,E,P),k["-= c0*c1"](S,R,I,F),0===k.re&&0===k.im)throw new Error("Assertion failed.");M["= c0*c1"](b,A,a[2*o+0],a[2*o+1]),M["-= c0*c1"](I,F,a[2*p+0],a[2*p+1]),M["/="](k.re,k.im),x["= c0*c1"](E,P,a[2*p+0],a[2*p+1]),x["-= c0*c1"](S,R,a[2*o+0],a[2*o+1]),x["/="](k.re,k.im),a[2*p+0]=x.re,a[2*p+1]=x.im,a[2*o+0]=M.re,a[2*o+1]=M.im,o--}}}for(var O=0,j=function(n,r){return v[O+u*n+r]},S=0;O<v.length;O+=u*u,S+=u){if(N=Math.sqrt(Number.EPSILON)*function(){for(var n=0,r=0,e=O+u*u,t=O;t<e;t++){var a=s.math.abs(v[t]);0!=a&&(a>r&&(n*=Math.pow(r/a,2),r=a),n+=Math.pow(a/r,2))}return Math.sqrt(n)*r}(),!(N>=0))throw new Error("Assertion failed.");for(var R=u-1;R>=0;R--){var I=R-1;if(0==R||0==j(R,I)){var F=j(R,R);w[S+R]=F,m.fill(0,0,R+2),m[R]=1,P(F,m,R);for(var D=Math.min(u,R+2);D-- >0;)y[2*(O+u*D+R)+0]=_[2*D+0],y[2*(O+u*D+R)+1]=_[2*D+1]}else{var q=j(I,I),L=j(I,R),T=j(R,I),Y=j(R,R),G=s.math.sub(q,Y),U=s.math.add(q,Y),B=s.math.add(s.math.mul(G,G),s.math.mul(s.math.mul(4,L),T));if(B>=0)throw new Error("schur_eigenvals(T): T must not contain real eigenvalued 2x2 blocks.");var J=s.math.mul(.5,s.math.sqrt(B)),z=s.math.mul(.5,U),C=s.math.add(z,J),X=s.math.sub(z,J);_.fill(0,0,2*(R+1)),b.fill(0,0,2*(R+1)),s.math.abs(L)>=s.math.abs(T)?(m[I]=L,m[R]=s.math.sub(C,q),g[I]=L,g[R]=s.math.sub(X,q)):(m[R]=T,m[I]=s.math.sub(C,Y),g[R]=T,g[I]=s.math.sub(X,Y)),P(C,m,I),P(X,g,I);for(var V=R+1;V-- >0;)y[2*(O+u*V+I)+0]=_[2*V+0],y[2*(O+u*V+I)+1]=_[2*V+1],y[2*(O+u*V+R)+0]=b[2*V+0],y[2*(O+u*V+R)+1]=b[2*V+1];w[S+I]=C,w[S+R]=X,--R}}A.fill(0),E.fill(0);for(var Q=0;Q<u;Q++)for(var W=0;W<2*u;W++){var H=W>>>1,K=Math.abs(y[2*(O+u*Q)+W]);if(K>0){if(K>E[H]){var $=E[H]/K;E[H]=K,A[H]*=$*$}var Z=K/E[H];A[H]+=Z*Z}}for(var nn=A,rn=0;rn<u;rn++){var en=E[rn];nn[rn]=isFinite(en)?Math.sqrt(A[rn])*en:en}for(var tn=0;tn<u;tn++)for(var an=0;an<u;an++)v[O+u*tn+an]=s.math.div(v[O+u*tn+an],nn[an])}return[new f.NDArray(d,w),(0,h.matmul2)(n,new f.NDArray(c,v))]}function v(n){n=(0,f.asarray)(n);n.shape[n.ndim-1];var r=(0,c.hessenberg_decomp)(n),e=(0,a["default"])(r,2),t=e[0],o=e[1];return n=void 0,w(t,o),[t,o]}function w(n,r){var e=n.shape[n.ndim-1],t=o.ARRAY_TYPES[n.dtype],i=new t(e);if(n.shape[n.ndim-2]!=e)throw new Error("Q is not square.");if(n.ndim!=r.ndim)throw new Error("Q.ndim != H.ndim.");for(var s=n.ndim;s-- >0;)if(n.shape[s]!=r.shape[s])throw new Error("Q.shape != H.shape.");n=n.data,r=r.data;for(var f=Number.EPSILON,c=function n(o,s,c,h){var d=function(n,t){return r[h+e*n+t]},p=function(n){return!(Math.abs(d(n,n-1))>f*(Math.abs(d(n-1,n-1))+Math.abs(d(n,n))))&&(r[h+e*n+n-1]*=0,!0)},v=function(n,t,a,i){if(t<=n)throw new Error("Assertion failed.");for(var f=Math.max(0,n-1);f<c;f++){var l=r[h+e*n+f],u=r[h+e*t+f];r[h+e*n+f]=i*u+a*l,r[h+e*t+f]=a*u-i*l}for(var d=Math.min(c,t+2);d-- >0;){var p=r[h+e*d+n],v=r[h+e*d+t];r[h+e*d+n]=i*v+a*p,r[h+e*d+t]=a*v-i*p}for(var w=c;w-- >0;){var y=o[s+c*n+w],m=o[s+c*t+w];o[s+c*n+w]=i*m+a*y,o[s+c*t+w]=a*m-i*y}},w=function(a,f){if(f-a>c>>>1)throw new Error("Assertion failed.");var l=f-a;if(l<3)throw new Error("Assertion failed.");for(var u=new t(l*l),d=0;d<l;d++)u[l*d+d]=1;n(u,0,l,h+e*a+a);for(var p=0;p<l;p++)for(var v=0;v<p;v++){var w=u[l*p+v];u[l*p+v]=u[l*v+p],u[l*v+p]=w}for(var y=0;y<c;y++){i.fill(0,0,l);for(var m=0;m<l;m++)for(var _=0;_<l;_++)i[_]+=u[l*m+_]*o[s+c*(a+m)+y];for(var g=0;g<l;g++)o[s+c*(a+g)+y]=i[g]}for(var b=f;b<c;b++){i.fill(0,0,l);for(var A=0;A<l;A++)for(var E=0;E<l;E++)i[E]+=u[l*A+E]*r[h+e*(a+A)+b];for(var x=0;x<l;x++)r[h+e*(a+x)+b]=i[x]}for(var M=0;M<a;M++){i.fill(0,0,l);for(var k=0;k<l;k++)for(var N=0;N<l;N++)i[N]+=u[l*k+N]*r[h+e*M+(a+k)];for(var P=0;P<l;P++)r[h+e*M+(a+P)]=i[P]}},y=0,m=0,_=c,g=new l.AleaRNG("nd.la.schur_qrfrancis_inplace");while(1){for(var b=!1;!b;){if(_-m<3)return;if(_-m<c>>>4)return w(m,_);b=!1,p(m+1)?m+=1:p(_-1)?_-=1:p(m+2)?m+=2:p(_-2)?_-=2:b=!0;for(var A=m+_>>>1,E=m+2;b&&++E<_-2;)p(E)&&(b=!1,E>A?(w(E,_),_=E):(w(m,E),m=E));b||(y=0)}y+=1;var x=_-2,M=_-1,k=d(x,x)+d(M,M),N=d(x,x)*d(M,M)-d(x,M)*d(M,x);if(k*k>4*N){var P=k>=0?1:-1,O=.5*(k+P*Math.sqrt(k*k-4*N)),j=2*N/(k+P*Math.sqrt(k*k-4*N));Math.abs(d(M,M)-O)>Math.abs(d(M,M)-j)&&(O=j),k=2*O,N=O*O}if(y%16==0){if(y>1e9)throw new Error("Too many iterations for a single eigenvalue.");k=Math.abs(d(M,x))+Math.abs(d(x,_-3)),N=k*k,k*=g.uniform(1.25,1.75)}x=m+0,M=m+1;for(var S=m+2,R=d(x,x)*d(x,x)+d(x,M)*d(M,x)-k*d(x,x)+N,I=d(M,x)*(d(x,x)+d(M,M)-k),F=d(M,x)*d(S,M),D=2;D-- >0;M=S,I=F)if(0!=I){var q=(0,u._giv_rot_qr)(R,I),L=(0,a["default"])(q,3),T=L[0],Y=L[1],G=L[2];v(x,M,T,Y),R=G}for(var U=m;U<_-2;U++){x=U+1;var B=Math.min(_,U+4);for(M=U+2;M<B;M++){var J=d(x,U),z=d(M,U);if(0!==z){var C=(0,u._giv_rot_qr)(J,z),X=(0,a["default"])(C,3),V=X[0],Q=X[1];X[2];v(x,M,V,Q),r[h+e*M+U]*=0}}}}},h=0;h<n.length;h+=e*e){for(var d=0;d<e;d++)for(var p=0;p<d;p++){var v=n[h+e*d+p];n[h+e*d+p]=n[h+e*p+d],n[h+e*p+d]=v}c(n,h,e,h);for(var w=1;w<e;w++){var y=w-1;if(0!=r[h+e*w+y]){var m=function(){var t=r[h+e*y+y],o=r[h+e*y+w],i=r[h+e*w+y],s=r[h+e*w+w],f=s-t,l=f*f+4*o*i;if(l<0)return"continue";for(var u=function(){if(0===o)return[0,1];var n=f+(f<0?-1:1)*Math.sqrt(l),r=2*o,e=Math.hypot(n,r),t=(r<0?-n:+n)/e,a=Math.abs(r)/e;return[a,t]}(),c=(0,a["default"])(u,2),d=c[0],p=c[1],v=y;v<e;v++){var m=r[h+e*y+v],_=r[h+e*w+v];r[h+e*y+v]=p*_+d*m,r[h+e*w+v]=d*_-p*m}for(var g=w+1;g-- >0;){var b=r[h+e*g+y],A=r[h+e*g+w];r[h+e*g+y]=p*A+d*b,r[h+e*g+w]=d*A-p*b}for(var E=e;E-- >0;){var x=n[h+e*y+E],M=n[h+e*w+E];n[h+e*y+E]=p*M+d*x,n[h+e*w+E]=d*M-p*x}r[h+e*w+y]*=0}();if("continue"===m)continue}}for(var _=0;_<e;_++)for(var g=0;g<_;g++){var b=n[h+e*_+g];n[h+e*_+g]=n[h+e*g+_],n[h+e*g+_]=b}}}},27871:function(n,r,e){"use strict";e(81299),e(21703);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.SingularMatrixSolveError=void 0;var a=t(e(16125)),o=t(e(63490)),i=t(e(55156)),s=t(e(46907)),f=t(e(25629)),l=e(30065);function u(n){var r=c();return function(){var e,t=(0,s["default"])(n);if(r){var a=(0,s["default"])(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,i["default"])(this,e)}}function c(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var h=function(n){(0,o["default"])(e,n);var r=u(e);function e(n){var t;(0,a["default"])(this,e);for(var o=arguments.length,i=new Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];if(t=r.call.apply(r,[this].concat(i)),!(n instanceof l.NDArray))throw new Error("Assertion failed.");return t.x=n,t}return e}((0,f["default"])(Error));r.SingularMatrixSolveError=h},34071:function(n,r,e){"use strict";var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.solve=i;var a=t(e(42989)),o=e(5323);function i(n,r){var e=(0,o.rrqr_decomp)(n),t=(0,a["default"])(e,3),i=t[0],s=t[1],f=t[2];return(0,o.rrqr_solve)(i,s,f,r)}},97619:function(n,r,e){"use strict";e(21703),e(48675),e(3462),e(25438);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r._row_norm_update=c,r.srrqr_decomp_full=h;var a=t(e(42989)),o=e(11882),i=e(30065),s=e(52894),f=e(30716),l=e(5323),u=e(13511);function c(n,r,e,t){e|=0,t<<=1;for(var a=0;a<t;a+=2){var o=Math.abs(r[e+(a>>>1)]);if(0!==o){if(n[a]<o){var i=n[a]/o;n[a+1]*=i*i,n[a]=o}o/=n[a],n[a+1]+=o*o}}}function h(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n=(0,i.asarray)(n),n.ndim<2)throw new Error("srrqr_decomp_full(A,opt): A must be at least 2D.");if(n.dtype.startsWith("complex"))throw new Error("srrqr_decomp_full(A,opt): Complex A not (yet) supported.");var e="float32"===n.dtype?"float32":"float64",t=o.ARRAY_TYPES[e],h=n.shape,d=Int32Array.from(h),p=d.slice(0,-1),v=h.slice(0,-2),w=h.slice(-2),y=(0,a["default"])(w,2),m=y[0],_=y[1],g=Math.min(m,_);d[d.length-1]=m,p[p.length-1]=_;var b=t.from(n.data);n=void 0;for(var A=new Int32Array(b.length/_/m),E=new Int32Array(b.length/m),x=new t(b.length/_*m),M=new t(m*_),k=new t(m*_),N=new t(_<<1),P=new f.FrobeniusNorm,O=A.length;O-- >0;)A[O]=1024*Math.random()-1024;var j=NaN,S=NaN,R=!1,I=0,F=0,D=0,q=0,L=0,T=0,Y=function(){var n=r,t=n.dtol,a=void 0===t?1.01:t,s=n.ztol,f=void 0===s?void 0:s;if(a instanceof i.NDArray)throw new Error("srrqr_decomp_full(A,opt): NDArray as opt.dtol not yet supported.");if(!(a>=1))throw new Error("srrqr_decomp_full(A,opt): Invalid opt.dtol: ".concat(a,". Must be >=1."));var l=Number(a);if(a=function(){return l},f instanceof i.NDArray)throw new Error("srrqr_decomp_full(A,opt): NDArray as opt.ztol not yet supported.");if(null==f){var u=Math.sqrt((0,o.eps)(e));f=function(n){n*=m*_;var r=n+m*_;for(P.reset();n<r;n++)P.include(b[n]);return u*P.result*Math.max(m,_)}}else{if(!(f>=0))throw new Error("srrqr_decomp_full(A,opt): invalid opt.ztol: ".concat(f,". Must be non-negative number."));var c=Number(f);f=function(){return c}}return[a,f]}(),G=(0,a["default"])(Y,2),U=G[0],B=G[1];r=void 0;for(var J=function(n,r){var e=-b[F+_*r+r];n[r+r*m]=-1/e;for(var t=r;t-- >0;)n[t+r*m]/=e;for(var a=r;++a<_;)for(var o=0;o<=r;o++)n[o+a*m]+=n[o+r*m]*b[F+_*r+a]},z=function(n,r){for(var e=_;--e>r;){n[r+e*m]=0;for(var t=r;t-- >0;)n[t+e*m]-=n[t+r*m]*b[F+_*r+e]}n[r+r*m]=0;for(var a=-b[F+_*r+r],o=r;o-- >0;)n[o+r*m]*=a},C=function(n){for(var r=0;r<m;r++){var e=b[F+_*r+L];b[F+_*r+L]=b[F+_*r+n],b[F+_*r+n]=e}for(var t=0;t<L;t++){var o=k[t+L*m];k[t+L*m]=k[t+n*m],k[t+n*m]=o}for(var i=0;i<L;i++){var f=M[i+L*m];M[i+L*m]=M[i+n*m],M[i+n*m]=f}var u=E[D+L];E[D+L]=E[D+n],E[D+n]=u,N.fill(0);for(var c=L;++c<m;){var h=F+_*L+L,d=F+_*c+L,p=b[d];if(0!==p){var v=b[h],w=(0,s._giv_rot_qr)(v,p),y=(0,a["default"])(w,3),g=y[0],A=y[1],P=y[2];b[d]=0,0!==A&&(b[h]=P,(0,s._giv_rot_rows)(b,_-1-L,h+1,d+1,g,A),(0,s._giv_rot_rows)(x,R?m:c+1,I+m*L,I+m*c,g,A))}(0,l._norm_update)(N,b,F+_*c,L+1)}},X=function(){for(var n=-1,r=-1/0,e=L;e<_;e++){var t=(0,l._norm)(N,e);r<t&&(n=e,r=t)}C(n)},V=function(n,r){for(var e=0;e<_;e++)for(var t=0;t<L;t++)r[t+e*m]=n[t+e*m]},Q=function(n,r,e){for(var t=r;t<_;t++){var a=n[r+t*m];if(t<e){for(var o=r;o<t;o++)n[o+t*m]=n[o+1+t*m];n[t+t*m]=0}else for(var i=r;i<e;i++)n[i+t*m]=n[i+1+t*m];n[e+t*m]=a}},W=function(){N.fill(0);for(var n=L;n<m;n++)(0,l._norm_update)(N,b,F+_*n,L)},H=function(){P.reset();for(var n=L;n<_;n++)P.include((0,l._norm)(N,n));return P.result},K=function(n){n?(X(),J(M,L++),V(M,k),q=L):(V(k,M),L=q,W());var r=q+T>>>1;while(L<r){if(H()<=j){if(T=L,q<L){V(k,M),L=q,W(),r=q+T>>>1,n=!1;continue}break}n&&X(),J(M,L++),n||W()}},$=0;I<x.length;I+=m*m,F+=m*_,D+=_,$+=1){P.reset();for(var Z=m*_;Z-- >0;)P.include(b[F+Z]);var nn=0===P.max?1:P.result;if(!isFinite(nn))throw new Error("Assertion failed: "+nn);if(!(0<nn))throw new Error("Assertion failed: "+nn);if(1!==nn)for(var rn=m*_;rn-- >0;)b[F+rn]/=nn;for(var en=0;en<_;en++)E[D+en]=en;for(var tn=0;tn<m;tn++)x[I+m*tn+tn]=1;if(k.fill(0),M.fill(0),S=U($),j=B($),!isFinite(S))throw new Error("Assertion failed. Invalid dtol: ".concat(S,"."));if(!isFinite(j))throw new Error("Assertion failed. Invalid ztol: ".concat(j,"."));if(!(1<=S))throw new Error("Assertion failed. Invalid dtol: ".concat(S,"."));if(!(0<=j))throw new Error("Assertion failed. Invalid ztol: ".concat(j,"."));q=L=0,T=g,R=!1,W();n:for(;;){if(H()<=j)if(T=L,q<L)K(!1);else if(L===_)break n;for(var an=-1,on=-1,sn=-1/0,fn=0;fn<L;fn++)c(N,M,fn*m,fn+1);for(var ln=0;ln<L;ln++)for(var un=(0,l._norm)(N,ln),cn=L;cn<_;cn++){var hn=(0,l._norm)(N,cn),dn=Math.hypot(M[ln+cn*m],un*hn);sn<dn&&(sn=dn,an=ln,on=cn)}if(sn>S){if(R=!0,an<q){--q;for(var pn=0;pn<=q;pn++){for(var vn=b[F+_*pn+an],wn=Math.max(an,pn-1);wn<q;wn++)b[F+_*pn+wn]=b[F+_*pn+(wn+1)];b[F+_*pn+q]=vn}Q(M,an,q),Q(k,an,q);for(var yn=E[D+an],mn=an;mn<q;mn++)E[D+mn]=E[D+mn+1];E[D+q]=yn;for(var _n=an;_n<q;_n++){var gn=F+_*_n+_n,bn=F+_*(_n+1)+_n,An=b[bn];if(0!==An){var En=b[gn],xn=(0,s._giv_rot_qr)(En,An),Mn=(0,a["default"])(xn,3),kn=Mn[0],Nn=Mn[1],Pn=Mn[2];b[bn]=0,0!==Nn&&(b[gn]=Pn,(0,s._giv_rot_rows)(b,_-1-_n,gn+1,bn+1,kn,Nn),(0,s._giv_rot_rows)(x,m,I+m*_n,I+m*(_n+1),kn,Nn),(0,s._giv_rot_rows)(M,_n+1,m*_n,m*(_n+1),kn,Nn),M[q+(_n+1)*m]=-Nn*M[q+_n*m]+kn*M[q+(_n+1)*m],(0,s._giv_rot_rows)(k,_n+1,m*_n,m*(_n+1),kn,Nn),k[q+(_n+1)*m]=-Nn*k[q+_n*m]+kn*k[q+(_n+1)*m])}M[q+_n*m]=0,k[q+_n*m]=0}z(k,q),an=q++}--L;for(var On=0;On<=L;On++){for(var jn=b[F+_*On+an],Sn=Math.max(an,On-1);Sn<L;Sn++)b[F+_*On+Sn]=b[F+_*On+(Sn+1)];b[F+_*On+L]=jn}Q(M,an,L);for(var Rn=0;Rn<q;Rn++)N[Rn]=k[Rn+an*m];for(var In=an;In<L;In++)for(var Fn=0;Fn<q;Fn++)k[Fn+In*m]=k[Fn+(In+1)*m];for(var Dn=0;Dn<q;Dn++)k[Dn+L*m]=N[Dn];for(var qn=E[D+an],Ln=an;Ln<L;Ln++)E[D+Ln]=E[D+Ln+1];E[D+L]=qn;for(var Tn=an;Tn<L;Tn++){var Yn=F+_*Tn+Tn,Gn=F+_*(Tn+1)+Tn,Un=b[Gn];if(0!==Un){var Bn=b[Yn],Jn=(0,s._giv_rot_qr)(Bn,Un),zn=(0,a["default"])(Jn,3),Cn=zn[0],Xn=zn[1],Vn=zn[2];b[Gn]=0,0!==Xn&&(b[Yn]=Vn,(0,s._giv_rot_rows)(b,_-1-Tn,Yn+1,Gn+1,Cn,Xn),(0,s._giv_rot_rows)(x,m,I+m*Tn,I+m*(Tn+1),Cn,Xn),(0,s._giv_rot_rows)(M,Tn+1,m*Tn,m*(Tn+1),Cn,Xn),M[L+(Tn+1)*m]=-Xn*M[L+Tn*m]+Cn*M[L+(Tn+1)*m])}M[L+Tn*m]=0}z(M,L),C(on),an<q&&J(k,an),J(M,L++)}else{if(q>=T)break n;K(!0)}}if(1!==nn)for(var Qn=m*_;Qn-- >0;)b[F+Qn]*=nn;A[$]=L,(0,u._transpose_inplace)(m,x,I)}return[new i.NDArray(d,x),new i.NDArray(h,b),new i.NDArray(p,E),new i.NDArray(v,A)]}},29362:function(n,r,e){"use strict";e(21703),e(48675),e(3462),e(85827);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.svd_rank=u,r.svd_solve=c,r.svd_lstsq=h,Object.defineProperty(r,"svd_decomp",{enumerable:!0,get:function(){return l.svd_dc}});var a=t(e(42989)),o=t(e(95551)),i=e(30065),s=e(11882),f=e(27871),l=e(48660);function u(n){n=(0,i.asarray)(n);var r=n.shape[n.ndim-1],e=n.shape.slice(0,-1),t=o["default"].sqrt((0,s.eps)(n.dtype));n=n.data;for(var a=new s.ARRAY_TYPES["int32"](n.length/r),f=0;f<a.length;f++){var l=t*o["default"].abs(n[r*f]);if(0!==a[f])throw new Error("Assertion failed.");for(;a[f]<r;a[f]++){var u=o["default"].abs(n[r*f+a[f]]);if(!isFinite(u))throw new Error("svd_rank(): NaN or Infinity encountered.");if(u<=l)break}}return new i.NDArray(e,a)}function c(n,r,e,t){if(void 0==t){if(void 0!=e)throw new Error("svd_lstsq(Q,R,P, y): Either 2 ([Q,R,P], y) or 4 arguments (Q,R,P, y) expected.");t=r;var l=n,u=(0,a["default"])(l,3);n=u[0],r=u[1],e=u[2]}if(n=(0,i.asarray)(n),r=(0,i.asarray)(r),e=(0,i.asarray)(e),n.shape[n.ndim-2]!==e.shape[e.ndim-1])throw new Error("rrqr_solve(Q,R,P, y): System not square.");var c=h(n,r,e,t),d=o["default"].sqrt((0,s.eps)(r.dtype)),p=r.shape[r.ndim-1];r=r.data;for(var v=0;v<r.length;v+=p)for(var w,y=d*o["default"].abs(r[v]);w<p;w++){var m=o["default"].abs(r[v+w]);if(!isFinite(m))throw new Error("svd_solve(): NaN or Infinity encountered.");if(m<=y)throw new f.SingularMatrixSolveError(c)}return c}function h(n,r,e,t){if(void 0==t){if(void 0!=e)throw new Error("svd_lstsq(Q,R,P, y): Either 2 ([Q,R,P], y) or 4 arguments (Q,R,P, y) expected.");t=r;var f=n,l=(0,a["default"])(f,3);n=l[0],r=l[1],e=l[2]}if(n=(0,i.asarray)(n),n.ndim<2)throw new Error("svd_lstsq(U,sv,V, y): U.ndim must be at least 2.");if(r=(0,i.asarray)(r),r.ndim<1)throw new Error("svd_lstsq(U,sv,V, y): sv.ndim must be at least 1.");if(e=(0,i.asarray)(e),e.ndim<2)throw new Error("svd_lstsq(U,sv,V, y): V.ndim must be at least 2.");if(t=(0,i.asarray)(t),t.ndim<2)throw new Error("svd_lstsq(U,sv,V, y): y.ndim must be at least 2.");var u=n.shape.slice(-2),c=(0,a["default"])(u,2),h=c[0],d=c[1],p=e.shape.slice(-1),v=(0,a["default"])(p,1),w=v[0],y=t.shape.slice(-1),m=(0,a["default"])(y,1),_=m[0];if(h!==t.shape[t.ndim-2])throw new Error("svd_lstsq(U,sv,V, y): U and y don't match.");if(d!==r.shape[r.ndim-1])throw new Error("svd_lstsq(U,sv,V, y): U and sv don't match.");if(d!==e.shape[e.ndim-2])throw new Error("svd_lstsq(U,sv,V, y): V and sv don't match.");var g=Math.max(n.ndim,r.ndim+1,e.ndim,t.ndim),b=Int32Array.from({length:g},(function(){return 1}));b[g-2]=w,b[g-1]=_;for(var A=0,E=[n,e,t];A<E.length;A++)for(var x=E[A],M=g-2,k=x.ndim-2;M-- >0&&k-- >0;)if(1===b[M])b[M]=x.shape[k];else if(b[M]!=x.shape[k]&&1!=x.shape[k])throw new Error("svd_lstsq(U,sv,V, y): U,sv,V,y not broadcast-compatible.");for(var N=g-2,P=r.ndim-1;N-- >0&&P-- >0;)if(1===b[N])b[N]=r.shape[P];else if(b[N]!=r.shape[P]&&1!=r.shape[P])throw new Error("svd_lstsq(U,sv,V, y): U,sv,V,y not broadcast-compatible.");var O=o["default"].sqrt((0,s.eps)(r.dtype)),j=s.ARRAY_TYPES[[n,r,e,t].every((function(n){return"float32"===n.dtype}))?"float32":"float64"],S=new j(d*_),R=new j(b.reduce((function(n,r){return n*r}),1)),I=n.data,F=r.data,D=e.data,q=t.data,L=0,T=1,Y=0,G=1,U=0,B=1,J=0,z=1,C=0;function X(a){if(a===g-2){T=h*d,G=d,B=d*w,z=h*_;var i=function(){for(var n=O*o["default"].abs(F[Y]),r=0;r<d;r++){var e=o["default"].abs(F[Y+r]);if(!isFinite(e))throw new Error("svd_solve(): NaN or Infinity encountered.");if(e<=n)return r}return d}();S.fill(0);for(var s=0;s<h;s++)for(var f=0;f<i;f++)for(var l=0;l<_;l++)S[_*f+l]+=I[L+d*s+f]*q[J+_*s+l];for(var u=0;u<i;u++)for(var c=0;c<_;c++)S[_*u+c]/=F[Y+u];for(var p=0;p<i;p++)for(var v=0;v<w;v++)for(var y=0;y<_;y++)R[C+_*v+y]+=D[U+w*p+v]*S[_*p+y];return L+=T,Y+=G,U+=B,J+=z,void(C+=w*_)}for(var m=b[a];;m--){if(X(a+1),1==m)break;n.shape[a-g+n.ndim]>1||(L-=T),r.shape[a-g+1+r.ndim]>1||(Y-=G),e.shape[a-g+e.ndim]>1||(U-=B),t.shape[a-g+t.ndim]>1||(J-=z)}T*=n.shape[a-g+n.ndim]||1,G*=r.shape[a-g+1+r.ndim]||1,B*=e.shape[a-g+e.ndim]||1,z*=t.shape[a-g+t.ndim]||1}return X(0),new i.NDArray(b,R)}},48660:function(n,r,e){"use strict";e(21703),e(48675),e(3462);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r._svd_dc_bidiag=v,r._svd_dc=w,r.svd_dc=y,r._svd_dc_neves=r._svd_dc_2x3=r._svd_dc_1x2=void 0;var a=t(e(42989)),o=e(11882),i=e(30065),s=e(13511),f=e(52894),l=e(12812),u=e(30716),c=e(23608),h=function(n,r,e,t,o,i){n|=0,e|=0,o|=0,i|=0;var s=(0,f._giv_rot_qr)(t[o],t[o+1]),l=(0,a["default"])(s,3),u=l[0],c=l[1],h=l[2];0!==h?(t[o]=h,t[o+1]=NaN,t[i]=u,t[i+1]=-c,t[i+1*n]=c,t[i+1*n+1]=u):(t[i]=1,t[i+1*n+1]=1),r[e]=1};r._svd_dc_1x2=h;var d=function(n,r,e,t,o,i){e|=0,o|=0,i|=0,n|=0;var s=n-1|0,u=t[o],c=t[o+1],h=t[o+2],d=t[o+3];if(0!==d){var p=(0,f._giv_rot_qr)(h,d),v=(0,a["default"])(p,3),w=v[0],y=v[1],m=v[2];if(t[i+1*n+1]=w,t[i+2*n+1]=y,h=m,d=-y*c,c*=w,0!==d){var _=(0,f._giv_rot_qr)(u,d),g=(0,a["default"])(_,3),b=g[0],A=g[1],E=g[2];u=E,t[i]=b,t[i+1*n]=A*-y,t[i+2*n]=A*w,t[i+2]=-A,t[i+1*n+2]=b*-y,t[i+2*n+2]=b*w}else t[i]=1,t[i+1*n+2]=-y,t[i+2*n+2]=w}else t[i]=1,t[i+1*n+1]=1,t[i+2*n+2]=1;var x=(0,l._svd_jac_angles)(u,c,0,h),M=(0,a["default"])(x,4),k=M[0],N=M[1],P=M[2],O=M[3];t[o+1]=NaN,t[o+3]=NaN,t[o]=k*u*P-(k*c+N*h)*O,h=(-N*c+k*h)*P-N*u*O;var j=h<0?-1:1;t[o+2]=j*h,r[e]=k,r[e+1]=-N*j,r[e+1*s]=N,r[e+1*s+1]=k*j,t[i+1]=O*t[i],t[i]*=P;var S=t[i+1*n]*P-t[i+1*n+1]*O;t[i+1*n+1]=t[i+1*n]*O+t[i+1*n+1]*P,t[i+1*n]=S;var R=t[i+2*n]*P-t[i+2*n+1]*O;t[i+2*n+1]=t[i+2*n]*O+t[i+2*n+1]*P,t[i+2*n]=R};r._svd_dc_2x3=d;var p=function(n,r,e,t,i,s,l,c){t|=0,s|=0,l|=0,n|=0;var h=n-1|0;r|=0;var d=r-1|0;if(c.length<3*h)throw new Error("Assertion failed: Integer work matrix I too small.");if(i.length<h*(h+2)+2*h+(h+1)*(h+1))throw new Error("Assertion failed: Scalar work matrix F too small.");var p=h*(h+2)-d,v=h*(h+2)-2*d,w=h*(h+2)-d*(d+2),y=2*d,m=d,_=0;if(r<2)throw new Error("Assertion failed.");if(0!==i[s+2*d-2])throw new Error("Assertion failed.");for(var g=1;g<d;g++)if(i[s+2*(g-1)]<i[s+2*g])throw new Error("Assertion failed.");for(var b=new u.FrobeniusNorm,A=function(){for(var n=0;n<d;n++)b.include(i[s+2*n+1]);for(var r=b.result,e=0;e<d;e++)b.include(i[s+2*e]);var t=b.result;return 0===t&&(t=1),[r/t,t]}(),E=(0,a["default"])(A,2),x=E[0],M=E[1],k=0;k<2*d;k++)i[s+k]/=M;for(var N=(0,o.eps)(e instanceof Float32Array?"float32":"float64"),P=function(){for(var n=0,r=d-1,e=d-1;e-- >0;){var t=i[s+2*e],a=i[s+2*e+1],o=c[_+e];Math.abs(a)/N<=t?(i[p+n]=t,c[m+n]=o,++n):(--r,i[s+2*r]=t,i[s+2*r+1]=i[s+2*e+1],c[m+r]=o)}return n}(),O=0;O<P;O++)c[_+O]=c[m+O];for(var j=function(){for(var n=P,r=d-1,e=d-1;e-- >P;){var t=i[s+2*e],o=i[s+2*r],l=c[m+e],u=i[s+2*e+1],h=i[s+2*r+1],v=(0,f._giv_rot_qr)(h,u),g=(0,a["default"])(v,3),b=g[0],A=g[1],E=g[2];(t-o)/N<=t||!isFinite(Math.sqrt(d)/(t-o))?(i[w+2*n]=b,i[w+2*n+1]=A,i[s+2*r+1]=E,i[s+2*r]=i[p+n]=t,c[_+n]=l,c[y+n]=r,++n):(--r,i[s+2*r]=t,i[s+2*r+1]=i[s+2*e+1],c[_+r]=l)}return n}(),S=2*P;S<2*j;S++)i[s+S]=i[w+S],i[w+S]=0;for(var R=function(n){var r=i[s+2*n],e=j<n?i[s+2*n-2]:r+x;if(r>e)throw new Error("Assertion failed.");for(var t=function(){if(n>j){for(var t=(r+e)/2,a=1,o=j;o<d;o++){var f=i[s+2*o],l=i[s+2*o+1];a+=l/(f-t)*(l/(f+t))}if(!isFinite(a))throw new Error("Assertion failed.");if(a<0){var u=e;return r-=e,e=-Number.MIN_VALUE,u}}var c=r;return e-=r,r=+Number.MIN_VALUE,c}();;){var a=(r+e)/2;if(a===r||a===e){i[p+n]=a;break}for(var o=1,f=j;f<d;f++){var l=i[s+2*f],u=i[s+2*f+1];o+=u/(l-t-a)*(u/(l+t+a))}if(!isFinite(o))throw new Error("Assertion failed.");o<=0&&(r=a),o>=0&&(e=a)}},I=j;I<d;I++)R(I);0===Math.abs(i[s+2*d-1])&&(i[s+2*d-2]=0,i[s+2*d-1]=0,i[p+d-1]=0);for(var F=i[p+d-1],D=i[s+2*(d-1-(F<0))],q=j;q<d;q++){for(var L=i[s+2*q],T=(D-L+F)*(D+L+F),Y=j;Y<q;Y++){var G=i[p+Y],U=i[s+2*(Y-(G<0))],B=i[s+2*Y];T*=(U-L+G)/(B-L)*((U+L+G)/(B+L))}for(var J=q;J<d-1;J++){var z=i[p+J],C=i[s+2*(J-(z<0))],X=i[s+2*J+2];T*=(C-L+z)/(X-L)*((C+L+z)/(X+L))}i[s+2*q+1]=Math.sign(i[s+2*q+1])*Math.sqrt(T)}for(var V=P-1,Q=j-1,W=j,H=0;H<d;H++){var K=-1/0,$=3;if(W<d){var Z=i[p+W];$=2,K=Z+i[s+2*(W-(Z<0))]}if(Q>=P){var nn=i[p+Q];nn<K||($=1,K=nn)}if(V>=0){var rn=i[p+V];rn<K||($=0,K=rn)}switch($){case 0:c[m+V--]=H;continue;case 1:c[m+Q--]=H;continue;case 2:c[m+W++]=H;continue;default:throw new Error("Assertion failed.")}}for(var en=j;en<d;en++){var tn=i[p+en],an=i[s+2*(en-(tn<0))];b.reset();for(var on=j;on<d-1;on++){var sn=i[s+2*on],fn=i[s+2*on+1],ln=fn/(sn-an-tn)*(sn/(sn+an+tn));b.include(i[w+d*en+on]=ln)}b.include(i[w+d*en+d-1]=-1);var un=b.result;if(!(0<un))throw new Error("Assertion failed.");for(var cn=j;cn<d;cn++)i[w+d*en+cn]/=un}for(var hn=j;hn<d;hn++)for(var dn=hn;++dn<d;){var pn=i[w+d*hn+dn];i[w+d*hn+dn]=i[w+d*dn+hn],i[w+d*dn+hn]=pn}if(P<j){for(var vn=P;vn<j;vn++)i.fill(0,w+d*vn+P,w+d*vn+d),i[w+d*vn+vn]=1;for(var wn=j;wn<d;wn++)i.fill(0,w+d*wn+P,w+d*wn+j);for(var yn=j;yn-- >P;){var mn=c[y+yn];if(mn<d-1){var _n=i[s+2*yn],gn=i[s+2*yn+1];(0,f._giv_rot_rows)(i,d-yn,w+d*yn+yn,w+d*mn+yn,_n,gn)}}}for(var bn=0;bn<d;bn++){i.fill(0,v+P,v+d);for(var An=P;An<d;An++){var En=e[t+h*bn+c[_+An]];if(0!==En)for(var xn=P;xn<d;xn++)i[v+xn]+=En*i[w+d*An+xn]}for(var Mn=0;Mn<P;Mn++){var kn=c[_+Mn];i[v+Mn]=e[t+h*bn+kn]}for(var Nn=0;Nn<d;Nn++){var Pn=c[m+Nn];e[t+h*bn+Pn]=i[v+Nn]}}for(var On=j;On<d;On++){var jn=i[p+On],Sn=i[s+2*(On-(jn<0))];b.reset();for(var Rn=j;Rn<d;Rn++){var In=i[s+2*Rn],Fn=i[s+2*Rn+1],Dn=Fn/(In-Sn-jn)/(In+Sn+jn);b.include(i[w+d*On+Rn]=Dn)}var qn=b.result;if(!(0<qn||On===d-1))throw new Error("Assertion failed: "+qn);for(var Ln=j;Ln<d;Ln++)i[w+d*On+Ln]/=qn}if(0===i[s+2*d-1]){for(var Tn=j;Tn<d-1;Tn++)i[w+d*(d-1)+Tn]=0;i[w+d*(d-1)+(d-1)]=1}for(var Yn=j;Yn<d;Yn++)for(var Gn=Yn;++Gn<d;){var Un=i[w+d*Yn+Gn];i[w+d*Yn+Gn]=i[w+d*Gn+Yn],i[w+d*Gn+Yn]=Un}if(P<j){for(var Bn=P;Bn<j;Bn++)i.fill(0,w+d*Bn+P,w+d*Bn+d),i[w+d*Bn+Bn]=1;for(var Jn=j;Jn<d;Jn++)i.fill(0,w+d*Jn+P,w+d*Jn+j);for(var zn=j;zn-- >P;){var Cn=c[y+zn],Xn=i[s+2*zn],Vn=i[s+2*zn+1];(0,f._giv_rot_rows)(i,d-zn,w+d*zn+zn,w+d*Cn+zn,Xn,Vn)}}for(var Qn=0;Qn<r;Qn++){i.fill(0,v+P,v+d);for(var Wn=P;Wn<d;Wn++){var Hn=i[l+n*Qn+c[_+Wn]];if(0!==Hn)for(var Kn=P;Kn<d;Kn++)i[v+Kn]+=Hn*i[w+d*Wn+Kn]}for(var $n=0;$n<P;$n++){var Zn=c[_+$n];i[v+$n]=i[l+n*Qn+Zn]}for(var nr=0;nr<d;nr++){var rr=c[m+nr];i[l+n*Qn+rr]=i[v+nr]}}for(var er=j;er<d;er++)i[p+er]+=i[s+2*(er-(i[p+er]<0))];for(var tr=0;tr<d;tr++){var ar=c[m+tr];i[s+2*ar]=i[p+tr]*M,i[s+2*ar+1]=NaN}};function v(n,r,e,t,o,i,s,l){if(r>n)throw new Error("Assertion failed.");if(1>=r)throw new Error("Assertion failed.");if(2===r)return h(n,e,t,o,i,s);if(3===r)return d(n,e,t,o,i,s);var u=n-1,c=r-1,w=r>>>1,y=w-1;if(l.length<u)throw new Error("Assertion failed: Integer work matrix I too small.");if(o.length<2*u)throw new Error("Assertion failed: Scalar work matrix F too small.");v(n,w,e,t,o,i,s,l),v(n,r-w,e,t+u*w+w,o,i+2*w,s+n*w+w,l),e[t+u*y+y]=1;for(var m=o[i+2*y],_=o[i+2*y+1],g=0;g<y;g++)o[i+2*g+1]=m*o[s+n*y+g];for(var b=w;b<c;b++)o[i+2*b+1]=_*o[s+n*w+b];var A=(0,f._giv_rot_qr)(m*o[s+n*y+y],_*o[s+n*w+c]),E=(0,a["default"])(A,3),x=E[0],M=E[1],k=E[2];if(o[i+2*y]=0,o[i+2*y+1]=k,0!==k){for(var N=0;N<w;N++)o[s+n*N+c]=o[s+n*N+y]*-M,o[s+n*N+y]*=x;for(var P=w;P<r;P++)o[s+n*P+y]=o[s+n*P+c]*M,o[s+n*P+c]*=x}l[c-1]=y;for(var O=0,j=w,S=0;S<c-1;S++)l[S]=j>=c||O<y&&o[i+2*O]>=o[i+2*j]?O++:j++;for(var R=0;R<c;R++){var I=l[R];o[2*R]=o[i+2*I],o[2*R+1]=o[i+2*I+1]}for(var F=0;F<c;F++)o[i+2*F]=o[2*F],o[i+2*F+1]=o[2*F+1];p(n,r,e,t,o,i,s,l)}function w(n,r,e,t,a,o,i,s,f,l){if(n>r)throw new Error("Assertion failed.");if(f.length<3*n)throw new Error("Assertion failed: Integer work matrix I too small.");if(l.length<n*(n+2)+2*n+(n+1)*(n+1)+(n+1)*r)throw new Error("Assertion failed: Scalar work matrix F too small.");var u=n*(n+2),h=u+2*n,d=h+(n+1)*(n+1);l.fill(0,h,d+r);for(var p=0;p<n;p++)for(var w=0;w<r;w++)l[d+r+r*p+w]=i[s+r*p+w];i.fill(0,s,s+n*r),(0,c._bidiag_decomp_horiz)(n,r,e,t,l,0,l,d);for(var y=0;y<n;y++)l[u+2*y]=l[(n+1)*y+y],l[u+2*y+1]=l[(n+1)*y+y+1];v(n+1,n+1,i,s,l,u,h,f);for(var m=0;m<n;m++)a[o+m]=l[u+2*m];for(var _=0;_<n;_++){l.fill(0,0,n);for(var g=0;g<n;g++)for(var b=0;b<n;b++)l[b]+=e[t+n*_+g]*i[s+n*g+b];for(var A=0;A<n;A++)e[t+n*_+A]=l[A]}i.fill(0,s,s+n*n);for(var E=0;E<n+1;E++)for(var x=0;x<n;x++)for(var M=0;M<r;M++)i[s+r*x+M]+=l[h+(n+1)*E+x]*l[d+r*E+M]}function y(n){if(n=(0,i.asarray)(n),n.dtype.startsWith("complex"))throw new Error("svd_dc(A): A.dtype must be float.");var r=n.shape.slice(-2),e=(0,a["default"])(r,2),t=e[0],f=e[1];if(t>f){var l=y(n.T),u=(0,a["default"])(l,3),c=u[0],h=u[1],d=u[2];return(0,s.transpose_inplace)(c),[d.T,h,c]}var p=n.shape,v=p.slice(),m=p.slice(0,-1);v[v.length-1]=t;var _="float32"===n.dtype?"float32":"float64",g=o.ARRAY_TYPES[_];n=n.data;var b=n.length/(t*f),A=g.from(n);n=void 0;for(var E=new g(b*t*t),x=new g(b*t),M=new g(t*(t+2)+2*t+(t+1)*(t+1)+(t+1)*Math.max(1+t,f)),k=new Int32Array(3*t),N=0,P=0,O=0;P<x.length;N+=t*t,P+=t,O+=t*f)w(t,f,E,N,x,P,A,O,k,M);return[new i.NDArray(v,E),new i.NDArray(m,x),new i.NDArray(p,A)]}r._svd_dc_neves=p},69305:function(n,r,e){"use strict";e(21703),e(48675),e(3462);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.svd_jac_2sided=h;var a=t(e(42989)),o=e(11882),i=e(30065),s=e(48782),f=e(99777),l=e(13511),u=e(12812),c=e(52894);function h(n){if(n=(0,i.asarray)(n),n.dtype.startsWith("complex"))throw new Error("svd_jac_1sided(A): A.dtype must be float.");var r=n.shape,e=0|r[r.length-2],t=r[r.length-1];if(e>t){var d=(0,f.qr_decomp)(n),p=(0,a["default"])(d,2),v=p[0],w=p[1],y=h(w),m=(0,a["default"])(y,3),_=m[0],g=m[1],b=m[2];return[(0,s.matmul2)(v,_),g,b]}if(e<t){var A=(0,f.qr_decomp)(n.T),E=(0,a["default"])(A,2),x=E[0],M=E[1],k=h(M),N=(0,a["default"])(k,3),P=N[0],O=N[1],j=N[2];return(0,l.transpose_inplace)(j),[j,O,(0,s.matmul2)(x,P).T]}var S="float32"===n.dtype?"float32":"float64",R=o.ARRAY_TYPES[S],I=Math.pow(e*(0,o.eps)(S),2),F="float32"===S?16:8,D=R.from(n.data);n=void 0;var q=new R(e*e),L=new R(D.length),T=new R(D.length/e),Y=Int32Array.from({length:e},(function(n,r){return r}));if(1>e)throw new Error("Assertion failed.");if(1==e){for(var G=D.length;G-- >0;)D[G]<0?(D[G]*=-1,T[G]=-1):T[G]=1;return[new i.NDArray(r,T),new i.NDArray(r.slice(0,-1),D),new i.NDArray(r,L.fill(1))]}for(var U=0,B=0;B<T.length;U+=e*e,B+=e){for(var J=0;J<e;J++)for(var z=0;z<e;z++)q[e*J+z]=D[U+e*J+z],D[U+e*J+z]=+(J===z);for(var C=0;C<e;C++)for(var X=0;X<e;X++)L[U+e*C+X]=+(C===X);for(var V=!1;!V;){V=!0;for(var Q=0;Q<e;Q+=F)for(var W=0;W<=Q;W+=F)for(var H=Q;H<Q+F&&H<e;H++)for(var K=W;K<W+F&&K<H;K++){var $=q[e*K+K],Z=q[e*K+H],nn=q[e*H+K],rn=q[e*H+H];if(Z*Z+nn*nn>Math.abs($*rn)*I){V=!1;var en=(0,u._svd_jac_angles)($,Z,nn,rn),tn=(0,a["default"])(en,4),an=tn[0],on=tn[1],sn=tn[2],fn=tn[3];(0,c._giv_rot_rows)(q,e,e*K,e*H,an,on),(0,c._giv_rot_cols)(q,e,K,H,sn,fn),q[e*K+H]=q[e*H+K]=0,(0,c._giv_rot_rows)(D,e,U+e*K,U+e*H,an,on),(0,c._giv_rot_rows)(L,e,U+e*K,U+e*H,sn,-fn)}}}(0,u._svd_jac_post)(e,D,q,L,U,T,B,Y)}return[new i.NDArray(r,D),new i.NDArray(r.slice(0,-1),T),new i.NDArray(r,L)]}},31221:function(n,r,e){"use strict";e(21703),e(48675),e(3462);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.svd_jac_2sided_blocked=p;var a=t(e(42989)),o=e(30065),i=e(11882),s=e(48782),f=e(99777),l=e(13511),u=e(12812),c=e(52894),h=4,d=h*h;function p(n){if(n=(0,o.asarray)(n),n.dtype.startsWith("complex"))throw new Error("svd_jac_1sided(A): A.dtype must be float.");var r=n.shape,e=0|r[r.length-2],t=r[r.length-1];if(e>t){var v=(0,f.qr_decomp)(n),w=(0,a["default"])(v,2),y=w[0],m=w[1],_=p(m),g=(0,a["default"])(_,3),b=g[0],A=g[1],E=g[2];return[(0,s.matmul2)(y,b),A,E]}if(e<t){var x=(0,f.qr_decomp)(n.T),M=(0,a["default"])(x,2),k=M[0],N=M[1],P=p(N),O=(0,a["default"])(P,3),j=O[0],S=O[1],R=O[2];return(0,l.transpose_inplace)(R),[R,S,(0,s.matmul2)(k,j).T]}var I="float32"===n.dtype?"float32":"float64",F=i.ARRAY_TYPES[I],D=Math.pow(e*(0,i.eps)(I),2),q=0|Math.ceil(e/h),L=F.from(n.data);n=void 0;var T=new F(q*q*h*h),Y=new F(L.length),G=new F(L.length/e),U=Int32Array.from({length:e},(function(n,r){return r}));if(1>e)throw new Error("Assertion failed.");if(1==e){for(var B=L.length;B-- >0;)L[B]<0?(L[B]*=-1,G[B]=-1):G[B]=1;return[new o.NDArray(r,G),new o.NDArray(r.slice(0,-1),L),new o.NDArray(r,Y.fill(1))]}for(var J=0,z=0;z<G.length;J+=e*e,z+=e){for(var C=0;C<e;C++)for(var X=0;X<e;X++){var V=d*(q*(C/h|0)+(X/h|0))+h*(C%h)+X%h|0;T[V]=L[J+e*C+X],L[J+e*C+X]=+(C===X)}for(var Q=0;Q<e;Q++)for(var W=0;W<e;W++)Y[J+e*Q+W]=+(Q===W);for(var H=!1;!H;){H=!0;for(var K=q;K-- >0;)for(var $=K;$>=0;$--)for(var Z=h;Z-- >0;)for(var nn=$===K?Z:h;nn-- >0;){var rn=T[d*(q*$+$)+h*nn+nn],en=T[d*(q*$+K)+h*nn+Z],tn=T[d*(q*K+$)+h*Z+nn],an=T[d*(q*K+K)+h*Z+Z];if(en*en+tn*tn>Math.abs(rn*an)*D){H=!1;for(var on=(0,u._svd_jac_angles)(rn,en,tn,an),sn=(0,a["default"])(on,4),fn=sn[0],ln=sn[1],un=sn[2],cn=sn[3],hn=$*q*d+nn*h,dn=K*q*d+Z*h,pn=hn+q*d;hn<pn;hn+=d,dn+=d)for(var vn=0;vn<h;vn++){var wn=fn*T[vn+hn]+ln*T[vn+dn];T[vn+dn]=-ln*T[vn+hn]+fn*T[vn+dn],T[vn+hn]=wn}for(var yn=$*d+nn+q*q*h*h,mn=K*d+Z+q*q*h*h;(yn-=q*d)>=0;){mn-=q*d;for(var _n=d;(_n-=h)>=0;){var gn=T[yn+_n]*un+T[mn+_n]*-cn;T[mn+_n]=T[yn+_n]*cn+T[mn+_n]*un,T[yn+_n]=gn}}T[d*(q*$+K)+h*nn+Z]=T[d*(q*K+$)+h*Z+nn]=0;var bn=J+e*(h*$+nn),An=J+e*(h*K+Z);(0,c._giv_rot_rows)(L,e,bn,An,fn,ln),(0,c._giv_rot_rows)(Y,e,bn,An,un,-cn)}}}for(var En=0;En<e;En++){var xn=d*(q+1)*(En/h|0)+(h+1)*(En%h)|0;G[z+En]=T[xn]}(0,u._svd_jac_post_skip1)(e,L,Y,J,G,z,U)}return[new o.NDArray(r,L),new o.NDArray(r.slice(0,-1),G),new o.NDArray(r,Y)]}},15445:function(n,r,e){"use strict";e(21703),e(48675),e(3462),e(85827);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.svd_jac_classic=d;var a=t(e(9545)),o=t(e(42989)),i=e(11882),s=e(30065),f=e(48782),l=e(99777),u=e(13511),c=e(12812),h=e(52894);function d(n){if(n=(0,s.asarray)(n),n.dtype.startsWith("complex"))throw new Error("svd_jac_1sided(A): A.dtype must be float.");var r=n.shape,e=r[r.length-2],t=r[r.length-1];if(e>t){var p=(0,l.qr_decomp)(n),v=(0,o["default"])(p,2),w=v[0],y=v[1],m=d(y),_=(0,o["default"])(m,3),g=_[0],b=_[1],A=_[2];return[(0,f.matmul2)(w,g),b,A]}if(e<t){var E=(0,l.qr_decomp)(n.T),x=(0,o["default"])(E,2),M=x[0],k=x[1],N=d(k),P=(0,o["default"])(N,3),O=P[0],j=P[1],S=P[2];return(0,u.transpose_inplace)(S),[S,j,(0,f.matmul2)(M,O).T]}var R="float32"===n.dtype?"float32":"float64",I=i.ARRAY_TYPES[R],F=(0,i.eps)(R)*e,D=I.from(n.data);n=void 0;var q=new I(e*e),L=new I(D.length),T=new I(D.length/e),Y=(new I(e),Int32Array.from({length:e},(function(n,r){return r})));if(1>e)throw new Error("Assertion failed.");if(1===e){for(var G=D.length;G-- >0;)D[G]<0?(D[G]*=-1,T[G]=-1):T[G]=1;return[new s.NDArray(r,T),new s.NDArray(r.slice(0,-1),D),new s.NDArray(r,L.fill(1))]}for(var U=Int32Array.from(a["default"].mark((function n(){var r;return a["default"].wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e;case 1:if(!(r>1)){n.next=7;break}return r=r+1>>>1,n.next=5,r;case 5:n.next=1;break;case 7:case"end":return n.stop()}}),n)}))()),B=new I(U.reduce((function(n,r){return n+(r*r+r>>>1)}),0)),J=function(){for(var n=0,r=0,t=0,a=0,o=function(e,o){var s=function(n,r){return n+=t,r+=a,i=e,B[e+(n*n+n>>>1)+r]},f=U[o];e-=f*f+f>>>1;var l=s(0,0);if(n=t,r=a,t+1<f){var u=s(1,0);u>l&&(l=u,n=t+1,r=a);var c=s(1,1);c>l&&(l=c,n=t+1,r=a+1)}if(t!=a){var h=s(0,1);h>l&&(l=h,n=t,r=a+1)}t=2*n,a=2*r,i=e},i=B.length,s=U.length;s-- >0;)o(i,s);var f=-1/0,l=function(n,r){n+=t,r+=a;var o=q[e*n+r],i=q[e*r+n];return o*o+i*i};if(t+1<e){var u=l(1,0);u>f&&(f=u,n=t+1,r=a)}if(a+1<e){var c=l(0,1);c>f&&(f=c,n=t,r=a+1)}if(t!=a){var h=l(0,0);if(h>f&&(f=h,n=t,r=a),t+1<e){var d=l(1,1);d>f&&(n=t+1,r=a+1)}}return[r,n]},z=function(n){n=n>>>1<<1;for(var r=n;r<n+2&&r<e;r++)for(var t=r>>>1,a=t*t+t>>>1,o=0;o<n+1;o++){var i=q[e*r+o],s=q[e*o+r],f=r===o?-1/0:i*i+s*s,l=a+(o>>>1);B[l]=r%2||o%2?Math.max(B[l],f):f}for(var u=0,c=1;c<U.length;c++){var h=U[c-1],d=u;u+=h*h+h>>>1,n=n>>>2<<1;for(var p=n;p<n+2&&p<h;p++)for(var v=d+(p*p+p>>>1),w=p>>>1,y=u+(w*w+w>>>1),m=0;m<=p;m++){var _=y+(m>>>1),g=B[v+m];B[_]=p%2||m%2?Math.max(B[_],g):g}}},C=function(n){n=n>>>1<<1;for(var r=Math.min(n+2,e),t=n;t<e;t++)for(var a=t>>>1,o=a*a+a>>>1,i=n;i<r;i++){var s=q[e*t+i],f=q[e*i+t],l=t===i?-1/0:s*s+f*f,u=o+(i>>>1);B[u]=t%2||i%2?Math.max(B[u],l):l}for(var c=0,h=1;h<U.length;h++){n=n>>>2<<1;var d=U[h-1],p=Math.min(n+2,d),v=c;c+=d*d+d>>>1;for(var w=n;w<d;w++)for(var y=v+(w*w+w>>>1),m=w>>>1,_=c+(m*m+m>>>1),g=n;g<p&&g<=w;g++){var b=_+(g>>>1),A=B[y+g];B[b]=w%2||g%2?Math.max(B[b],A):A}}},X=0,V=0;V<T.length;X+=e*e,V+=e){for(var Q=0;Q<e;Q++)for(var W=0;W<e;W++)q[e*Q+W]=D[X+e*Q+W],D[X+e*Q+W]=+(Q===W);for(var H=0;H<e;H++)for(var K=0;K<e;K++)L[X+e*H+K]=+(H===K);for(var $=0;$<e;$+=2)z($);for(var Z=-1,nn=-1;;){var rn=J(),en=(0,o["default"])(rn,2),tn=en[0],an=en[1];if(tn>=an)throw new Error("Assertion failed.");if(Z==an&&nn==tn)break;Z=an,nn=tn;var on=q[e*an+an],sn=q[e*an+tn],fn=q[e*tn+an],ln=q[e*tn+tn];if(!(Math.max(Math.abs(sn),Math.abs(fn))>Math.sqrt(Math.abs(on*ln))*F))break;var un=(0,c._svd_jac_angles)(ln,fn,sn,on),cn=(0,o["default"])(un,4),hn=cn[0],dn=cn[1],pn=cn[2],vn=cn[3];(0,h._giv_rot_rows)(q,e,e*tn,e*an,hn,dn),(0,h._giv_rot_cols)(q,e,tn,an,pn,vn),q[e*an+tn]=0,q[e*tn+an]=0,z(an),z(tn),C(an),C(tn),(0,h._giv_rot_rows)(D,e,X+e*tn,X+e*an,hn,dn),(0,h._giv_rot_rows)(L,e,X+e*tn,X+e*an,pn,-vn)}(0,c._svd_jac_post)(e,D,q,L,X,T,V,Y)}return[new s.NDArray(r,D),new s.NDArray(r.slice(0,-1),T),new s.NDArray(r,L)]}},13511:function(n,r,e){"use strict";e(21703);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r._transpose_inplace=o,r.transpose_inplace=i;var a=t(e(42989));e(30065);function o(n,r,e){for(var t=n;--t>0;)for(var a=t;a-- >0;){var o=e+n*t+a,i=e+n*a+t,s=r[o];r[o]=r[i],r[i]=s}}function i(n){var r=n.shape.slice(-2),e=(0,a["default"])(r,2),t=e[0],i=e[1];if(t!=i)throw new Error("In-place transposition is only supported for square matrices.");n=n.data;for(var s=0;s<n.length;s+=t*t)o(t,n,s)}},14748:function(n,r,e){"use strict";e(21703),e(48675),e(3462),e(85827);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.tril=s,r.triu=f,r._tril_solve=l,r._triu_solve=u,r._tril_t_solve=c,r._triu_t_solve=h,r.tril_solve=d,r.triu_solve=p;var a=t(e(42989)),o=e(11882),i=e(30065);function s(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(n=(0,i.asarray)(n),n.ndim<2)throw new Error("Input must be at least 2D.");return n.mapElems(n.dtype,(function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),o=1;o<e;o++)t[o-1]=arguments[o];var i=t.slice(-2),s=(0,a["default"])(i,2),f=s[0],l=s[1];return f<l-r?0:n}))}function f(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(n=(0,i.asarray)(n),n.ndim<2)throw new Error("Input must be at least 2D.");return n.mapElems(n.dtype,(function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),o=1;o<e;o++)t[o-1]=arguments[o];var i=t.slice(-2),s=(0,a["default"])(i,2),f=s[0],l=s[1];return f>l-r?0:n}))}function l(n,r,e,t,a,o,i){if(!(n<=r))throw new Error("Assertion failed.");if(n|=0,r|=0,e|=0,a|=0,i|=0,!(0<=a))throw new Error("Assertion failed.");if(!(0<=i))throw new Error("Assertion failed.");if(!(n*r<=t.length-a))throw new Error("Assertion failed.");if(!(n*e<=o.length-i))throw new Error("Assertion failed.");for(var s=0;s<n;s++){for(var f=0;f<s;f++)for(var l=0;l<e;l++)o[i+e*s+l]-=t[a+r*s+f]*o[i+e*f+l];for(var u=0;u<e;u++)o[i+e*s+u]/=t[a+r*s+s]}}function u(n,r,e,t,a,o,i){if(!(n<=r))throw new Error("Assertion failed.");if(n|=0,r|=0,e|=0,a|=0,i|=0,!(0<=a))throw new Error("Assertion failed.");if(!(0<=i))throw new Error("Assertion failed.");if(!(n*r<=t.length-a))throw new Error("Assertion failed.");if(!(n*e<=o.length-i))throw new Error("Assertion failed.");for(var s=n;s-- >0;)for(var f=e;f-- >0;){for(var l=n;--l>s;)o[i+e*s+f]-=t[a+r*s+l]*o[i+e*l+f];o[i+e*s+f]/=t[a+r*s+s]}}function c(n,r,e,t,a,o,i){if(!(n<=r))throw new Error("Assertion failed.");if(n|=0,r|=0,e|=0,a|=0,i|=0,!(0<=a))throw new Error("Assertion failed.");if(!(0<=i))throw new Error("Assertion failed.");if(!(n*r<=t.length-a))throw new Error("Assertion failed.");if(!(n*e<=o.length-i))throw new Error("Assertion failed.");for(var s=n;s-- >0;){for(var f=e;f-- >0;)o[i+e*s+f]/=t[a+r*s+s];for(var l=s;l-- >0;)for(var u=e;u-- >0;)o[i+e*l+u]-=t[a+r*s+l]*o[i+e*s+u]}}function h(n,r,e,t,a,o,i){if(!(n<=r))throw new Error("Assertion failed.");if(n|=0,r|=0,e|=0,a|=0,i|=0,!(0<=a))throw new Error("Assertion failed.");if(!(0<=i))throw new Error("Assertion failed.");if(!(n*r<=t.length-a))throw new Error("Assertion failed.");if(!(n*e<=o.length-i))throw new Error("Assertion failed.");for(var s=0;s<n;s++){for(var f=0;f<e;f++)o[i+e*s+f]/=t[a+r*s+s];for(var l=s;++l<n;)for(var u=0;u<e;u++)o[i+e*l+u]-=t[a+r*s+l]*o[i+e*s+u]}}function d(n,r){if(n=(0,i.asarray)(n),n.ndim<2)throw new Error("tril_solve(L,Y): L.ndim must be at least 2.");if(r=(0,i.asarray)(r),r.ndim<2)throw new Error("tril_solve(L,Y): Y.ndim must be at least 2.");var e=r.shape.slice(-2),t=(0,a["default"])(e,2),s=t[0],f=t[1];if(n.shape[n.ndim-2]!==s)throw new Error("tril_solve(L,Y): L and Y don't match.");if(n.shape[n.ndim-1]!==s)throw new Error("tril_solve(L,Y): Last two dimensions of L must be quadratic.");var u=Math.max(n.ndim,r.ndim),c=n.shape,h=r.shape,d=new Int32Array(u);d.fill(1,0,-2),d[u-2]=s,d[u-1]=f;for(var p=0,v=[c,h];p<v.length;p++)for(var w=v[p],y=u-2,m=w.length-2;y-- >0&&m-- >0;)if(1===d[y])d[y]=w[m];else if(d[y]!=w[m]&&1!=w[m])throw new Error("tril_solve(L,Y): L and Y not broadcast-compatible.");var _=[n,r].every((function(n){return"float32"===n.dtype}))?"float32":"float64";n=n.data,r=r.data;var g=new o.ARRAY_TYPES[_](d.reduce((function(n,r){return n*r}))),b=0,A=1,E=0,x=1,M=0;function k(e){if(e===u-2){A=s*s,x=s*f;for(var t=x;t-- >0;)g[M+t]=r[E+t];l(s,s,f,n,b,g,M),b+=A,E+=x,M+=x}else{for(var a=d[e];;a--){if(k(e+1),1==a)break;c[e-u+c.length]>1||(b-=A),h[e-u+h.length]>1||(E-=x)}A*=c[e-u+c.length]||1,x*=h[e-u+h.length]||1}}return k(0),new i.NDArray(d,g)}function p(n,r){if(n=(0,i.asarray)(n),n.ndim<2)throw new Error("triu_solve(U,Y): U.ndim must be at least 2.");if(r=(0,i.asarray)(r),r.ndim<2)throw new Error("triu_solve(U,Y): Y.ndim must be at least 2.");var e=r.shape.slice(-2),t=(0,a["default"])(e,2),s=t[0],f=t[1];if(n.shape[n.ndim-2]!==s)throw new Error("triu_solve(U,Y): U and Y don't match.");if(n.shape[n.ndim-1]!==s)throw new Error("triu_solve(U,Y): Last two dimensions of U must be quadratic.");var l=Math.max(n.ndim,r.ndim),c=n.shape,h=r.shape,d=new Int32Array(l);d.fill(1,0,-2),d[l-2]=s,d[l-1]=f;for(var p=0,v=[c,h];p<v.length;p++)for(var w=v[p],y=l-2,m=w.length-2;y-- >0&&m-- >0;)if(1===d[y])d[y]=w[m];else if(d[y]!=w[m]&&1!=w[m])throw new Error("triu_solve(U,Y): U and Y not broadcast-compatible.");var _=[n,r].every((function(n){return"float32"===n.dtype}))?"float32":"float64";n=n.data,r=r.data;var g=new o.ARRAY_TYPES[_](d.reduce((function(n,r){return n*r}))),b=n.length,A=1,E=r.length,x=1,M=g.length;function k(e){if(e===l-2){A=s*s,x=s*f,b-=A,E-=x,M-=x;for(var t=x;t-- >0;)g[M+t]=r[E+t];u(s,s,f,n,b,g,M)}else{for(var a=d[e];;a--){if(k(e+1),1==a)break;c[e-l+c.length]>1||(b+=A),h[e-l+h.length]>1||(E+=x)}A*=c[e-l+c.length]||1,x*=h[e-l+h.length]||1}}return k(0),new i.NDArray(d,g)}},63119:function(n,r,e){"use strict";e(21703),e(85827),e(48675),e(3462);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r._urv_decomp_full=u,r.urv_decomp_full=c,r._urv_lstsq=h,r.urv_lstsq=d;var a=t(e(42989)),o=e(11882),i=e(30065),s=e(97619),f=e(52894),l=e(14748);function u(n,r,e,t,o,i,s,l){if(0!==n%1)throw new Error("Assertion failed.");if(0!==r%1)throw new Error("Assertion failed.");if(0!==t%1)throw new Error("Assertion failed.");if(0!==i%1)throw new Error("Assertion failed.");for(var u=r;u-- >0;)for(var c=r;c-- >0;)if(0!==o[i+r*u+c])throw new Error("Assertion failed.");if(n|=0,r|=0,t|=0,i|=0,!(n<=r))throw new Error("Assertion failed.");if(n===r)for(var h=r;h-- >0;){var d=s[l+h];o[i+r*h+d]=1}else{for(var p=r;p-- >0;)o[i+r*p+p]=1;for(var v=n;v-- >0;)for(var w=n;w<r;w++){var y=t+r*v+w,m=e[y];if(0!==m){var _=t+r*v+v,g=e[_],b=(0,f._giv_rot_qr)(g,m),A=(0,a["default"])(b,3),E=A[0],x=A[1],M=A[2];if(0!==x){for(var k=v;k-- >0;){var N=t+r*k+v,P=e[N],O=t+r*k+w,j=e[O];e[N]=j*x+P*E,e[O]=j*E-P*x}(0,f._giv_rot_rows)(o,1+w-v,i+r*v+v,i+r*w+v,E,x),e[_]=M}e[y]=0}}for(var S=0;S<r;++S)for(;;){var R=s[l+S];if(s[l+S]=s[l+R],s[l+R]=R,R<=S)break;for(var I=r;I-- >0;){var F=o[i+r*I+S];o[i+r*I+S]=o[i+r*I+R],o[i+r*I+R]=F}}}}function c(n){var r=(0,s.srrqr_decomp_full)(n),e=(0,a["default"])(r,4),t=e[0],f=e[1],l=e[2],c=e[3];n=void 0;var h=f.shape.slice(-2),d=(0,a["default"])(h,2),p=d[0],v=d[1],w=f.shape.slice();w[w.length-2]=v,l=l.data;for(var y=c.data,m=f.data,_=new o.ARRAY_TYPES[f.dtype](m.length/p*v),g=0,b=0,A=0,E=0;E<y.length;g+=p*v,b+=v*v,A+=v,E+=1){var x=y[E];if(x<v)for(var M=x;M<p;M++)for(var k=x;k<v;k++)m[g+v*M+k]=0;u(x,v,m,g,_,b,l,A)}return[t,f,new i.NDArray(w,_),c]}function h(n,r,e,t,a,o,i,s,f,u,c,h,d,p,v,w,y){if(n%1!==0)throw new Error("Assertion failed.");if(r%1!==0)throw new Error("Assertion failed.");if(e%1!==0)throw new Error("Assertion failed.");if(t%1!==0)throw new Error("Assertion failed.");if(a%1!==0)throw new Error("Assertion failed.");if(o%1!==0)throw new Error("Assertion failed.");if(s%1!==0)throw new Error("Assertion failed.");if(u%1!==0)throw new Error("Assertion failed.");if(h%1!==0)throw new Error("Assertion failed.");if(p%1!==0)throw new Error("Assertion failed.");if(w%1!==0)throw new Error("Assertion failed.");if(!(0<=r))throw new Error("Assertion failed.");if(!(0<=e))throw new Error("Assertion failed.");if(!(0<=t))throw new Error("Assertion failed.");if(!(0<=a))throw new Error("Assertion failed.");if(!(0<=o))throw new Error("Assertion failed.");if(!(0<=s))throw new Error("Assertion failed.");if(!(0<=u))throw new Error("Assertion failed.");if(!(0<=h))throw new Error("Assertion failed.");if(!(0<=p))throw new Error("Assertion failed.");if(!(0<=w))throw new Error("Assertion failed.");if(!(s<=i.length-r*e))throw new Error("Assertion failed.");if(!(u<=f.length-e*t))throw new Error("Assertion failed.");if(!(h<=c.length-t*a))throw new Error("Assertion failed.");if(!(p<=d.length-a*o))throw new Error("Assertion failed.");if(!(w<=v.length-r*o))throw new Error("Assertion failed.");if(y.length<r*o)throw new Error("Assertion failed.");y.fill(0,0,r*o);for(var m=0;m<r;m++)for(var _=0;_<n;_++)for(var g=0;g<o;g++)y[o*_+g]+=i[s+e*m+_]*v[w+o*m+g];(0,l._triu_solve)(n,t,o,f,u,y,0);for(var b=0;b<n;b++)for(var A=0;A<a;A++)for(var E=0;E<o;E++)d[p+o*A+E]+=c[h+a*b+A]*y[o*b+E]}function d(n,r,e,t,s){if(null==s){if(null!=t||null!=e)throw new Error("urv_lstsq( U,R,V,ranks, Y ): Either 2 ([U,R,V,ranks], Y) or 5 arguments (U,R,V,ranks, Y) expected.");s=r;var f=n,l=(0,a["default"])(f,4);n=l[0],r=l[1],e=l[2],t=l[3]}if(n=(0,i.asarray)(n),!(n.ndim>=2))throw new Error("urv_lstsq(U,R,V, Y): U.ndim must be at least 2.");if(r=(0,i.asarray)(r),!(r.ndim>=2))throw new Error("urv_lstsq(U,R,V, Y): R.ndim must be at least 2.");if(e=(0,i.asarray)(e),!(e.ndim>=2))throw new Error("urv_lstsq(U,R,V, Y): V.ndim must be at least 2.");if(s=(0,i.asarray)(s),!(s.ndim>=2))throw new Error("urv_lstsq(U,R,V, Y): Y.ndim must be at least 2.");t=(0,i.asarray)(t);var u=n.shape,c=r.shape,d=e.shape,p=s.shape,v=t.shape,w=[n,r,e,s].every((function(n){return"float32"===n.dtype}))?"float32":"float64",y=o.ARRAY_TYPES[w],m=[n,r,e,s].reduce((function(n,r){var e=r.ndim;return Math.max(n,e)}),t.ndim+2),_=new Int32Array(m);_.fill(1);for(var g=0,b=[n,r,e,s];g<b.length;g++)for(var A=b[g],E=m-2,x=A.ndim-2;E-- >0&&x-- >0;)if(1===_[E])_[E]=A.shape[x];else if(_[E]!=A.shape[x]&&1!=A.shape[x])throw new Error("urv_lstsq( U,R,V,ranks, Y ): U,R,V,ranks, Y not broadcast-compatible.");for(var M=m-2,k=t.ndim;M-- >0&&k-- >0;)if(1===_[M])_[M]=t.shape[k];else if(_[M]!=t.shape[k]&&1!=t.shape[k])throw new Error("urv_lstsq( U,R,V,ranks, Y ): U,R,V,ranks, Y not broadcast-compatible.");var N=n.shape.slice(-2),P=(0,a["default"])(N,2),O=P[0],j=P[1],S=e.shape.slice(-2),R=(0,a["default"])(S,2),I=R[0],F=R[1],D=s.shape[s.ndim-1];if(r.shape[r.ndim-2]!==j)throw new Error("urv_lstsq( U,R,V,ranks, Y ): Matrix dimensions incompatible.");if(r.shape[r.ndim-1]!==I)throw new Error("urv_lstsq( U,R,V,ranks, Y ): Matrix dimensions incompatible.");if(s.shape[s.ndim-2]!==O)throw new Error("urv_lstsq( U,R,V,ranks, Y ): Matrix dimensions incompatible.");if(j!==I&&O<F){if(O!==j)throw new Error("Assertion failed.");if(I!==F)throw new Error("Assertion failed.")}if(!(O>=j))throw new Error("Assertion failed.");if(!(I<=F))throw new Error("Assertion failed.");_[m-2]=F,_[m-1]=D,t=t.data,n=n.data,r=r.data,e=e.data,s=s.data;var q=new y(_.reduce((function(n,r){return n*r}))),L=new y(O*D),T=n.length,Y=1,G=r.length,U=1,B=e.length,J=1,z=s.length,C=1,X=t.length,V=1,Q=q.length;function W(a){if(a===m-2){Y=O*j,U=j*I,J=I*F,C=O*D,V=1,T-=Y,G-=U,B-=J,z-=C,X-=V,Q-=F*D;var o=t[X];h(o,O,j,I,F,D,n,T,r,G,e,B,q,Q,s,z,L)}else{for(var i=_[a];;i--){if(W(a+1),1==i)break;u[a-m+u.length]>1||(T+=Y),c[a-m+c.length]>1||(G+=U),d[a-m+d.length]>1||(B+=J),p[a-m+p.length]>1||(z+=C),v[a-m+2+v.length]>1||(X+=V)}Y*=u[a-m+u.length]||1,U*=c[a-m+c.length]||1,J*=d[a-m+d.length]||1,C*=p[a-m+p.length]||1,V*=v[a-m+2+v.length]||1}}return W(0),new i.NDArray(_,q)}},95551:function(n,r,e){"use strict";e(21703),e(25438),Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=r.math=void 0;var t=e(7074),a={nextUp:function(n){var r=Number.EPSILON,e=Number.MIN_VALUE,t=n*(n<0?1-r/2:1+r);if(!isFinite(n))throw new Error("Assertion failed!");if(!isFinite(t))throw new Error("Assertion failed!");t===n&&(t+=e);var a=n+(t-n)/2;n<a&&a<t&&(t=a);var o=(t+n)/2;return n<o&&o<t&&(t=o),0===t?-0:t},add:function(n,r){return n instanceof t.Complex?n.add(r):r instanceof t.Complex?r.add(n):n+r},sub:function(n,r){return n instanceof t.Complex?n.sub(r):r instanceof t.Complex?new t.Complex(n).sub(r):n-r},mul:function(n,r){return n instanceof t.Complex?n.mul(r):r instanceof t.Complex?r.mul(n):n*r},div:function(n,r){return n instanceof t.Complex?n.div(r):r instanceof t.Complex?new t.Complex(n).div(r):n/r},zero:function(n){return a.cast(0,n)},one:function(n){return a.cast(1,n)},neg:function(n){return n instanceof t.Complex?n.neg():-n},abs:function(n){return n instanceof t.Complex?n.abs():Math.abs(n)},sqrt:function(n){return n instanceof t.Complex?n.sqrt():n>=0?Math.sqrt(n):new t.Complex(n).sqrt()},exp:function(n){return n instanceof t.Complex?n.exp():Math.exp(n)},min:function(n,r){return Math.min(n,r)},max:function(n,r){return Math.max(n,r)},hypot:function(n,r){return Math.hypot(n,r)},atan2:function(n,r){return Math.atan2(n,r)},conj:function(n){return n instanceof t.Complex?n.conj():n},is_equal:function(n,r){return n instanceof t.Complex?n.equals(r):r instanceof t.Complex?r.equals(n):n==r},is_close:function(n,r){var e=1e-8,t=1e-5,o=e+t*a.max(a.abs(n),a.abs(r));return a.abs(a.sub(n,r))<=o}};r.math=a;var o=a;r["default"]=o},30065:function(n,r,e){"use strict";e(21703),e(81299),e(48675),e(3462),e(85827);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.array=b,r.asarray=A,r.NDArray=void 0;var a=t(e(42989)),o=t(e(25069)),i=t(e(16125)),s=t(e(39885)),f=t(e(63490)),l=t(e(55156)),u=t(e(46907)),c=t(e(25629)),h=t(e(9545)),d=t(e(51382)),p=e(45854),v=e(11882);function w(n,r){var e;if("undefined"===typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=y(n))||r&&n&&"number"===typeof n.length){e&&(n=e);var t=0,a=function(){};return{s:a,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var n=e.next();return i=n.done,n},e:function(n){s=!0,o=n},f:function(){try{i||null==e["return"]||e["return"]()}finally{if(s)throw o}}}}function y(n,r){if(n){if("string"===typeof n)return m(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?m(n,r):void 0}}function m(n,r){(null==r||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}function _(n){var r=g();return function(){var e,t=(0,u["default"])(n);if(r){var a=(0,u["default"])(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,l["default"])(this,e)}}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function b(n,r){var e=h["default"].mark(a);if(null==r&&(r=n,n=void 0),("object"==(0,d["default"])(r)||"function"==typeof r)&&"shape"in r&&"data"in r){var t=r.data;return null==n?n=r.dtype:"float"===n&&(n=r.dtype.startsWith("float")&&v.ARRAY_TYPES.hasOwnProperty(n)?r.dtype:"float64"),(0,v._check_dtype)(n),t=t instanceof v.ARRAY_TYPES[n]?t.slice():v.ARRAY_TYPES[n].from(t),new E(r.shape,t)}function a(n){var r;return h["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("object"!==(0,d["default"])(n)||!("length"in n)){e.next=11;break}if(r=n.length,"number"===typeof r){e.next=4;break}throw new Error("Illegal argument(s).");case 4:if(0===r%1){e.next=6;break}throw new Error("Illegal argument(s).");case 6:if(0!==r){e.next=8;break}throw new Error("Illegal argument(s).");case 8:return e.next=10,r;case 10:return e.delegateYield(a(n[0]),"t0",11);case 11:case"end":return e.stop()}}),e)}a=Int32Array.from(a(r)),null==n?n=function n(r,e){if(r===a.length)return(0,v.dtypeof)(e);for(var t=a[r]-1,o=n(r+1,e[t]);t>=0;t--)o=(0,v.super_dtype)(o,n(r+1,e[t]));return o}(0,r):"float"===n&&(n="float64"),(0,v._check_dtype)(n);var o=new v.ARRAY_TYPES[n](a.reduce((function(n,r){return n*r}),1)),i=0;function s(n,r){if(n===a.length)o[i++]=r;else{if(r.length!==a[n])throw new Error("Nested array not axis-aligned.");for(var e=0;e<a[n];e++)s(n+1,r[e])}}return s(0,r),new E(a,o)}function A(n,r){if(null==r&&(r=n,n=void 0),null!=n&&"float"!==n&&!(n in v.ARRAY_TYPES))throw new Error("asarray(dtype, arrayLike): Invalid dtype: '".concat(n,"'."));return r instanceof E?null==n||n===r.dtype||"float"===n&&r.dtype.startsWith("float")?r:new E(r.shape,v.ARRAY_TYPES[n].from(r.data)):("float"===n&&(n="float64"),b(n,r))}var E=function(n){(0,f["default"])(r,n);_(r);function r(n,e){var t;if((0,i["default"])(this,r),!(n instanceof Int32Array))throw new Error("Shape must be Int32Array.");if(n.some((function(n){return n<1})))throw new Error("Invalid shape: ".concat(n,"."));if(e.length!=n.reduce((function(n,r){return n*r}),1))throw new Error("Shape [".concat(n,"] does not match array length of ").concat(e.length,"."));var a=function n(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return n.data[n._flat_idx(e)]};return Object.setPrototypeOf(a,r.prototype),Object.freeze(n.buffer),a.shape=n,a.data=e,Object.seal(a),(0,l["default"])(t,a)}return(0,s["default"])(r,null,[{key:"name",get:function(){return"nd.Array"}}]),(0,s["default"])(r,[{key:"set",value:function(n,r){this.data[this._flat_idx(n)]=r}},{key:"modify",value:function(n,r){var e=this._flat_idx(n);this.data[e]=r.apply(void 0,[this.data[e]].concat((0,o["default"])(n)))}},{key:"_flat_idx",value:function(n){var r=this.shape;if(n.length!=r.length)throw new Error("Multi-index [".concat(n,"] does not have expected length of ").concat(r.length,"."));for(var e=0,t=1,a=r.length;a-- >0;t*=r[a]){var o=n[a];if(o%1!=0)throw new Error("Multi-index [".concat(n,"] contains non-integer entries."));if(o<0&&(o+=r[a]),o<0||o>=r[a])throw new Error("Multi-index [".concat(n,"] out of bounds [").concat(r,"]."));e+=o*t}return e}},{key:Symbol["for"]("nodejs.util.inspect.custom"),value:function(n,r){return this.toString()}},{key:"toString",value:function(){var n=h["default"].mark(l),r=h["default"].mark(d),e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(n,r){return r.length,6};if(!(e instanceof Function)){var t=1*e;e=function(){return t}}var a=this.shape,i=this.data,s=new Int32Array(a.length);s[s.length-1]=1;for(var f=s.length;--f>0;)s[f-1]=s[f]*a[f];function l(r,t){var o,f,u,c,d,p,v;return h["default"].wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=e(r,a),f=o>>>1,u=o-f,a.length!==r){n.next=16;break}c=i[t],n.t0=c,n.next=null===n.t0?6:void 0===n.t0?9:12;break;case 6:return n.next=8,"null";case 8:return n.abrupt("break",14);case 9:return n.next=11,"undefined";case 11:return n.abrupt("break",14);case 12:return n.next=14,c.toString();case 14:n.next=37;break;case 16:if(!(a[r]>o+1)){n.next=31;break}d=0;case 18:if(!(d<u)){n.next=23;break}return n.delegateYield(l(r+1,t+d*s[r]),"t1",20);case 20:d++,n.next=18;break;case 23:p=a[r]-f;case 24:if(!(p<a[r])){n.next=29;break}return n.delegateYield(l(r+1,t+p*s[r]),"t2",26);case 26:p++,n.next=24;break;case 29:n.next=37;break;case 31:v=0;case 32:if(!(v<a[r])){n.next=37;break}return n.delegateYield(l(r+1,t+v*s[r]),"t3",34);case 34:v++,n.next=32;break;case 37:case"end":return n.stop()}}),n)}if(l=(0,o["default"])(l(0,0)),this.ndim>1){var u=l.reduce((function(n,r){return Math.max(n,r.length)}),0);l=l.map((function(n){return n.padStart(u)}))}var c=0;function d(n,t,o){var i,f,u,p,v,w,y,m,_;return h["default"].wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a.length!==t){r.next=4;break}return r.next=3,l[c++];case 3:return r.abrupt("return");case 4:return n+=" ",i="[ ",f=", ",u=" ]",t<a.length-1&&(f=",\n"+n,i="[",u="]"),r.next=9,i;case 9:if(p=e(t,a),v=p>>>1,w=p-v,!(a[t]>p+1)){r.next=31;break}y=0;case 12:if(!(y<w)){r.next=19;break}return r.delegateYield(d(n,t+1,o+y*s[t]),"t0",14);case 14:return r.next=16,f;case 16:y++,r.next=12;break;case 19:return r.next=21,"...".concat(a[t]-p," more...");case 21:m=a[t]-v;case 22:if(!(m<a[t])){r.next=29;break}return r.next=25,f;case 25:return r.delegateYield(d(n,t+1,o+m*s[t]),"t1",26);case 26:m++,r.next=22;break;case 29:r.next=40;break;case 31:_=0;case 32:if(!(_<a[t])){r.next=40;break}if(!(_>0)){r.next=36;break}return r.next=36,f;case 36:return r.delegateYield(d(n,t+1,o+_*s[t]),"t2",37);case 37:_++,r.next=32;break;case 40:return r.next=42,u;case 42:case"end":return r.stop()}}),r)}return(0,o["default"])(d("",0,0)).join("")}},{key:"toNestedArray",value:function(){var n=this.data,r=this.shape,e=0,t=function t(a){return a===r.length?n[e++]:Array.from({length:r[a]},(function(){return t(a+1)}))};return t(0)}},{key:Symbol.iterator,value:h["default"].mark((function n(){var e,t,a;return h["default"].wrap((function(n){while(1)switch(n.prev=n.next){case 0:e=this.shape.slice(1),t=e.reduce((function(n,r){return n*r}),1),a=0;case 2:if(!(a<this.data.length)){n.next=7;break}return n.next=5,new r(e,this.data.slice(a,a+=t));case 5:n.next=2;break;case 7:case"end":return n.stop()}}),n,this)}))},{key:"forEach",value:function(n){for(var e=this.shape[0],t=this.shape.slice(1),a=t.reduce((function(n,r){return n*r}),1),o=0,i=0;o<e;o++,i+=a)n(new r(t,this.data.slice(i,i+a)),o)}},{key:"elems",value:h["default"].mark((function(){var n,r,e,t,a,o;return h["default"].wrap((function(i){while(1)switch(i.prev=i.next){case 0:return o=function(i){return h["default"].wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i!==r.length){n.next=5;break}return n.next=3,[t.slice(),e[a++]];case 3:n.next=11;break;case 5:t[i]=0;case 6:if(!(t[i]<r[i])){n.next=11;break}return n.delegateYield(o(i+1),"t0",8);case 8:t[i]++,n.next=6;break;case 11:case"end":return n.stop()}}),n)},n=h["default"].mark(o),r=this.shape,e=this.data,t=new Int32Array(r.length),a=0,i.delegateYield(o(0),"t0",5);case 5:case"end":return i.stop()}}),o,this)}))},{key:"forElems",value:function(n){var r=this.shape,e=this.data,t=new Int32Array(r.length),a=0;function i(s){if(s===r.length)n.apply(void 0,[e[a++]].concat((0,o["default"])(t)));else for(t[s]=0;t[s]<r[s];t[s]++)i(s+1)}i(0)}},{key:"valueOf",value:function(){return 0===this.shape.length?this.data[0]:this}},{key:"mapElems",value:function(n,e){if(null==e){if(null==n)return new r(this.shape,this.data.slice());n instanceof Function&&(e=n,n=void 0)}return null==e&&(e=function(n){return n}),(0,p.zip_elems)([this],n,e)}},{key:"transpose",value:function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e=(0,o["default"])(e);var a=Int32Array.from(this.shape),i=a.length,s=new Int32Array(i);i>0&&(s[i-1]=1);for(var f=i;--f>0;)s[f-1]=a[f]*s[f];if(0==e.length){if(i<=1)return this.sliceElems();a[i-2]=this.shape[i-1],a[i-1]=this.shape[i-2];var l=s[i-2];s[i-2]=s[i-1],s[i-1]=l}else{var u=new Set(e),c=s;if(s=new Int32Array(i),u.size!=e.length)throw new Error("Duplicate axes are not allowed.");for(var h=e.length;h-- >0;){var d=e[h];if(0>d||d>=i)throw new Error("Axis out of bounds.");a[h]=this.shape[d],s[h]=c[d]}for(var p=0,v=u.size;p<i;p++)u.has(p)||(a[v]=this.shape[p],s[v++]=c[p])}var w=this.data,y=new w.__proto__.constructor(w.length),m=w.length;function _(n,r){if(i>n)for(var e=a[n];e-- >0;r-=s[n])_(n+1,r);else y[--m]=w[r]}return _(0,m-1),new r(a,y)}},{key:"reshape",value:function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e=Int32Array.from(e);for(var a=this.data.length,o=1,i=-1,s=e.length;--s>=0;)if(e[s]<0){if(-1!==e[s])throw new Error("Invalid dimension: "+e[s]);if(-1!==i)throw new Error("At most on dimension may be -1.");i=s}else o*=e[s];if(-1!==i){if(0!==a%o)throw new Error("Shape cannot be inferred.");e[i]=a/o}return new r(e,this.data)}},{key:"reduceElems",value:function(n,e,t){if(null==t){if(null==e)return this.data.reduce(n);if("string"===typeof n)return this.data.reduce(e);t=e,e=void 0}if(null==e&&(e="object"),!(0,v.is_subdtype)(this.dtype,e))throw new Error("New dtype must be a super-dtype.");var a=this.ndim;if("number"===typeof n&&(n=[n]),n instanceof r){if(!(0,v.is_subdtype)(n.dtype,"int32"))throw new Error("Invalid dtype ".concat(n.dtype," for axes."));if(1!==n.ndim)throw new Error("Only 1D nd.Array allowed for axes.");n=n.data}n=new Set(h["default"].mark((function r(){var e,t,o;return h["default"].wrap((function(r){while(1)switch(r.prev=r.next){case 0:e=w(n),r.prev=1,e.s();case 3:if((t=e.n()).done){r.next=12;break}if(o=t.value,0>o&&(o+=a),!(0>o||o>=a)){r.next=8;break}throw new Error("Reduction axis "+o+" out of bounds.");case 8:return r.next=10,+o;case 10:r.next=3;break;case 12:r.next=17;break;case 14:r.prev=14,r.t0=r["catch"](1),e.e(r.t0);case 17:return r.prev=17,e.f(),r.finish(17);case 20:case"end":return r.stop()}}),r,null,[[1,14,17,20]])}))());var o=this.shape,i=o.filter((function(r,e){return!n.has(e)})),s=new v.ARRAY_TYPES[e](i.reduce((function(n,r){return n*r}),1)),f=this.data,l=0,u=0;function c(r,e){if(o.length===r)s[l]=e?t(f[u++],s[l]):f[u++],++l;else if(n.has(r))for(var a=l,i=o[r];i-- >0;e=!0)l=a,c(r+1,e);else for(var h=o[r];h-- >0;)c(r+1,e)}if(c(0,!1),l!=s.length)throw new Error([l,s.length]);if(u!=this.data.length)throw new Error([u,this.data.length]);return new r(i,s)}},{key:"sliceElems",value:function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];for(var o=this.ndim,i=this.shape,s=0,f=0,l=0,u=0,c=e;u<c.length;u++){var d=c[u];if("..."===d)++s;else if("new"===d)0;else if("number"===typeof d){if(d%1!=0)throw new Error("Only integral indices allowed.");++f}else{var p=d.length;if("number"!==typeof p||p%1!=0||p>3||1==p)throw new Error("Illegal argument(s).");++l}}if(s>1)throw new Error("Highlander! There can be only one ... (ellipsis).");if(0==s&&e.push("..."),f+l>o)throw new Error("Cannot sliced more dimensions than available.");var w=0,y=[],m=Int32Array.from(h["default"].mark((function n(){var r,t,s,u,c,d,p,v,m,_,g,b,A;return h["default"].wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=o,t=1,s=e.length;case 2:if(!(--s>=0)){n.next=54;break}u=e[s],n.t0=u,n.next="new"===n.t0?7:"..."===n.t0?11:21;break;case 7:return y.push(0),n.next=10,1;case 10:return n.abrupt("break",52);case 11:c=f+l;case 12:if(!(c<o)){n.next=20;break}return y.push(t),t*=i[--r],n.next=17,i[r];case 17:c++,n.next=12;break;case 20:return n.abrupt("break",52);case 21:if(--r,"number"!==typeof u){n.next=29;break}if(0>u&&(u+=i[r]),!(0>u||u>=i[r])){n.next=26;break}throw new Error("Index out of bounds.");case 26:w+=t*u,n.next=51;break;case 29:if(d=u,p=(0,a["default"])(d,3),v=p[0],m=void 0===v?void 0:v,_=p[1],g=void 0===_?void 0:_,b=p[2],A=void 0===b?1:b,g<0&&(g+=i[r]),m<0&&(m+=i[r]),!(0>m||m>=i[r])){n.next=34;break}throw new Error("Slice start out of bounds.");case 34:if(0!=A){n.next=36;break}throw new Error("Stride/step cannot be zero.");case 36:if(!(A<0)){n.next=43;break}if(null==m&&(m=i[r]-1),null==g&&(g=-1),!(-1>g||g>=i[r])){n.next=41;break}throw new Error("Slice end out of bounds.");case 41:n.next=47;break;case 43:if(null==m&&(m=0),null==g&&(g=i[r]),!(0>g||g>i[r])){n.next=47;break}throw new Error("Slice end out of bounds.");case 47:return y.push(t*A),w+=t*m,n.next=51,1+Math.trunc((-Math.sign(A)+g-m)/A);case 51:t*=i[r];case 52:n.next=2;break;case 54:case"end":return n.stop()}}),n)}))()),_=this.data,g=new v.ARRAY_TYPES[this.dtype](m.reduce((function(n,r){return n*r}),1)),b=0;function A(n,r){if(0===n)g[b++]=_[r];else for(var e=m[--n];e-- >0;r+=y[n])A(n,r)}return A(m.length,w),m.reverse(),new r(m,g)}},{key:"ndim",get:function(){return this.shape.length}},{key:"dtype",get:function(){for(var n=0,r=Object.entries(v.ARRAY_TYPES);n<r.length;n++){var e=(0,a["default"])(r[n],2),t=e[0],o=e[1];if(this.data instanceof o)return t}throw new Error("Data type could not determined.")}},{key:"T",get:function(){return 0==this.ndim?this.sliceElems():1==this.ndim?this.sliceElems([],"new"):this.transpose()}},{key:"H",get:function(){var n=this.T;return"object"!=this.dtype&&"complex128"!=this.dtype?n:n.mapElems(math.conj)}}]),r}((0,c["default"])(Function));r.NDArray=E},25315:function(n,r,e){"use strict";e(48675),e(3462),e(21703);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.LBFGS_Solver=void 0;var a=t(e(16125)),o=t(e(39885)),i=e(19137),s=function(){function n(r,e){(0,a["default"])(this,n),this.dXdG=new Float64Array(r),this.dX=new Float64Array(r*e),this.dG=new Float64Array(r*e),this.tmp=new Float64Array(r),Object.assign(this,{M:r,N:e}),this.m=0,this.off=0,Object.seal(this)}return(0,o["default"])(n,[{key:"update",value:function(n,r){var e=this.M,t=this.N,a=this.dG,o=this.dXdG,s=this.dX;if(n.length!==t)throw new Error("Assertion failed.");if(r.length!==t)throw new Error("Assertion failed.");for(var f=0,l=t;l-- >0;)f+=n[l]*r[l];if(!(0<f))throw new i.LineSearchNoProgressError;this.m===e?this.off=(this.off+1)%e:this.m++;var u=(this.off+this.m-1)%e;o[u]=f;for(var c=t;c-- >0;)s[t*u+c]=n[c];for(var h=t;h-- >0;)a[t*u+h]=r[h]}},{key:"forget",value:function(n){if(0!==n%1)throw new Error("Assertion failed.");if(!(n>=0))throw new Error("Assertion failed.");if(!(n<=this.m))throw new Error("Assertion failed.");this.off=(this.off+n)%this.M,this.m-=n}},{key:"compute_Hv_phase1",value:function(n){var r=this.M,e=this.N,t=this.dG,a=this.m,o=this.dXdG,i=this.dX,s=this.off,f=this.tmp;if(n.length!==e)throw new Error("Assertion failed.");for(var l=a;l-- >0;){var u=s+l;u-=(u>=r)*r;for(var c=0,h=e;h-- >0;)c+=i[e*u+h]*n[h];f[u]=c/=o[u];for(var d=e;d-- >0;)n[d]-=c*t[e*u+d]}}},{key:"compute_Hv_phase2",value:function(n){var r=this.M,e=this.N,t=this.dG,a=this.m,o=this.dXdG,i=this.dX,s=this.off,f=this.tmp;if(n.length!==e)throw new Error("Assertion failed.");for(var l=0;l<a;l++){var u=s+l;u-=(u>=r)*r;for(var c=0,h=e;h-- >0;)c+=t[e*u+h]*n[h];c/=o[u];for(var d=e;d-- >0;)n[d]+=(f[u]-c)*i[e*u+d]}}}]),n}();r.LBFGS_Solver=s},27357:function(n,r,e){"use strict";e(21703),e(48675),e(3462);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.LBFGSB_Solver=void 0;var a=t(e(16125)),o=t(e(39885)),i=e(53791),s=e(90053),f=e(9588),l=e(88235),u=e(93769),c=e(14748);function h(n,r){var e;if("undefined"===typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=d(n))||r&&n&&"number"===typeof n.length){e&&(n=e);var t=0,a=function(){};return{s:a,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var n=e.next();return i=n.done,n},e:function(n){s=!0,o=n},f:function(){try{i||null==e["return"]||e["return"]()}finally{if(s)throw o}}}}function d(n,r){if(n){if("string"===typeof n)return p(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?p(n,r):void 0}}function p(n,r){(null==r||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}var v=!1,w=function(n,r){if(n.length%1!==0)throw new Error("Assertion failed.");if(r.length%1!==0)throw new Error("Assertion failed.");if(n.length!==r.length)throw new Error("Assertion failed.");for(var e=0,t=n.length;t-- >0;)e+=n[t]*r[t];return e},y=function(){function n(r,e){if((0,a["default"])(this,n),r%1!==0)throw new Error("Assertion failed.");if(e%1!==0)throw new Error("Assertion failed.");if(!(0<r))throw new Error("Assertion failed.");if(!(0<e))throw new Error("Assertion failed.");this.m=0,this.M=0|r,this.N=0|e,this._scale=1,this.dX=new Float64Array(r*e),this.dG=new Float64Array(r*e),this.dXdX=new Float64Array(r*r),this.dXdG=new Float64Array(r*r),this.dGdG=new Float64Array(r*r),this.D=new Float64Array(r),this._J=new Float64Array(r*r),this._J_invalid=!0,this.travels=new Float64Array(e),this.Bdx=new Float64Array(2*r),this.Bg=new Float64Array(2*r),this.Bei=new Float64Array(2*r),this.M_WAAW=new Float64Array(4*r*r),v||(this.P=new Int32Array(2*r))}return(0,o["default"])(n,[{key:"forget",value:function(n){var r=this.m,e=this.M,t=this.N,a=this.dX,o=this.dXdX,i=this.dG,s=this.dXdG,f=this.dGdG,l=this.D;if(r>e)throw new Error("Assertion failed.");if(n%1!==0)throw new Error("Assertion failed.");if(!(n>0))throw new Error("Assertion failed.");if(!(n<=r))throw new Error("Assertion failed.");for(var u=0,c=[a,i];u<c.length;u++)for(var h=c[u],d=n;d<r;d++)for(var p=0;p<t;p++)h[t*(d-n)+p]=h[t*d+p];for(var v=0,w=[o,s,f];v<w.length;v++)for(var y=w[v],m=n;m<r;m++)for(var _=n;_<r;_++)y[e*(m-n)+(_-n)]=y[e*m+_];for(var g=n;g<r;g++)l[g-n]=l[g];this.m=r-n,this._J_invalid=!0}},{key:"update",value:function(n,r){var e=this.M,t=this.N,a=this.dX,o=this.dXdX,i=this.dG,s=this.dXdG,f=this.dGdG,l=this.D;if(t!==n.length)throw new Error("Assertion failed.");if(t!==r.length)throw new Error("Assertion failed.");this.m>=e&&this.forget(1),this.m++;var u=this.m,c=u-1;if(u>e)throw new Error("Assertion failed.");for(var h=0;h<t;h++)a[t*c+h]=n[h];for(var d=0;d<t;d++)i[t*c+d]=r[d];for(var p=0;p<u;p++){for(var v=0,w=0;w<t;w++)v+=a[t*c+w]*a[t*p+w];o[e*c+p]=o[e*p+c]=v}for(var y=0;y<u;y++){s[e*c+y]=0;for(var m=0;m<t;m++)s[e*c+y]+=a[t*c+m]*i[t*y+m];s[e*y+c]=0;for(var _=0;_<t;_++)s[e*y+c]+=a[t*y+_]*i[t*c+_]}l[c]=Math.sqrt(s[e*c+c]);for(var g=0;g<u;g++){for(var b=0,A=0;A<t;A++)b+=i[t*c+A]*i[t*g+A];f[e*c+g]=f[e*g+c]=b}this._J_invalid=!0}},{key:"_compute_Bv",value:function(n,r){var e=this.m,t=this.M,a=this.N,o=this.dG,i=this.dXdG,s=this.dX,f=this.J,l=this.D,u=this.scale;if(n.length!==2*t)throw new Error("Assertion failed.");if(r.length!==a)throw new Error("Assertion failed.");for(var h=2*e;h-- >e;)n[h]*=-1;(0,c._tril_t_solve)(e,t,1,f,0,n,e);for(var d=0;d<e;d++)n[d]/=l[d];for(var p=1;p<e;p++)for(var v=0;v<p;v++)n[v]+=i[t*p+v]*n[e+p]/i[t*v+v];for(var w=a;w-- >0;)for(var y=e;y-- >0;)r[w]+=s[a*y+w]*n[e+y]*u;for(var m=a;m-- >0;)for(var _=e;_-- >0;)r[m]+=o[a*_+m]*n[_]}},{key:"compute_Bv",value:function(n,r){var e=this.N,t=this.scale,a=this.Bg;if(n.length!==e)throw new Error("Assertion failed.");this.compute_bv(n,a);for(var o=e;o-- >0;)r[o]=n[o]*t;this._compute_Bv(a,r)}},{key:"compute_bv",value:function(n,r){var e=this.m,t=this.M,a=this.N,o=this.dG,i=this.dXdG,s=this.dX,f=this.J,l=this.D,u=this.scale;if(n.length!==a)throw new Error("Assertion failed.");if(r.length!==2*t)throw new Error("Assertion failed.");r.fill(0,0,2*e);for(var h=0;h<e;h++)for(var d=0;d<a;d++)r[h]+=o[a*h+d]*n[d];for(var p=1;p<e;p++)for(var v=0;v<p;v++)r[e+p]+=i[t*p+v]*r[v]/i[t*v+v];for(var w=0;w<e;w++)r[w]/=l[w];for(var y=0;y<e;y++)for(var m=0;m<a;m++)r[e+y]+=s[a*y+m]*n[m]*u;(0,c._tril_solve)(e,t,1,f,0,r,e)}},{key:"compute_be",value:function(n,r){var e=this.m,t=this.M,a=this.N,o=this.dG,i=this.dXdG,s=this.dX,f=this.J,l=this.D,u=this.scale;if(n%1!==0)throw new Error("Assertion failed.");if(n|=0,!(n>=0))throw new Error("Assertion failed.");if(!(n<a))throw new Error("Assertion failed.");if(r.length!==2*t)throw new Error("Assertion failed.");r.fill(0,0,2*e);for(var h=0;h<e;h++)r[h]+=o[a*h+n];for(var d=1;d<e;d++)for(var p=0;p<d;p++)r[e+d]+=i[t*d+p]*r[p]/i[t*p+p];for(var v=0;v<e;v++)r[v]/=l[v];for(var w=0;w<e;w++)r[e+w]+=s[a*w+n]*u;(0,c._tril_solve)(e,t,1,f,0,r,e)}},{key:"compute_ubbv",value:function(n,r,e){var t=this.m,a=this.M,o=this.scale;if(r*=o,isNaN(r))throw new Error("Assertion failed.");if(n.length!==2*a)throw new Error("Assertion failed.");if(e.length!==2*a)throw new Error("Assertion failed.");for(var i=0,s=2*t;s-- >t;)i-=n[s]*e[s];for(var f=t;f-- >0;)i+=n[f]*e[f];return i+r}},{key:"compute_cauchyGeneralized",value:function(n,r,e,t){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=this.m,f=this.N,l=this.Bg,u=this.Bdx,c=this.Bei,d=this.scale,p=this.travels;if(n.length!==f)throw new Error("Assertion failed.");if(r.length!==f)throw new Error("Assertion failed.");if(e.length!==2*f)throw new Error("Assertion failed.");if(t.length!==f)throw new Error("Assertion failed.");if(!t.slice().sort((function(n,r){return n-r})).every((function(n,r){return n===r})))throw new Error("Assertion failed.");for(var v=f;v-- >0;){if(!(r[v]>=e[2*v+0]))throw new Error("Assertion failed.");if(!(r[v]<=e[2*v+1]))throw new Error("Assertion failed.")}for(var y=f;y-- >0;)if(0===n[y])p[y]=1/0;else{var m=e[2*y+(n[y]<0)];if(p[y]=(r[y]-m)/n[y],!(0<=p[y]))throw new Error("Assertion failed: "+p[y]);var _=0;while(Math.sign(n[y])*(r[y]-p[y]*n[y]-m)<0){if(++_>2)throw new Error("Assertion failed.");p[y]=(0,s.nextDown)(p[y])}if(n[y]<0&&r[y]-p[y]*n[y]>m)throw new Error("Assertion failed.");if(n[y]>0&&r[y]-p[y]*n[y]<m)throw new Error("Assertion failed.")}var g=0,b=0;this.compute_bv(n,l),u.fill(0,0,2*o);var A,E=w(n,n),x=this.compute_ubbv(l,E,l),M=0,k=(0,i.heap_sort_gen)(t,(function(r,e){var t=p[r],a=p[e];return t<a?-1:t>a?1:Math.abs(n[e])-Math.abs(n[r])})),N=h(k);try{n:for(N.s();!(A=N.n()).done;){var P=A.value;if(0===n[P]){var O,j=h(t.subarray(b));try{for(j.s();!(O=j.n()).done;){var S=O.value;if(!(Number.MAX_VALUE<p[S]))throw new Error("Assertion failed.");if(0!==n[S])throw new Error("Assertion failed.")}}catch(J){j.e(J)}finally{j.f()}break n}var R=e[2*P+(n[P]<0)],I=p[P]-g;if(!(0<=I))throw new Error("Assertion failed.");if(0!==I){var F=Math.min(I,E/x);if(!a&&!(F>=I))break n;if(0<F){for(var D=2*o;D-- >0;)u[D]-=F*l[D];g+=F}if(a&&!(F>=I))break n;g=p[P],this.compute_be(P,c);var q=this.compute_ubbv(c,-g*n[P],u),L=this.compute_ubbv(c,1,c),T=this.compute_ubbv(c,n[P],l);E-=n[P]*(n[P]+q)+I*x,x+=n[P]*(n[P]*L-2*T);for(var Y=2*o;Y-- >0;)l[Y]-=n[P]*c[Y];M+=n[P]*n[P]*g*(g*d/2-1),r[P]=R,n[P]*=1-g*d,++b}else r[P]=R,g=p[P],++b}}catch(J){N.e(J)}finally{N.f()}var G,U=h(t.subarray(b));try{for(U.s();!(G=U.n()).done;){var B=G.value;if(M+=n[B]*n[B]*g*(g*d/2-1),r[B]-=g*n[B],n[B]*=1-g*d,!(r[B]>=e[2*B+0]))throw new Error("Assertion failed.");if(!(r[B]<=e[2*B+1]))throw new Error("Assertion failed.")}}catch(J){U.e(J)}finally{U.f()}return M+=.5*this.compute_ubbv(u,0,u),this._compute_Bv(u,n),[b,M]}},{key:"compute_subspace_Hv",value:function(n,r,e,t){var a=this.m,o=this.M,i=this.N,s=this.dX,f=this.dXdG,c=this.dG,d=this.dGdG,p=this.M_WAAW,w=this.Bei,y=this.scale;if(!(e instanceof Int32Array))throw new Error("Assertion failed.");if(n.length!==i)throw new Error("Assertion failed.");if(r.length!==i)throw new Error("Assertion failed.");if(e.length!==i)throw new Error("Assertion failed.");if(t%1!==0)throw new Error("Assertion failed.");if(!(t>=0))throw new Error("Assertion failed.");if(!(t<=i))throw new Error("Assertion failed.");if(!e.slice().sort((function(n,r){return n-r})).every((function(n,r){return n===r})))throw new Error("Assertion failed.");for(var m=e.subarray(t),_=0;_<a;_++){var g,b=0,A=h(m);try{for(A.s();!(g=A.n()).done;){var E=g.value;b+=c[i*_+E]*n[E]}}catch(mn){A.e(mn)}finally{A.f()}w[_]=b/y}for(var x=0;x<a;x++){var M,k=0,N=h(m);try{for(N.s();!(M=N.n()).done;){var P=M.value;k+=s[i*x+P]*n[P]}}catch(mn){N.e(mn)}finally{N.f()}w[a+x]=k}if(0<t){for(var O=e.subarray(0,t),j=0;j<a;j++)for(var S=0;S<=j;S++){var R,I=0,F=h(O);try{for(F.s();!(R=F.n()).done;){var D=R.value;I+=c[i*j+D]*c[i*S+D]}}catch(mn){F.e(mn)}finally{F.f()}p[2*a*j+S]=I}for(var q=0;q<a;q++)for(var L=0;L<a;L++){var T,Y=0,G=h(O);try{for(G.s();!(T=G.n()).done;){var U=T.value;Y+=s[i*q+U]*c[i*L+U]}}catch(mn){G.e(mn)}finally{G.f()}p[2*a*(a+q)+L]=Y}for(var B=0;B<a;B++)for(var J=0;J<=B;J++){var z,C=0,X=h(O);try{for(X.s();!(z=X.n()).done;){var V=z.value;C+=s[i*B+V]*s[i*J+V]}}catch(mn){X.e(mn)}finally{X.f()}p[2*a*(a+B)+(a+J)]=C*y}}else for(var Q=0;Q<2*a;Q++)for(var W=0;W<=Q;W++)p[2*a*Q+W]=0;for(var H=0;H<a;H++)for(var K=0;K<=H;K++)p[2*a*H+K]-=d[o*H+K],p[2*a*H+K]/=y;for(var $=0;$<a;$++)p[2*a*$+$]-=f[o*$+$];for(var Z=0;Z<a;Z++)for(var nn=Z;nn<a;nn++)p[2*a*(a+Z)+nn]-=f[o*Z+nn];if(0<a)if(v)(0,l._ldl_decomp)(2*a,2*a,p,0),(0,l._ldl_solve)(2*a,2*a,1,p,0,w,0);else{var rn=this.Bdx,en=this.P;(0,u._pldlp_decomp)(2*a,2*a,p,0,en,0),(0,u._pldlp_solve)(2*a,2*a,1,p,0,en,0,w,0,rn)}r.fill(0,0,i);for(var tn=0;tn<a;tn++){var an,on=h(m);try{for(on.s();!(an=on.n()).done;){var sn=an.value;r[sn]+=c[i*tn+sn]*w[tn]}}catch(mn){on.e(mn)}finally{on.f()}}var fn,ln=h(m);try{for(ln.s();!(fn=ln.n()).done;){var un=fn.value;r[un]/=y}}catch(mn){ln.e(mn)}finally{ln.f()}for(var cn=0;cn<a;cn++){var hn,dn=h(m);try{for(dn.s();!(hn=dn.n()).done;){var pn=hn.value;r[pn]+=s[i*cn+pn]*w[a+cn]}}catch(mn){dn.e(mn)}finally{dn.f()}}var vn,wn=h(m);try{for(wn.s();!(vn=wn.n()).done;){var yn=vn.value;r[yn]+=n[yn]/y}}catch(mn){wn.e(mn)}finally{wn.f()}}},{key:"compute_Hv",value:function(n,r){var e=this.m,t=this.M,a=this.N,o=this.dX,i=this.dXdG,s=this.dG,f=this.dGdG,c=this.M_WAAW,h=this.Bei,d=this.scale;if(n.length!==a)throw new Error("Assertion failed.");if(r.length!==a)throw new Error("Assertion failed.");for(var p=0;p<e;p++){for(var w=0,y=0;y<a;y++)w+=s[a*p+y]*n[y];h[p]=w/d}for(var m=0;m<e;m++){for(var _=0,g=0;g<a;g++)_+=o[a*m+g]*n[g];h[e+m]=_}for(var b=0;b<2*e;b++)for(var A=0;A<=b;A++)c[2*e*b+A]=0;for(var E=0;E<e;E++)for(var x=0;x<=E;x++)c[2*e*E+x]-=f[t*E+x],c[2*e*E+x]/=d;for(var M=0;M<e;M++)c[2*e*M+M]-=i[t*M+M];for(var k=0;k<e;k++)for(var N=k;N<e;N++)c[2*e*(e+k)+N]-=i[t*k+N];if(0<e)if(v)(0,l._ldl_decomp)(2*e,2*e,c,0),(0,l._ldl_solve)(2*e,2*e,1,c,0,h,0);else{var P=this.Bdx,O=this.P;(0,u._pldlp_decomp)(2*e,2*e,c,0,O,0),(0,u._pldlp_solve)(2*e,2*e,1,c,0,O,0,h,0,P)}r.fill(0,0,a);for(var j=0;j<e;j++)for(var S=0;S<a;S++)r[S]+=s[a*j+S]*h[j];for(var R=0;R<a;R++)r[R]/=d;for(var I=0;I<e;I++)for(var F=0;F<a;F++)r[F]+=o[a*I+F]*h[e+I];for(var D=0;D<a;D++)r[D]+=n[D]/d}},{key:"J",get:function(){var n=this.m,r=this.M,e=(this.N,this.dXdX),t=this.dXdG,a=this.scale,o=this._J;if(this._J_invalid){this._J_invalid=!1;for(var i=0;i<n;i++)for(var s=0;s<=i;s++)o[r*i+s]=a*e[r*i+s];for(var l=0;l<n;l++)for(var u=0;u<=l;u++)for(var c=0;c<u;c++)o[r*l+u]+=t[r*l+c]/t[r*c+c]*t[r*u+c];(0,f._cholesky_decomp)(n,r,o,0)}return o}},{key:"scale",get:function(){return this._scale},set:function(n){if(n*=1,isNaN(n))throw new Error("Assertion failed.");if(!(0<n))throw new Error("Assertion failed.");this._scale!==n&&(this._scale=n,this._J_invalid=!0)}}]),n}();r.LBFGSB_Solver=y},78668:function(n,r,e){"use strict";e(21703),e(48675),e(3462),e(85827);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.TrustRegionSolverLBFGS=void 0;var a=t(e(42989)),o=t(e(16125)),i=t(e(39885)),s=e(30065),f=e(30716),l=e(27357),u=e(93393),c=1,h=2,d=3,p=function(n,r){if(n.length%1!==0)throw new Error("Assertion failed.");if(r.length%1!==0)throw new Error("Assertion failed.");if(n.length!==r.length)throw new Error("Assertion failed.");for(var e=0,t=n.length;t-- >0;)e+=n[t]*r[t];return e},v=function(){function n(r,e,t){var i=t.updateTol,f=t.historySize,u=t.scaleInit;if((0,o["default"])(this,n),!(r instanceof Function))throw new Error("new TrustRegionSolverLBFGS(fg, x0, updateTol): fg must be Function.");if(u*=1,!(0<u))throw new Error("TrustRegionSolverLBFGS(fg,x0,opt): opt.scaleInit must be greater than 0.");if(!isFinite(u))throw new Error("TrustRegionSolverLBFGS(fg,x0,opt): opt.scaleInit must be greater than 0.");if(this.fg=r,this.report_x=e=(0,s.array)("float64",e),1!==e.ndim)throw new Error("new TrustRegionSolverLBFGS(fg, x0, updateTol): x0.ndim must be 1.");var h=r(new s.NDArray(e.shape,e.data.slice())),d=(0,a["default"])(h,2),p=d[0],v=d[1];if(this.report_loss=p*=1,this.report_loss_grad=v=(0,s.array)("float64",v),isNaN(p))throw new Error("new TrustRegionSolverLBFGS(fg, x0, updateTol): fg must have signature float[N] => [float,float[N]].");if(1!==v.ndim)throw new Error("new TrustRegionSolverLBFGS(fg, x0, updateTol): fg must have signature float[N] => [float,float[N]].");var w=(0,a["default"])(e.shape,1),y=w[0];if(v.shape[0]!==y)throw new Error("new TrustRegionSolverLBFGS(fg, x0, updateTol): fg must have signature float[N] => [float,float[N]].");this.M=f,this.N=y,this.scaleInit=u=1/u,this.lbfgs=new l.LBFGSB_Solver(f,y),this.lbfgs.scale=u,this.D=new Float64Array(y),this.D.fill(Math.sqrt(u)),this.X0=Float64Array.from(e),this.G0=Float64Array.from(v),this.last_X=Float64Array.from(e),this.last_G=Float64Array.from(v),this.dg=new Float64Array(y),this.loss=p,this.bv=new Float64Array(2*f),this.newton_dX=new Float64Array(y),this.updateTol=i,this._report_state=c,Object.seal(this)}return(0,i["default"])(n,[{key:"wiggle",value:function(){var n=this.lbfgs,r=n.m;if(0===r)throw new u.OptimizationNoProgressError("Too many unsuccessfull iterations.");if(!(0<r))throw new Error("Assertion failed.");n.forget(n.m+1>>>1)}},{key:"report",value:function(){if(this._report_state!==c)throw new Error("TrustRegionSolverLSQ::report: can only be called once after each makeConsideredMove() but not directly after considerMove(dX).");this._report_state=h;var n=[this.report_x,this.report_loss,this.report_loss_grad];return this.report_x=this.report_loss_grad=null,this.report_loss=NaN,n}},{key:"considerMove",value:function(n){var r=this.N,e=this.D,t=this.updateTol,o=this.lbfgs,i=this.loss,f=this.bv,l=this.X0,u=this.G0,c=this.dg,h=this.last_X,v=this.last_G;this.scaleSharpness;if(this._report_state=d,r!==n.length)throw new Error("Assertion failed.");for(var w=Int32Array.of(r),y=new Float64Array(r),m=r;m-- >0;)y[m]=l[m]+n[m];var _=this.fg(new s.NDArray(w,y.slice())),g=(0,a["default"])(_,2),b=g[0],A=g[1];if(b*=1,A=(0,s.array)("float64",A),isNaN(b))throw new Error("Assertion failed.");if(1!==A.ndim)throw new Error("Assertion failed.");if(A.shape[0]!==r)throw new Error("Assertion failed.");this.report_x=new s.NDArray(w,y),this.report_loss=b,this.report_loss_grad=A,A=A.data;for(var E=r;E-- >0;)y[E]-=l[E];for(var x=i,M=r;M-- >0;)x+=u[M]*y[M];o.compute_bv(y,f),x+=.5*o.compute_ubbv(f,p(y,y),f);for(var k=y,N=r;N-- >0;)c[N]=A[N]-v[N];for(var P=r;P-- >0;)k[P]=l[P]+n[P],k[P]-=h[P];var O=c.reduce((function(n,r){return Math.max(n,Math.abs(r))}),0);if(0<O){for(var j=0,S=0,R=r;R-- >0;){var I=k[R]/O,F=c[R]/O;j+=F*F,S+=I*F}if(1<=j){if(!isFinite(S))throw new Error("Assertion failed.");if(t*j<S){o.update(k,c),o.scale=j/S;for(var D=r;D-- >0;){o.compute_be(D,f);var q=o.compute_ubbv(f,1,f);if(!(0<q))throw new Error("Assertion failed: LBFGS model not positive definite.");e[D]=Math.max(e[D],Math.sqrt(q))}for(var L=r;L-- >0;)h[L]=l[L]+n[L];for(var T=r;T-- >0;)v[T]=A[T]}}}for(var Y=r;Y-- >0;)y[Y]=l[Y]+n[Y];return[x,this.report_loss]}},{key:"makeConsideredMove",value:function(){if(this._report_state!==d)throw new Error("Assertion failed.");this._report_state=c,this.loss=this.report_loss;for(var n=this.N,r=this.X0,e=this.G0,t=this.report_x.data,a=this.report_loss_grad.data,o=n;o-- >0;)r[o]=t[o];for(var i=n;i-- >0;)e[i]=a[i]}},{key:"scaledNorm",value:function(n){var r=this.N,e=this.D;if(n.length!==r)throw new Error("Assertion failed.");for(var t=new f.FrobeniusNorm,a=r;a-- >0;)t.include(e[a]*n[a]);return t.result}},{key:"cauchyTravel",value:function(){for(var n=this.N,r=this.lbfgs,e=this.G0,t=this.bv,a=0,o=n;o-- >0;)a+=e[o]*e[o];r.compute_bv(e,t);var i=r.compute_ubbv(t,p(e,e),t);if(isNaN(i))throw new Error("Assertion failed: "+i);return 0===a?0:0===i?-1/0:-a/i}},{key:"computeNewton",value:function(){var n=this.N,r=this.lbfgs,e=this.G0,t=this.newton_dX;if(r.compute_Hv(e,t),t.some(isNaN))throw new Error("Assertion failed.");for(var a=n;a-- >0;)t[a]*=-1}}]),n}();r.TrustRegionSolverLBFGS=v},86173:function(n,r,e){"use strict";e(21703),e(48675),e(3462);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.TrustRegionSolverLSQ=void 0;var a=t(e(42989)),o=t(e(16125)),i=t(e(39885)),s=e(30065),f=e(52894),l=e(30716),u=e(5323),c=e(14748),h=e(63119),d=e(93393),p=1,v=2,w=3,y=function(){function n(r,e){if((0,o["default"])(this,n),!(r instanceof Function))throw new Error("new TrustRegionSolverLSQ(fJ, x0): fJ must be Function.");if(this.fJ=r,this.report_x=e=(0,s.array)("float64",e),1!==e.ndim)throw new Error("new TrustRegionSolverLSQ(fJ, x0): x0.ndim must be 1.");var t=r(new s.NDArray(e.shape,e.data.slice())),i=(0,a["default"])(t,2),f=i[0],l=i[1];if(this.report_f=f=(0,s.array)("float64",f),this.report_J=l=(0,s.array)("float64",l),1!==f.ndim)throw new Error("new TrustRegionSolverLSQ(fJ, x0): fJ(x) returned [f,J] with f.ndim !== 1.");if(2!==l.ndim)throw new Error("new TrustRegionSolverLSQ(fJ, x0): fJ(x) returned [f,J] with J.ndim !== 2.");var u=(0,a["default"])(l.shape,2),c=u[0],h=u[1];if(f.shape[0]!==c)throw new Error("new TrustRegionSolverLSQ(fJ, x0): fJ(x) returned [f,J] where J.shape[0] did not match f.shape[0].");if(e.shape[0]!==h)throw new Error("new TrustRegionSolverLSQ(fJ, x0): fJ(x) returned [f,J] where J.shape[1] did not match x0.shape[0].");this.loss=this.report_loss=NaN,this.report_loss_grad=null,this.M=c,this.N=h;var d=Math.min(c,h),p=Math.max(c,h+1);this.D=new Float64Array(h),this.X0=new Float64Array(1*h),this.F0=new Float64Array(1*c),this.J0=new Float64Array(c*h),this.G0=new Float64Array(h),this.tmp=new Float64Array(2*h),this.TMP=new Float64Array(p*h),this.newton_P=new Int32Array(h),this.newton_Q=new Int32Array(h),this.newton_R=new Float64Array(d*d),this.newton_V=new Float64Array(h*h),this.newton_UF=new Float64Array(1*c),this.newton_dX=new Float64Array(1*h),this.regularized_R0=new Float64Array(d*h),this.regularized_QF=new Float64Array(1*p),this.regularized_dX=new Float64Array(1*h),this.rank=-1,this._report_state=w,Object.seal(this),this._considerMove_computeLoss(),this.makeConsideredMove()}return(0,i["default"])(n,[{key:"wiggle",value:function(){throw new d.OptimizationNoProgressError("Too many unsuccessfull iterations.")}},{key:"_considerMove_computeLoss",value:function(){for(var n=this.M,r=this.N,e=this.report_f.data,t=this.report_J.data,a=0,o=n;o-- >0;){var i=e[o];a+=i*i/n}for(var f=new Float64Array(r),l=n;l-- >0;)for(var u=r;u-- >0;)f[u]+=t[r*l+u]*e[l]/n*2;this.report_loss=a,this.report_loss_grad=new s.NDArray(Int32Array.of(r),f)}},{key:"scaledNorm",value:function(n){var r=this.N,e=this.D;if(n.length!==r)throw new Error("Assertion failed.");for(var t=new l.FrobeniusNorm,a=r;a-- >0;)t.include(e[a]*n[a]);return t.result}},{key:"cauchyTravel",value:function(){for(var n=this.M,r=this.N,e=this.J0,t=this.G0,a=0,o=0,i=r;i-- >0;)a+=t[i]*t[i];for(var s=n;s-- >0;){for(var f=0,l=r;l-- >0;)f+=e[r*s+l]*t[l];o+=f*f}return 0===a?0:0===o?-1/0:-a/o}},{key:"report",value:function(){if(this._report_state!==p)throw new Error("TrustRegionSolverLSQ::report: can only be called once after each makeConsideredMove() but not directly after considerMove(dX).");this._report_state=v;var n=[this.report_x,this.report_loss,this.report_loss_grad,this.report_f,this.report_J];return this.report_x=this.report_f=this.report_J=this.report_loss_grad=null,this.report_loss=NaN,n}},{key:"considerMove",value:function(n){var r=this.M,e=this.N,t=this.X0,o=this.F0,i=this.J0;if(this._report_state=w,e!==n.length)throw new Error("Assertion failed.");for(var f=Int32Array.of(e),l=new Float64Array(e),u=e;u-- >0;)l[u]=t[u]+n[u];var c=this.fJ(new s.NDArray(f,l.slice())),h=(0,a["default"])(c,2),d=h[0],p=h[1];if(d=(0,s.array)("float64",d),p=(0,s.array)("float64",p),1!==d.ndim)throw new Error("Assertion failed.");if(2!==p.ndim)throw new Error("Assertion failed.");if(d.shape[0]!==r)throw new Error("Assertion failed.");if(p.shape[0]!==r)throw new Error("Assertion failed.");if(p.shape[1]!==e)throw new Error("Assertion failed.");this.report_x=new s.NDArray(f,l),this.report_f=d,this.report_J=p,this._considerMove_computeLoss();for(var v=0,y=r;y-- >0;){for(var m=0,_=e;_-- >0;)m+=i[e*y+_]*(l[_]-t[_]);m+=o[y],v+=m*m/r}return[v,this.report_loss]}},{key:"makeConsideredMove",value:function(){if(this._report_state!==w)throw new Error("Assertion failed.");this._report_state=p,this.rank=-1,this.loss=this.report_loss;for(var n=this.M,r=this.N,e=this.D,t=this.tmp,a=this.X0,o=this.F0,i=this.J0,s=this.G0,f=this.report_f.data,l=this.report_J.data,c=this.report_x.data,h=r;h-- >0;)a[h]=c[h];for(var d=n;d-- >0;)o[d]=f[d];for(var v=n*r;v-- >0;)i[v]=l[v];s.fill(0);for(var y=n;y-- >0;)for(var m=r;m-- >0;)s[m]+=i[r*y+m]*o[y];if(t.length!==2*r)throw new Error("Assertion failed.");t.fill(0);for(var _=0;_<n;_++)(0,u._norm_update)(t,i,r*_,0);for(var g=0;g<r;g++)e[g]=Math.max(e[g],(0,u._norm)(t,g))}},{key:"computeNewton",value:function(){if(!(0<=this.rank)){for(var n=this.M,r=this.N,e=this.D,t=this.J0,a=this.F0,o=this.tmp,i=this.TMP,s=this.newton_P,f=this.newton_Q,l=this.newton_V,d=this.newton_dX,p=this.newton_UF,v=Math.min(n,r),w=r;w-- >0;)s[w]=w;for(var y=n*r;y-- >0;)i[y]=t[y];for(var m=n;m-- >0;)p[m]=a[m];(0,u._rrqr_decomp_inplace)(n,r,1,i,0,p,0,s,0,o);for(var _=this.regularized_R0,g=v*r;g-- >0;)_[g]=i[g];var b=this.rank=(0,u._rrqr_rank)(n,r,i,0,o);if(b<r){for(var A=r;A-- >0;){var E=e[s[A]];if(0!==E)for(var x=b;x-- >0;)i[r*x+A]/=E}for(var M=r;M-- >0;)f[M]=s[M];l.fill(0),(0,h._urv_decomp_full)(b,r,i,0,l,0,f,0);for(var k=b;k-- >0;)o[k]=-p[k];for(var N=this.newton_R,P=b;P-- >0;)for(var O=b;O-- >0;)N[v*P+O]=i[r*P+O];(0,c._triu_solve)(b,v,1,N,0,o,0),d.fill(0);for(var j=b;j-- >0;)for(var S=r;S-- >0;)d[S]+=l[r*j+S]*o[j];for(var R=r;R-- >0;){var I=e[R];0!==I&&(d[R]/=I)}}else{for(var F=r;F-- >0;)o[F]=-p[F];(0,c._triu_solve)(r,r,1,i,0,o,0);for(var D=r;D-- >0;)d[s[D]]=o[D]}}}},{key:"computeNewtonRegularized",value:function(n){this.computeNewton();var r=this.M,e=this.N,t=this.D,o=this.rank,i=this.tmp,s=this.TMP,l=this.newton_P,u=this.newton_UF,h=this.newton_R,d=this.newton_V,p=this.newton_dX,v=this.regularized_R0,w=this.regularized_dX,y=this.regularized_QF,m=Math.min(r,e);if(0===n){for(var _=e;_-- >0;)w[_]=p[_];if(o<e){var g=this.scaledNorm(w);if(0===g)return[0,0];i.fill(0,0,o);for(var b=o;b-- >0;)for(var A=e;A-- >0;)i[b]+=d[e*b+A]*t[A]*w[A];(0,c._triu_t_solve)(o,m,1,h,0,i,0);for(var E=0,x=o;x-- >0;){var M=i[x];E+=M*M}return E/=-g,[g,E]}}if(!(0<=n))throw new Error("TrustRegionSolverLSQ.prototype.computeMinRegularized(λ): λ must be non-negative.");for(var k=o*e;k-- >0;)s[k]=v[k];if(0!==n){for(var N=o;N-- >0;)y[N]=-u[N];s.fill(0,o*e,(e+1)*e),y.fill(0,o,e+1);for(var P=Math.sqrt(n),O=e;O-- >0;){var j=t[l[O]];if(0===j?j=1:j*=P,!(j>0))throw new Error("TrustRegionSolverLSQ.prototype.computeMinRegularized(λ): λ too small (caused underflow).");if(o<=O)s[e*O+O]=j;else{s[e*e+O]=j,y[e]=0;for(var S=O;S<e;S++){var R=e*S+S,I=e*e+S,F=s[I];if(0!==F){var D=s[R],q=(0,f._giv_rot_qr)(D,F),L=(0,a["default"])(q,3),T=L[0],Y=L[1],G=L[2];s[I]=0,0!==Y&&(s[R]=G,(0,f._giv_rot_rows)(s,e-1-S,R+1,I+1,T,Y),(0,f._giv_rot_rows)(y,1,S,e,T,Y))}}}}for(var U=e;U-- >0;)i[U]=y[U];(0,c._triu_solve)(e,e,1,s,0,i,0);for(var B=e;B-- >0;)w[l[B]]=i[B]}else if(o!==e)throw new Error("Assertion failed.");var J=this.scaledNorm(w);if(0===J)return[0,0];for(var z=e;z-- >0;){var C=l[z];i[z]=w[C]*t[C]*t[C]}(0,c._triu_t_solve)(e,e,1,s,0,i,0);for(var X=0,V=e;V-- >0;){var Q=i[V];X+=Q*Q}return X/=-J,[J,X]}}]),n}();r.TrustRegionSolverLSQ=y},66153:function(n,r,e){"use strict";e(21703),e(48675),e(3462);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.odr_gen=v,r.TrustRegionSolverTLS=void 0;var a=t(e(16125)),o=t(e(39885)),i=t(e(25069)),s=t(e(42989)),f=e(30065),l=e(52894),u=e(30716),c=e(99777),h=e(5323),d=e(14748),p=e(93393);function v(n){var r=function r(e,t,a,o){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!(a instanceof Function))throw new Error("".concat(c,"(x,y, fgg,p0): fgg must be function."));e=(0,f.array)("float64",e),t=(0,f.array)("float64",t),o=(0,f.asarray)("float64",o);var u="dx0"in l?(0,f.array)("float64",l.dx0):e.mapElems("float64",(function(){return 0})),c=r.name;if(1!==o.ndim)throw new Error("".concat(c,"(x,y, fgg,p0): p0.ndim must be 1."));if(1!==e.ndim&&2!==e.ndim)throw new Error("".concat(c,"(x,y, fgg,p0): x.ndim must be 1 or 2."));if(1!==t.ndim&&2!==t.ndim)throw new Error("".concat(c,"(x,y, fgg,p0): y.ndim must be 1 or 2."));if(e.ndim!==u.ndim)throw new Error("".concat(c,"(x,y, fgg,p0, opt): opt.dx0 and x must have same ndim."));var h=(0,s["default"])(e.shape,2),d=h[0],p=h[1],v=void 0===p?1:p,w=(0,s["default"])(t.shape,2),y=w[0],m=w[1],g=void 0===m?1:m,b=(0,s["default"])(o.shape,1),A=b[0];if(2==e.ndim&&v!==u.shape[1])throw new Error("".concat(c,"(x,y, fgg,p0, opt): opt.dx0 and x must have same shape."));if(d!==u.shape[0])throw new Error("".concat(c,"(x,y, fgg,p0, opt): opt.dx0 and x must have same shape."));if(d!==y)throw new Error("".concat(c,"(x,y, fgg,p0, opt): x.shape[0] must equal y.shape[0]."));var E=e.ndim,x=t.ndim,M=e.shape.slice(1),k=new Float64Array(d*g),N=new Float64Array(d*g*A),P=new Float64Array(d*g*v),O=new f.NDArray(t.shape,k),j=new f.NDArray(Int32Array.of.apply(Int32Array,(0,i["default"])(t.shape).concat([A])),N),S=new f.NDArray(Int32Array.of.apply(Int32Array,(0,i["default"])(t.shape).concat((0,i["default"])(e.shape.subarray(1)))),P);e=e.data,t=t.data;var R=function(n,r){if(!n.dtype.startsWith("float"))throw new Error("Assertion failed.");if(!r.dtype.startsWith("float"))throw new Error("Assertion failed.");if(1!==n.ndim)throw new Error("Assertion failed.");if(n.shape[0]!==A)throw new Error("Assertion failed.");if(E!==r.ndim)throw new Error("Assertion failed.");if(1!==E&&r.shape[1]!==v)throw new Error("Assertion failed.");if(r.shape[0]!==d)throw new Error("Assertion failed.");var o=a(n);r=r.data;for(var i=0;i<d;i++){for(var l=r.slice(v*i,v*(i+1)),u=v;u-- >0;)l[u]+=e[v*i+u];var c=o(new f.NDArray(M,l)),h=(0,s["default"])(c,3),p=h[0],w=h[1],y=h[2];if(p=(0,f.asarray)("float",p),w=(0,f.asarray)("float",w),y=(0,f.asarray)("float",y),p.ndim!==x-1)throw new Error("Assertion failed.");if(w.ndim!==x)throw new Error("Assertion failed.");if(y.ndim!==x-2+E)throw new Error("Assertion failed.");if(1!==x){if(p.shape[0]!==g)throw new Error("Assertion failed.");if(w.shape[0]!==g)throw new Error("Assertion failed.");if(y.shape[0]!==g)throw new Error("Assertion failed.")}if(1!==E&&y.shape[x-1]!==v)throw new Error("Assertion failed.");if(w.shape[x-1]!==A)throw new Error("Assertion failed.");p=p.data,w=w.data,y=y.data;for(var m=g;m-- >0;)k[g*i+m]=p[m]-t[g*i+m];for(var _=A*g;_-- >0;)N[A*g*i+_]=w[_];for(var b=v*g;b-- >0;)P[v*g*i+b]=y[b]}return[O,j,S]};return n(new _(R,o,u),l)};return Object.defineProperty(r,"name",{value:"odr".concat(n.name,"_gen")}),r}var w=1,y=2,m=3,_=function(){function n(r,e,t){if((0,a["default"])(this,n),!(r instanceof Function))throw new Error("Assertion failed.");if(e=(0,f.array)("float64",e),t=(0,f.array)("float64",t),1!==e.ndim)throw new Error("Assertion failed.");if(1!==t.ndim&&2!==t.ndim)throw new Error("Assertion failed.");var o=(0,s["default"])(t.shape,2),i=o[0],l=o[1],u=void 0===l?1:l,c=(0,s["default"])(e.shape,1),h=c[0],d=r(new f.NDArray(e.shape,e.data.slice()),new f.NDArray(t.shape,t.data.slice())),p=(0,s["default"])(d,3),v=p[0],w=p[1],m=p[2];if(v=(0,f.array)("float64",v),w=(0,f.array)("float64",w),m=(0,f.array)("float64",m),1!==v.ndim&&2!==v.ndim)throw new Error("Assertion failed.");if(w.ndim!==v.ndim+1)throw new Error("Assertion failed.");if(m.ndim!==v.ndim+t.ndim-1)throw new Error("Assertion failed.");var _=(0,s["default"])(v.shape,2),g=_[0],b=_[1],A=void 0===b?1:b;if(i!==g)throw new Error("Assertion failed.");if(w.shape[0]!==i)throw new Error("Assertion failed.");if(m.shape[0]!==i)throw new Error("Assertion failed.");if(2===v.ndim){if(w.shape[1]!==A)throw new Error("Assertion failed.");if(m.shape[1]!==A)throw new Error("Assertion failed.")}if(2===t.ndim&&m.shape[v.ndim]!==u)throw new Error("Assertion failed.");if(w.shape[v.ndim]!==h)throw new Error("Assertion failed.");var E=i*u+i*A,x=i*u+h,M=Math.min(u,A),k=Math.min(i*u+h+1,i*A),N=new Float64Array(i*u),P=new Float64Array(i*A*u),O=new Float64Array(i*A*h),j=new Float64Array(x),S=new Float64Array(x),R=new Float64Array(E),I=new Float64Array(x),F=new Float64Array(M*(M+3)>>>1),D=A<=u?P:new Float64Array(i*u*u+u),q=A<=u?O:new Float64Array(k*h),L=A<=u?R.subarray(i*u):new Float64Array(k),T=new Float64Array(i*u),Y=new Float64Array(i*M*u),G=new Float64Array(k*h),U=new Int32Array(h),B=new Float64Array(x),J=new Float64Array(i*u),z=new Float64Array(i*M*u),C=new Float64Array(Math.max(k,h+1)*h),X=new Int32Array(h),V=new Float64Array(x),Q=new Float64Array(Math.max(i*u+k,x+1)),W=new Float64Array(2*h),H=N.slice(),K=m.data,$=w.data;H.fill(1),Object.assign(this,{MX:i,NX:u,NY:A,NP:h,M:E,N:x,loss:0,rank:-1,_report_state:y,fgg:r,report_p:e,report_dx:t,report_loss:NaN,report_dloss_dp:null,report_dloss_ddx:null,report_dy:v,p_shape:e.shape,x_shape:t.shape,y_shape:v.shape,QF:Q,J11:N,J21:P,J22:O,tmp:F,prepared_QF:L,prepared_J21:D,prepared_J22:q,prepared:!1,newton_R11:T,newton_R21:Y,newton_R22:G,newton_P:U,newton_dX:B,regularized_R11:J,regularized_R21:z,regularized_R22:C,regularized_P:X,regularized_dX:V,_consider_J11:H,_consider_J21:K,_consider_J22:$,D:j,norm:W,X0:S,F0:R,G0:I}),Object.seal(this),this._considerMove_computeLoss(),this.makeConsideredMove()}return(0,o["default"])(n,[{key:"_considerMove_computeLoss",value:function(){var n=this.M,r=this.MX,e=this.NX,t=this.NY,a=this.NP,o=this.x_shape,i=this.p_shape,s=this._consider_J11,l=this._consider_J21,u=this._consider_J22;this._report_state=m;for(var c=new Float64Array(a),h=new Float64Array(r*e),d=this.report_dx.data,p=this.report_dy.data,v=r*t;v-- >0;)for(var w=a;w-- >0;)c[w]+=p[v]*u[a*v+w]/n*2;for(var y=r;y-- >0;)for(var _=e;_-- >0;)h[e*y+_]=s[e*y+_]*d[e*y+_]/n*2;for(var g=r;g-- >0;)for(var b=t;b-- >0;)for(var A=e;A-- >0;)h[e*g+A]+=l[e*(t*g+b)+A]*p[t*g+b]/n*2;for(var E=0,x=r*e;x-- >0;){var M=d[x];E+=M*M/n}for(var k=r*t;k-- >0;){var N=p[k];E+=N*N/n}this.report_dloss_dp=new f.NDArray(i,c),this.report_dloss_ddx=new f.NDArray(o,h),this.report_loss=E}},{key:"considerMove",value:function(n){var r=this.M,e=this.N,t=this.MX,a=this.NX,o=this.NY,i=this.NP,l=this.x_shape,u=this.y_shape,c=this.p_shape,h=this._consider_J11,d=this._consider_J21,p=this._consider_J22,v=this.J11,w=this.J21,y=this.J22,m=this.F0,_=this.X0,g=this.fgg;if(n.length!==e)throw new Error("Assertion failed.");var b=new Float64Array(i),A=new Float64Array(t*a);this.report_p=new f.NDArray(c,b),this.report_dx=new f.NDArray(l,A);for(var E=i;E-- >0;){var x=t*a+E;b[E]=_[x]+n[x]}for(var M=t*a;M-- >0;)A[M]=_[M]+n[M];var k=g(new f.NDArray(c,b.slice()),new f.NDArray(l,A.slice())),N=(0,s["default"])(k,3),P=N[0],O=N[1],j=N[2];if(P=(0,f.array)("float64",P),O=(0,f.asarray)("float64",O),j=(0,f.asarray)("float64",j),P.ndim!==u.length)throw new Error("Assertion failed.");if(O.ndim!==u.length+1)throw new Error("Assertion failed.");if(j.ndim!==u.length+l.length-1)throw new Error("Assertion failed.");if(P.shape[0]!==t)throw new Error("Assertion failed.");if(O.shape[0]!==t)throw new Error("Assertion failed.");if(j.shape[0]!==t)throw new Error("Assertion failed.");if(O.shape[u.length]!==i)throw new Error("Assertion failed.");if(2===l.length&&j.shape[u.length]!==a)throw new Error("Assertion failed.");if(2===u.length){if(P.shape[1]!==o)throw new Error("Assertion failed.");if(O.shape[1]!==o)throw new Error("Assertion failed.");if(j.shape[1]!==o)throw new Error("Assertion failed.")}this.report_dy=P,j=j.data,O=O.data;for(var S=t*o*a;S-- >0;)d[S]=j[S];for(var R=t*o*i;R-- >0;)p[R]=O[R];h.fill(1),this._considerMove_computeLoss();for(var I=0,F=t*a;F-- >0;){var D=m[F]+v[F]*(A[F]-_[F]);I+=D*D/r}for(var q=t;q-- >0;)for(var L=o;L-- >0;){for(var T=m[t*a+o*q+L],Y=a;Y-- >0;)T+=w[a*(o*q+L)+Y]*(A[a*q+Y]-_[a*q+Y]);for(var G=i;G-- >0;)T+=y[i*(o*q+L)+G]*(b[G]-_[t*a+G]);I+=T*T/r}return[I,this.report_loss]}},{key:"makeConsideredMove",value:function(){if(this._report_state!==m)throw new Error("Assertion failed.");this._report_state=w,this.loss=this.report_loss,this.rank=-1,this.prepared=!1;for(var n=this.MX,r=this.NX,e=this.NY,t=this.NP,a=this._consider_J11,o=this.J11,i=this._consider_J21,s=this.J21,f=this._consider_J22,l=this.J22,c=this.D,h=this.X0,d=this.F0,p=this.G0,v=n*r;v-- >0;)o[v]=a[v];for(var y=n*e*r;y-- >0;)s[y]=i[y];for(var _=n*e*t;_-- >0;)l[_]=f[_];for(var g=this.report_p.data,b=this.report_dx.data,A=this.report_dy.data,E=t;E-- >0;)h[n*r+E]=g[E];for(var x=n*r;x-- >0;)h[x]=b[x];for(var M=n*e;M-- >0;)d[n*r+M]=A[M];for(var k=n*r;k-- >0;)d[k]=h[k];for(var N=n*r;N-- >0;)p[N]=o[N]*d[N];for(var P=n;P-- >0;)for(var O=e;O-- >0;)for(var j=r;j-- >0;)p[r*P+j]+=s[r*(e*P+O)+j]*d[n*r+e*P+O];p.fill(0,n*r,n*r+t);for(var S=n*e;S-- >0;)for(var R=t;R-- >0;)p[n*r+R]+=l[t*S+R]*d[n*r+S];for(var I=new u.FrobeniusNorm,F=n;F-- >0;)for(var D=r;D-- >0;){I.reset(),I.include(o[r*F+D]);for(var q=e;q-- >0;)I.include(s[r*(e*F+q)+D]);var L=r*F+D;c[L]=Math.max(c[L],I.result)}for(var T=t;T-- >0;){I.reset();for(var Y=n*e;Y-- >0;)I.include(l[t*Y+T]);var G=n*r+T;c[G]=Math.max(c[G],I.result)}}},{key:"cauchyTravel",value:function(){for(var n=this.N,r=this.MX,e=this.NX,t=this.NY,a=this.NP,o=this.J11,i=this.J21,s=this.J22,f=this.G0,l=0,u=0,c=n;c-- >0;)l+=f[c]*f[c];for(var h=r;h-- >0;)for(var d=t;d-- >0;){for(var p=0,v=a;v-- >0;)p+=s[a*(t*h+d)+v]*f[r*e+v];for(var w=e;w-- >0;)p+=i[e*(t*h+d)+w]*f[e*h+w];u+=p*p}for(var y=r*e;y-- >0;){var m=o[y]*f[y];u+=m*m}return 0===l?0:0===u?-1/0:-l/u}},{key:"report",value:function(){if(this._report_state!==w)throw new Error("TrustRegionSolverLSQ::report: can only be called once after each makeConsideredMove() but not directly after considerMove(dX).");this._report_state=y;var n=[this.report_p,this.report_dx,this.report_loss,this.report_dloss_dp,this.report_dloss_ddx,this.report_dy];return this.report_p=this.report_dx=this.report_dy=this.report_dloss_dp=this.report_dloss_ddx=null,this.report_loss=NaN,n}},{key:"wiggle",value:function(){throw new p.OptimizationNoProgressError("Too many unsuccessfull iterations.")}},{key:"__DEBUG_J",value:function(n,r){if(n%1!==0)throw new Error("Assertion failed.");if(r%1!==0)throw new Error("Assertion failed.");if(n|=0,r|=0,!(0<=n))throw new Error("Assertion failed.");if(!(0<=r))throw new Error("Assertion failed.");var e=this.M,t=this.N,a=this.MX,o=this.NX,i=this.NY,s=this.NP,f=this.J11,l=this.J21,u=this.J22;if(!(n<e))throw new Error("Assertion failed.");if(!(r<t))throw new Error("Assertion failed.");if(n<a*o)return n===r?f[n]:0;if(n-=a*o,r<a*o){var c=n/i|0,h=r/o|0;return c!==h?0:(n%=i,r%=o,l[o*(i*c+n)+r])}return r-=a*o,u[s*n+r]}},{key:"scaledNorm",value:function(n){var r=this.N,e=this.D;if(n.length!==r)throw new Error("Assertion failed.");for(var t=new u.FrobeniusNorm,a=r;a-- >0;)t.include(e[a]*n[a]);return t.result}},{key:"_qr_decomp",value:function(n,r,e,t,a){var o=this.MX,i=this.NX,f=this.NY,u=this.NP,c=this.norm,d=this.tmp,p=this.prepared_J21,v=this.prepared_J22,w=Math.min(i,f),y=Math.min(o*f,o*i+u);if(!(t instanceof Int32Array))throw new Error("Assertion failed.");if(t.length!==u)throw new Error("Assertion failed.");if(n.length!==o*i)throw new Error("Assertion failed.");if(r.length!==o*w*i)throw new Error("Assertion failed.");if(e.length!==(u+1)*u&&e.length!==Math.min(o*f,o*i+u+1)*u)throw new Error("Assertion failed: "+JSON.stringify({len:e.length,MX:o,NX:i,NP:u}));if(1===w)for(var m=0;m<o;m++){for(var _=1,g=0;g<i;g++){var b=i*m+g,A=n[b],E=p[b]*_,x=(0,l._giv_rot_qr)(A,E),M=(0,s["default"])(x,3),k=M[0],N=M[1],P=M[2];if(0===P)throw new Error("Assertion failed: Sparse part of J must not be singular.");r[b]=_*N,0!==N&&(_*=k,n[b]=P,(0,l._giv_rot_rows)(a,1,b,o*i+m,k,N))}for(var O=0;O<u;O++)e[u*m+O]=_*v[u*m+O]}else for(var j=0;j<o;j++){d.fill(0,w,w*(w+3)>>>1);for(var S=w;S>0;S--)d[w-1+(S*(S+1)>>>1)]=1;for(var R=0;R<i;R++){d.fill(0,0,w);for(var I=n[i*j+R],F=0;F<w;F++){for(var D=w+(F*(F+1)>>>1),q=0,L=-1;L++<F;)q+=d[D+L]*p[i*(w*j+L)+R];if(0!==q){var T=(0,l._giv_rot_qr)(I,q),Y=(0,s["default"])(T,3),G=Y[0],U=Y[1],B=Y[2];I=B,0!==U&&((0,l._giv_rot_rows)(d,F+1,0,D,G,U),(0,l._giv_rot_rows)(a,1,i*j+R,o*i+w*j+F,G,U))}}n[i*j+R]=I;for(var J=0;J<w;J++)r[i*(w*j+J)+R]=d[J]}e.fill(0,u*w*j,u*w*(j+1));for(var z=0;z<w;z++)for(var C=w+(z*(z+1)>>>1),X=0;X<=z;X++)for(var V=0;V<u;V++)e[u*(w*j+z)+V]+=d[C+X]*v[u*(w*j+X)+V]}for(var Q=o*w*u;Q<y*u;Q++)e[Q]=v[Q];for(var W=u;W-- >0;)t[W]=W;(0,h._rrqr_decomp_inplace)(y,u,1,e,0,a,o*i,t,0,c);var H=(0,h._rrqr_rank)(y,u,e,0,c);return e.fill(0,u*H,u*Math.min(y,u)),H}},{key:"_qr_solve",value:function(n,r,e,t,a,o){var i=this.MX,s=this.NX,f=this.NY,u=this.NP,c=this.prepared_J21,h=this.prepared_J22,p=this.D,v=this.tmp,w=this.norm,y=Math.min(s,f);if(!(t instanceof Int32Array))throw new Error("Assertion failed.");if(t.length!==u)throw new Error("Assertion failed.");if(n.length!==i*s)throw new Error("Assertion failed.");if(r.length!==i*y*s)throw new Error("Assertion failed.");if(!(e.length>=i*y*u))throw new Error("Assertion failed.");if(0!==a%1)throw new Error("Assertion failed.");if(!(0<=a))throw new Error("Assertion failed.");if(!(u>=a))throw new Error("Assertion failed.");if(a|=0,(0,d._triu_solve)(a,u,1,e,0,o,i*s),a!=u)for(var m=0;m<a;m++)for(var _=a;_<u;_++){var g=e[u*m+_];if(0!==g){var b=Math.sqrt(1-g*g);(0,l._giv_rot_rows)(o,1,i*s+_,i*s+m,b,g)}}for(var A=u;A-- >0;)w[t[A]]=o[i*s+A];for(var E=u;E-- >0;)o[i*s+E]=w[E];if(a!==u)for(var x=u;x-- >0;){var M=p[i*s+x];0!==M&&(o[i*s+x]/=M)}for(var k=i;k-- >0;)for(var N=y;N-- >0;){for(var P=0,O=u;O-- >0;)P+=h[u*(y*k+N)+O]*o[i*s+O];for(var j=s;j-- >0;)o[s*k+j]-=P*r[s*(y*k+N)+j]}for(var S=i;S-- >0;){v.fill(0,0,y);for(var R=s;R-- >0;){for(var I=s*S+R,F=y;F-- >0;)o[I]-=r[s*(y*S+F)+R]*v[F];o[I]/=n[I];for(var D=y;D-- >0;)v[D]+=c[s*(y*S+D)+R]*o[I]}}}},{key:"_rt_solve",value:function(n,r,e,t,a,o){var i=this.MX,s=this.NX,f=this.NY,u=this.NP,c=this.prepared_J21,h=this.prepared_J22,p=this.D,v=this.tmp,w=this.norm,y=Math.min(s,f);if(!(t instanceof Int32Array))throw new Error("Assertion failed.");if(t.length!==u)throw new Error("Assertion failed.");if(n.length!==i*s)throw new Error("Assertion failed.");if(r.length!==i*y*s)throw new Error("Assertion failed.");if(!(e.length>=i*u))throw new Error("Assertion failed.");if(!(o.length>=i*s+u))throw new Error("Assertion failed.");if(0!==a%1)throw new Error("Assertion failed.");if(!(0<=a))throw new Error("Assertion failed.");if(!(u>=a))throw new Error("Assertion failed.");a|=0,w.fill(0,0,u);for(var m=0;m<i;m++){v.fill(0,0,y);for(var _=0;_<s;_++){for(var g=s*m+_,b=0;b<y;b++)o[g]-=c[s*(y*m+b)+_]*v[b];o[g]/=n[g];for(var A=0;A<y;A++)v[A]+=r[s*(y*m+A)+_]*o[g]}for(var E=0;E<y;E++)for(var x=0;x<u;x++)w[x]+=v[E]*h[u*(y*m+E)+t[x]]}if(a<u){for(var M=u;M-- >0;){var k=p[i*s+t[M]];0!==k&&(w[M]/=k)}for(var N=a;N-- >0;)for(var P=u;P-- >a;){var O=e[u*N+P];if(0!==O){var j=Math.sqrt(1-O*O);(0,l._giv_rot_rows)(w,1,N,P,j,O)}}}for(var S=a;S-- >0;)o[i*s+S]-=w[S];(0,d._triu_t_solve)(a,u,1,e,0,o,i*s)}},{key:"prepare",value:function(){var n=this.MX,r=this.NX,e=this.NY,t=this.NP,a=this.prepared_J21,o=this.prepared_J22,i=this.prepared_QF,f=this.J21,u=this.J22,h=this.F0;if(this.prepared=this.prepared||r>=e,!this.prepared){if(this.prepared=!0,a.length!==n*r*r+r)throw new Error("Assertion failed.");if(o.length!==Math.min(n*e,n*r+t+1)*t)throw new Error("Assertion failed.");if(i.length!==Math.min(n*e,n*r+t+1))throw new Error("Assertion failed.");for(var d=-1,p=0;p<n;p++){for(var v=r*r*p,w=t*r*p,y=r*p,m=0;m<r*r;m++)a[v+m]=f[r*e*p+m];for(var _=0;_<r*t;_++)o[w+_]=u[t*e*p+_];for(var g=0;g<r;g++)i[y+g]=h[n*r+e*p+g];for(var b=1;b<r;b++)for(var A=0;A<b;A++){var E=v+r*b+A,x=a[E];if(0!==x){var M=v+r*A+A,k=a[M],N=(0,l._giv_rot_qr)(k,x),P=(0,s["default"])(N,3),O=P[0],j=P[1],S=P[2];a[E]=0,0!==j&&(a[M]=S,(0,l._giv_rot_rows)(a,r-1-A,M+1,E+1,O,j),(0,l._giv_rot_rows)(o,t,w+A*t,w+b*t,O,j),(0,l._giv_rot_rows)(i,1,y+A,y+b,O,j))}}for(var R=r;R<e;R++){++d===t&&(0,c._qr_decomp_inplace)(t,t,1,o,n*r*t,i,n*r),d=Math.min(d,t);for(var I=0;I<r;I++)a[v+r*r+I]=f[r*e*p+r*R+I];for(var F=0;F<t;F++)o[(n*r+d)*t+F]=u[t*e*p+t*R+F];i[n*r+d]=h[n*r+e*p+R];for(var D=0;D<r;D++){var q=v+r*r+D,L=a[q];if(0!==L){var T=v+r*D+D,Y=a[T],G=(0,l._giv_rot_qr)(Y,L),U=(0,s["default"])(G,3),B=U[0],J=U[1],z=U[2];a[q]=0,0!==J&&(a[T]=z,(0,l._giv_rot_rows)(a,r-1-D,T+1,q+1,B,J),(0,l._giv_rot_rows)(o,t,w+t*D,(n*r+d)*t,B,J),(0,l._giv_rot_rows)(i,1,y+D,n*r+d,B,J))}}if(!(d<=t))throw new Error("Assertion failed.");if(d===t)for(var C=0;C<t;C++){var X=n*r*t+t*d+C,V=o[X];if(0!==V){var Q=n*r*t+t*C+C,W=o[Q],H=(0,l._giv_rot_qr)(W,V),K=(0,s["default"])(H,3),$=K[0],Z=K[1],nn=K[2];o[X]=0,0!==Z&&(o[Q]=nn,(0,l._giv_rot_rows)(o,t-1-C,Q+1,X+1,$,Z),(0,l._giv_rot_rows)(i,1,n*r+C,n*r+d,$,Z))}}}}}}},{key:"computeNewton",value:function(){var n=this.MX,r=this.NX,e=this.NY,t=this.NP,a=this.QF,o=this.J11,i=this.prepared_QF,f=this.newton_R11,u=this.newton_R21,c=this.newton_R22,h=this.newton_P,d=this.newton_dX,p=this.F0,v=this.D;if(!(this.rank>=0)){if(-1!==this.rank)throw new Error("Assertion failed.");this.prepare();for(var w=Math.min(n*e,n*r+t),y=n*r;y-- >0;)f[y]=o[y];for(var m=w;m-- >0;)a[n*r+m]=i[m];for(var _=n*r;_-- >0;)a[_]=p[_];var g=this._qr_decomp(f,u,c,h,a);this.rank=g+n*r;for(var b=n*r+g;b-- >0;)d[b]=-a[b];if(g!==t){d.fill(0,n*r+g,n*r+t);for(var A=t;A-- >0;){var E=v[n*r+h[A]];if(0!==E)for(var x=g;x-- >0;)c[t*x+A]/=E}for(var M=g;M-- >0;)for(var k=t*M+M,N=t;N-- >g;){var P=t*M+N,O=c[P];if(0!==O){var j=c[k],S=(0,l._giv_rot_qr)(j,O),R=(0,s["default"])(S,3),I=R[0],F=R[1],D=R[2];if(0!==F){I<0&&(I*=-1,F*=-1,D*=-1);for(var q=M;q-- >0;){var L=c[t*q+M],T=c[t*q+N];c[t*q+M]=T*F+I*L,c[t*q+N]=T*I-F*L}c[k]=D}c[P]=F}}}this._qr_solve(f,u,c,h,g,d)}}},{key:"computeNewtonRegularized",value:function(n){if(n*=1,!(n>=0))throw new Error("Assertion failed.");var r=this.N,e=this.MX,t=this.NX,a=this.NY,o=this.NP,i=this.regularized_R11,f=this.J11,u=this.regularized_R21,c=this.regularized_R22,h=this.regularized_P,d=this.regularized_dX,p=this.D,v=this.QF,w=this.F0,y=this.prepared_QF,m=v,_=Math.min(e*a,e*t+o);if(c.length!==Math.max(Math.min(e*a,e*t+o+1),o+1)*o)throw new Error("Assertion failed.");if(v.length!==Math.max(Math.min(e*a,e*t+o+1),o+1)+e*t)throw new Error("Assertion failed.");if(0===n){this.computeNewton();for(var g=this.newton_R11,b=this.newton_R21,A=this.newton_R22,E=this.newton_P,x=this.newton_dX,M=this.rank,k=r;k-- >0;)d[k]=x[k];var N=this.scaledNorm(d);if(0===N)return[0,0];var P=M-e*t;if(M<r){for(var O=o;O-- >0;){var j=e*t+E[O];m[e*t+O]=d[j]*p[j]}for(var S=P;S-- >0;)for(var R=o;R-- >P;){var I=A[o*S+R];if(0!==I){var F=Math.sqrt(1-I*I);(0,l._giv_rot_rows)(m,1,e*t+S,e*t+R,F,I)}}}else for(var D=o;D-- >0;){var q=e*t+E[D];m[e*t+D]=d[q]*p[q]*p[q]}for(var L=e*t;L-- >0;)m[L]=d[L]*p[L]*p[L];this._rt_solve(g,b,A,E,P,m);for(var T=0,Y=M;Y-- >0;){var G=m[Y];T+=G*G}return T/=-N,[N,T]}this.prepare();for(var U=e*t;U-- >0;)i[U]=f[U];for(var B=_;B-- >0;)v[e*t+B]=y[B];for(var J=e*t;J-- >0;)v[J]=w[J];for(var z=Math.sqrt(n),C=e*t;C-- >0;){var X=p[C]*z;if(!(X>0))throw new Error("Assertion failed.");var V=(0,l._giv_rot_qr)(i[C],X),Q=(0,s["default"])(V,3),W=Q[0],H=(Q[1],Q[2]);i[C]=H,v[C]*=W}var K=this._qr_decomp(i,u,c,h,v),$=o*o;c.fill(0,_*o,(o+1)*o);for(var Z=o;Z-- >0;){var nn=p[e*t+h[Z]];if(0===nn?nn=1:nn*=z,!(nn>0))throw new Error("Assertion failed.");if(K<=Z)c[o*Z+Z]=nn,v[e*t+Z]=0;else{c[$+Z]=nn,v[r]=0;for(var rn=Z;rn<o;rn++){var en=o*rn+rn,tn=$+rn,an=c[en],on=c[tn],sn=(0,l._giv_rot_qr)(an,on),fn=(0,s["default"])(sn,3),ln=fn[0],un=fn[1],cn=fn[2];c[tn]=0,0!==un&&(c[en]=cn,(0,l._giv_rot_rows)(c,o-rn-1,en+1,tn+1,ln,un),(0,l._giv_rot_rows)(v,1,e*t+rn,r,ln,un))}}}for(var hn=r;hn-- >0;)d[hn]=-v[hn];this._qr_solve(i,u,c,h,o,d);var dn=this.scaledNorm(d);if(0===dn)return[0,0];for(var pn=o;pn-- >0;){var vn=e*t+h[pn];m[e*t+pn]=d[vn]*p[vn]*p[vn]}for(var wn=e*t;wn-- >0;)m[wn]=d[wn]*p[wn]*p[wn];this._rt_solve(i,u,c,h,o,m);for(var yn=0,mn=r;mn-- >0;){var _n=m[mn];yn+=_n*_n}return yn/=-dn,[dn,yn]}},{key:"__DEBUG_RVD",get:function(){var n=this.M,r=this.N,e=this.MX,t=this.NX,a=this.NY,o=this.NP,i=this.newton_R11,s=this.newton_R21,u=this.newton_R22,c=this.newton_P,h=this.prepared_J21,d=this.prepared_J22;if(!(0<=this.rank))throw new Error("Assertion failed.");var p=Math.min(t,a),v=this.rank-e*t,w=new Float64Array(n*r),y=new Float64Array(r*r),m=new Float64Array(1*r);m.fill(1);for(var _=0;_<e*t;_++)y[r*_+_]=1;for(var g=0;g<o;g++)y[r*(e*t+g)+(e*t+c[g])]=1;for(var b=0;b<e*t;b++)w[r*b+b]=i[b];for(var A=0;A<e;A++)for(var E=0;E<t;E++)for(var x=1+E;x<t;x++)for(var M=0;M<p;M++)w[r*(t*A+E)+(t*A+x)]+=s[t*(p*A+M)+E]*h[t*(p*A+M)+x];for(var k=0;k<e;k++)for(var N=0;N<t;N++)for(var P=0;P<o;P++)for(var O=0;O<p;O++)w[r*(t*k+N)+(t*e+P)]+=s[t*(p*k+O)+N]*d[o*(p*k+O)+c[P]];for(var j=0;j<v;j++)for(var S=0;S<v;S++)w[r*(e*t+j)+(e*t+S)]=u[o*j+S];if(v!==o){for(var R=e*t+o;R-- >e*t;)m[R]=this.D[R]||1;for(var I=o;I-- >0;){var F=this.D[e*t+c[I]];if(0!==F)for(var D=e*t;D-- >0;)w[r*D+(e*t+I)]/=F}for(var q=v;q-- >0;)for(var L=o;L-- >v;){var T=u[o*q+L];if(0!==T)for(var Y=Math.sqrt(1-T*T),G=e*t;G-- >0;){var U=r*G+(e*t+q),B=r*G+(e*t+L),J=w[U],z=w[B];w[U]=z*T+Y*J,w[B]=z*Y-T*J}}for(var C=e*t;C-- >0;)for(var X=e*t+o;X-- >e*t+v;)w[r*C+X]=0;for(var V=v;V-- >0;)for(var Q=o;Q-- >v;){var W=u[o*V+Q];if(0!==W){var H=Math.sqrt(1-W*W);(0,l._giv_rot_rows)(y,r,r*(e*t+V),r*(e*t+Q),H,W)}}}return[new f.NDArray(Int32Array.of(n,r),w),new f.NDArray(Int32Array.of(r,r),y),new f.NDArray(Int32Array.of(1,r),m)]}}]),n}();r.TrustRegionSolverTLS=_},1471:function(n,r,e){"use strict";e(21703),e(48675),e(3462);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.min_dogleg_gen=w,r.fit_dogleg_gen=b,r.odr_dogleg_gen=r.tls_dogleg_gen=r.lsq_dogleg_gen=void 0;var a=t(e(9545)),o=t(e(42989)),i=t(e(25069)),s=e(30065),f=e(90053),l=e(93393),u=e(42402),c=e(78668),h=e(86173),d=e(66153),p=a["default"].mark(m),v=a["default"].mark(b);function w(n,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=e.updateTol,a=void 0===t?1e-14:t,o=e.historySize,i=void 0===o?8:o,s=e.scaleInit,f=void 0===s?.01:s;return m(new c.TrustRegionSolverLBFGS(n,r,{updateTol:a,historySize:i,scaleInit:f}),e)}var y=function(n,r,e){return m(new h.TrustRegionSolverLSQ(n,r),e)};function m(n){var r,e,t,s,c,h,d,v,w,y,m,_,g,b,A,E,x,M,k,N,P,O,j,S,R,I,F,D,q,L,T,Y,G,U,B,J,z,C,X,V,Q,W,H,K,$,Z,nn,rn,en,tn,an,on,sn,fn,ln,un,cn,hn=arguments;return a["default"].wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=hn.length>1&&void 0!==hn[1]?hn[1]:{},e=r.r0,t=void 0===e?1.1:e,s=r.rMin,c=void 0===s?0:s,h=r.rMax,d=void 0===h?1/0:h,v=r.rNewton,w=void 0===v?2:v,y=r.shrinkLower,m=void 0===y?.05:y,_=r.shrinkUpper,g=void 0===_?.95:_,b=r.grow,A=void 0===b?1.4142135623730951:b,E=r.expectGainMin,x=void 0===E?.25:E,M=r.expectGainMax,k=void 0===M?.75:M,N=r.stuckLimit,P=void 0===N?64:N,0<t){a.next=3;break}throw new Error("dogleg_gen(fJ, x0, opt): opt.r0 must be positive number.");case 3:if(0<=c){a.next=5;break}throw new Error("dogleg_gen(fJ, x0, opt): opt.rMin must be non-negative.");case 5:if(c<=d){a.next=7;break}throw new Error("dogleg_gen(fJ, x0, opt): opt.rMin must not be greater than opt.rMax.");case 7:if(c<=t){a.next=9;break}throw new Error("dogleg_gen(fJ, x0, opt): opt.r0 must not be less than opt.rMin.");case 9:if(d>=t){a.next=11;break}throw new Error("dogleg_gen(fJ, x0, opt): opt.r0 must not be greater than opt.rMax.");case 11:if(1<w){a.next=13;break}throw new Error("dogleg_gen(fJ, x0, opt): opt.rGN must be greater than 1.");case 13:if(0<m){a.next=15;break}throw new Error("dogleg_gen(fJ, x0, opt): opt.shrinkLower must be positive number.");case 15:if(m<=g){a.next=17;break}throw new Error("dogleg_gen(fJ, x0, opt): opt.shrinkLower must not be greater than opt.shrinkUpper.");case 17:if(g<1){a.next=19;break}throw new Error("dogleg_gen(fJ, x0, opt): opt.shrinkUpper must be less than 1.");case 19:if(1<A){a.next=21;break}throw new Error("dogleg_gen(fJ, x0, opt): opt.grow must be number greater than 1.");case 21:if(0<x){a.next=23;break}throw new Error("dogleg_gen(fJ, x0, opt): opt.expectGainMin must be positive number.");case 23:if(x<k){a.next=25;break}throw new Error("dogleg_gen(fJ, x0, opt): opt.expectGainMin must be less than expectGainMax.");case 25:if(k<1||console.warn("dogleg_gen(fJ, x0, opt): opt.expectGainMax should be less than 1."),0===P%1){a.next=28;break}throw new Error("dogleg_gen(fJ, x0, opt): opt.stuckLimit must be an integer.");case 28:if(0<=P){a.next=30;break}throw new Error("dogleg_gen(fJ, x0, opt): opt.stuckLimit must not be negative.");case 30:O=n.N,j=n.D,S=n.newton_dX,R=n.G0,I=new Float64Array(O),F=n.scaledNorm(R),D=n.cauchyTravel(),q=t*-F*D,L=n.loss,T=0;case 32:if(D<=0){a.next=34;break}throw new Error("Assertion failed.");case 34:if(0!==T){a.next=37;break}return a.next=37,n.report();case 37:for(Y=Math.max(-q/F,D),G=O;G-- >0;)I[G]=Y*R[G];if(U=!1,!(-F*D<q)){a.next=52;break}for(n.computeNewton(),B=0,J=0,z=0,C=O;C-- >0;)X=j[C],V=X*I[C],Q=X*(S[C]-I[C]),B+=V*V,J+=V*Q,z+=Q*Q;if(B-=q*q,J*=2,W=(0,u.roots1d_polyquad)(B,J,z)[1],0<=W){a.next=50;break}throw new Error("Assertion failed.");case 50:for(W>1&&(W=1,U=!0),H=O;H-- >0;)K=S[H]-I[H],I[H]+=K*W;case 52:if(U){a.next=57;break}if(Math.abs(n.scaledNorm(I)-q)<=1e-5*q+1e-8){a.next=55;break}throw new Error("Assertion failed: "+JSON.stringify({cp:D,err:Math.abs(n.scaledNorm(I)-q),D:(0,i["default"])(j),G:(0,i["default"])(R),dX:(0,i["default"])(I)}));case 55:a.next=59;break;case 57:if(n.scaledNorm(I)<=1.00001*q){a.next=59;break}throw new Error("Assertion failed.");case 59:if($=n.considerMove(I),Z=(0,o["default"])($,2),nn=Z[0],rn=Z[1],en=function(){return 1},tn=L-nn,an=L-rn,!(an<tn*x)){a.next=74;break}for(on=0,sn=O;sn-- >0;)on+=I[sn]*R[sn];if(fn=on/(2*on+L-rn),fn>=m||(fn=m),fn<=g||(fn=g),ln=Math.max(c*en(),q*fn),ln!==q||L>rn){a.next=71;break}throw new l.OptimizationNoProgressError;case 71:q=ln,a.next=75;break;case 74:U?(un=n.scaledNorm(I),cn=en(),q=Math.max(c*cn,Math.min(d*cn,w*un))):(an>tn*k||0===an)&&(q=Math.min(d*en(),Math.max((0,f.nextUp)(q),q*A)));case 75:L>rn?(L=rn,n.makeConsideredMove(),T=0):++T>P&&n.wiggle(),F=n.scaledNorm(R),D=n.cauchyTravel();case 78:a.next=32;break;case 80:case"end":return a.stop()}}),p)}r.lsq_dogleg_gen=y;var _=function(n,r,e,t){return m(new d.TrustRegionSolverTLS(n,r,e),t)};r.tls_dogleg_gen=_;var g=(0,d.odr_gen)(m);function b(n,r,e,t,i){var f,l,u,c,h,d,p,w,m,_,g;return a["default"].wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e instanceof Function){a.next=2;break}throw new Error("fit_dogleg_gen(x,y, fg, p0): fg must be a function.");case 2:if(n=(0,s.array)(n),r=(0,s.array)("float64",r),t=(0,s.array)("float64",t),f=Float64Array,2===n.ndim){a.next=8;break}throw new Error("fit_dogleg_gen(x,y, fg, p0): x.ndim must be 2.");case 8:if(1===r.ndim){a.next=10;break}throw new Error("fit_dogleg_gen(x,y, fg, p0): y.ndim must be 1.");case 10:if(1===t.ndim){a.next=12;break}throw new Error("fit_dogleg_gen(x,y, fg, p0): p0.ndim must be 1.");case 12:if(l=(0,o["default"])(t.shape,1),u=l[0],c=(0,o["default"])(n.shape,2),h=c[0],d=c[1],p=Int32Array.of(d),h==r.shape[0]){a.next=15;break}throw new Error("fit_dogleg_gen(x,y, fg, p0): x.shape[0] must be equal to y.shape[0].");case 15:return n=n.data.slice(),r=r.data,Object.freeze(n.buffer),n=Array.from({length:h},(function(r,e){return Object.freeze(new s.NDArray(p,n.subarray(d*e,d*e+1)))})),Object.freeze(n),w=new f(h),m=new f(h*u),_=[new s.NDArray(Int32Array.of(h),w),new s.NDArray(Int32Array.of(h,u),m)],g=function(t){var a=e(t);if(!(a instanceof Function))throw new Error;for(var i=h;i-- >0;){var f=a(n[i]),l=(0,o["default"])(f,2),c=l[0],d=l[1];if(c=(0,s.asarray)(c),d=(0,s.asarray)(d),0!==c.ndim)throw new Error("fit_dogleg_gen(x,y, fg, p0): fg must have signature float[nParams] => float[nDim] => [float, float[nParams]].");if(1!==d.ndim)throw new Error("fit_dogleg_gen(x,y, fg, p0): fg must have signature float[nParams] => float[nDim] => [float, float[nParams]].");if(d.shape[0]!==u)throw new Error("fit_dogleg_gen(x,y, fg, p0): fg must have signature float[nParams] => float[nDim] => [float, float[nParams]].");if(c=c.data[0],d=d.data,isNaN(c))throw new Error("fit_dogleg_gen(x,y, fg, p0): NaN encountered.");if(d.some(isNaN))throw new Error("fit_dogleg_gen(x,y, fg, p0): NaN encountered.");w[i]=c-r[i];for(var p=u;p-- >0;)m[u*i+p]=d[p]}return _},a.delegateYield(y(g,t,i),"t0",23);case 23:case"end":return a.stop()}}),v)}r.odr_dogleg_gen=g},92786:function(n,r,e){"use strict";e(21703),e(48675),e(3462);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.fit_lin=f;var a=t(e(42989)),o=t(e(25069)),i=e(30065),s=e(47617);function f(n,r,e,t){if(null==t)t=e,e=0;else if(null==e)e=0;else if(!(0<=e&&e<1/0))throw new Error("fit_lin(x,y, regularization, funcs): Invalid regularization: ".concat(e,"."));if(t=(0,o["default"])(t),n=(0,i.asarray)("float64",n),r=(0,i.asarray)("float64",r),1!==r.ndim)throw new Error("fit_lin(x,y, (regularization,) funcs): y.ndim must be 1.");var f=r.shape[0],l=t.length;n.ndim;if(1!==n.ndim&&2!==n.ndim)throw new Error("fit_lin(x,y, (regularization,) funcs): x.ndim must be 1 or 2.");if(n.shape[0]!==r.shape[0])throw new Error("fit_lin(x,y, (regularization,) funcs): x.shape[0] and y.shape[0] must equal.");if(1===n.ndim)n=n.data;else{var u=n.shape.slice(1),c=(0,a["default"])(u,1),h=c[0];n=n.data.slice(),Object.freeze(n.buffer),n=Array.from({length:f},(function(r,e){return Object.freeze(new i.NDArray(u,n.subarray(h*e,h*(e+1))))}))}var d=Int32Array.of((0!==e)*l+f,l),p=new Float64Array(d[0]*d[1]);if(0!==e){e=Math.sqrt(e);for(var v=l;v-- >0;)p[f*l+l*v+v]=e}for(var w=f;w-- >0;)for(var y=l;y-- >0;)p[l*w+y]=t[y](n[w]);if(0!==e){r=r.data;for(var m=new Float64Array(f+l),_=f;_-- >0;)m[_]=r[_];r=new i.NDArray(Int32Array.of(f+l,1),m)}else r=new i.NDArray(Int32Array.of(f,1),r.data);p=new i.NDArray(d,p);var g=(0,s.lstsq)(p,r),b=g.data,A=function n(r){var e=n.coeffs,t=n.funcs;if(e.length!==t.length)throw new Error("Assertion failed.");for(var a=0,o=e.length;o-- >0;)a+=e[o]*t[o](r);return a};return A.coeffs=b,A.funcs=t,A}},26499:function(n,r,e){"use strict";e(21703),Object.defineProperty(r,"__esModule",{value:!0}),r.min1d_gss=a;var t=1.5-Math.sqrt(5/4);function a(n,r,e){if(r>e)throw new Error("opt1d_golden(F,x_min,x_max): x_max must not be less than x_min.");for(var a=r,o=e,i=a+(o-a)*t,s=n(i);;){var f=o-(o-a)*t;if(f===o)return(o+a)/2;var l=n(f);s<l?(o=a,a=f):(a=i,i=f,s=l)}}},18450:function(n,r,e){"use strict";var t=e(22768);Object.defineProperty(r,"__esModule",{value:!0});var a={line_search:!0,test_fn:!0};r.test_fn=r.line_search=void 0;var o=t(e(17555));r.line_search=o,Object.keys(o).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(a,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return o[n]}}))}));var i=t(e(36405));r.test_fn=i;var s=e(1471);Object.keys(s).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(a,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return s[n]}}))}));var f=e(92786);Object.keys(f).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(a,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return f[n]}}))}));var l=e(26499);Object.keys(l).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(a,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return l[n]}}))}));var u=e(177);Object.keys(u).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(a,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return u[n]}}))}));var c=e(41269);Object.keys(c).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(a,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return c[n]}}))}));var h=e(59588);Object.keys(h).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(a,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return h[n]}}))}));var d=e(49681);Object.keys(d).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(a,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return d[n]}}))}));var p=e(93393);Object.keys(p).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(a,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return p[n]}}))}));var v=e(45456);Object.keys(v).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(a,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return v[n]}}))}));var w=e(44685);Object.keys(w).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(a,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return w[n]}}))}));var y=e(86458);Object.keys(y).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(a,n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return y[n]}}))}))},177:function(n,r,e){"use strict";e(21703),e(85827),e(48675),e(3462);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.min_lbfgs_gen=d,r.lsq_lbfgs_gen=p,r.fit_lbfgs_gen=v;var a=t(e(9545)),o=t(e(42989)),i=e(30065),s=e(19137),f=e(25315),l=e(25143),u=a["default"].mark(d),c=a["default"].mark(p),h=a["default"].mark(v);function d(n,r){var e,t,c,h,d,p,v,w,y,m,_,g,b,A,E,x,M,k,N,P,O,j,S,R=arguments;return a["default"].wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e=R.length>2&&void 0!==R[2]?R[2]:{},t=e.historySize,c=void 0===t?8:t,h=e.lineSearch,d=void 0===h?(0,l.more_thuente_abc)():h,p=e.updateTol,v=void 0===p?1e-14:p,w=e.negDir0,y=void 0===w?function(n){return n}:w,m=e.scaling,_=void 0===m?function(){var n=1024;return{update:function(r,e){if(1!==r.ndim)throw new Error("Assertion failed.");if(1!==e.ndim)throw new Error("Assertion failed.");r=r.data,e=e.data;var t=r.length;if(t!==e.length)throw new Error("Assertion failed.");for(var a=e.reduce((function(n,r){return Math.max(n,Math.abs(r))}),0),o=0,i=0,s=e.length;s-- >0;){var f=e[s]/a,l=r[s]/a;o+=f*f,i+=l*f}if(n=o/i,!isFinite(n))throw new Error("Assertion failed.")},apply:function(r){if(1!==r.ndim)throw new Error("Assertion failed.");for(var e=r.data,t=e.length;t-- >0;)e[t]/=n;return r}}}():m,c%1===0){a.next=3;break}throw new Error("min_lbfgs_gen(fg, x0, opt): opt.historySize must be an integer.");case 3:if(c>0){a.next=5;break}throw new Error("min_lbfgs_gen(fg, x0, opt): opt.historySize must be positive.");case 5:if(g=(0,i.array)("float64",r),r=void 0,1===g.ndim){a.next=9;break}throw new Error("min_lbfgs_gen(fg, x0, opt): x0.ndim must be 1.");case 9:if(b=(0,o["default"])(g.shape,1),A=b[0],E=g.shape,x=n(g),M=(0,o["default"])(x,2),k=M[0],N=M[1],N=(0,i.array)("float64",N),k*=1,!isNaN(k)){a.next=15;break}throw new Error("min_lbfgs_gen(fg, x0, opt): fg must return [float,float[]].");case 15:if(1===N.ndim){a.next=17;break}throw new Error("min_lbfgs_gen(fg, x0, opt): fg must return [float,float[]].");case 17:if(N.shape[0]===A){a.next=19;break}throw new Error("min_lbfgs_gen(fg, x0, opt): fg must return [float,float[]].");case 19:d=d(n),P=new f.LBFGS_Solver(c,A),O=new Float64Array(A),j=new Float64Array(A),S=function(){var n,r,e,t=Float64Array.from(N.data);P.compute_Hv_phase1(t),t=y(new i.NDArray(E,t)),t=(0,i.array)("float64",t),t=_.apply(t),t=(0,i.array)("float64",t),P.compute_Hv_phase2(t.data);var a=!0;try{var f=d(new i.NDArray(E,g.data.slice()),k,new i.NDArray(E,N.data.slice()),t),l=(0,o["default"])(f,3);n=l[0],r=l[1],e=l[2]}catch(h){if(!(h instanceof s.LineSearchBisectionError))throw h;n=h.x,r=h.f,e=h.g,a=!1}if(n=(0,i.array)("float64",n),e=(0,i.array)("float64",e),r*=1,1!==n.ndim)throw new Error("Assertion failed.");if(1!==e.ndim)throw new Error("Assertion failed.");if(n.shape[0]!==A)throw new Error("Assertion failed.");if(e.shape[0]!==A)throw new Error("Assertion failed.");if(isNaN(r))throw new Error("Assertion failed.");for(var u=A;u-- >0;)j[u]=e.data[u]-N.data[u];for(var c=A;c-- >0;)O[c]=n.data[c]-g.data[c];if(O.every((function(n){return 0===n})))throw new s.LineSearchNoProgressError;a=a||function(){for(var n=j.reduce((function(n,r){return Math.max(n,Math.abs(r))}),0),r=0,e=0,t=j.length;t-- >0;){var a=j[t]/n,o=O[t]/n;r+=a*a,e+=o*a}return v*r<e}(),a&&(P.update(O,j),_.update(new i.NDArray(E,O.slice()),new i.NDArray(E,j.slice()))),g=n,k=r,N=e};case 23:if(g instanceof i.NDArray){a.next=25;break}throw new Error("Assertion failed.");case 25:if(N instanceof i.NDArray){a.next=27;break}throw new Error("Assertion failed.");case 27:if(!isNaN(k)){a.next=29;break}throw new Error("Assertion#5 failed.");case 29:if(1===g.ndim){a.next=31;break}throw new Error("Assertion#4 failed.");case 31:if(1===N.ndim){a.next=33;break}throw new Error("Assertion#6 failed.");case 33:if(g.shape[0]===A){a.next=35;break}throw new Error("Assertion#7 failed.");case 35:if(N.shape[0]===A){a.next=37;break}throw new Error("Assertion#8 failed.");case 37:return a.next=39,[new i.NDArray(E,g.data.slice()),k,new i.NDArray(E,N.data.slice())];case 39:return a.prev=39,S(),a.abrupt("break",53);case 44:if(a.prev=44,a.t0=a["catch"](39),!(a.t0 instanceof s.LineSearchError&&P.m>0)){a.next=50;break}P.forget(P.m+1>>>1),a.next=51;break;case 50:throw a.t0;case 51:a.next=39;break;case 53:a.next=23;break;case 55:case"end":return a.stop()}}),u,null,[[39,44]])}function p(n,r){var e,t,u,h,d,p,v,w,y,m,_,g,b,A,E,x,M,k,N,P,O,j,S,R,I,F,D,q,L,T,Y,G=arguments;return a["default"].wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e=G.length>2&&void 0!==G[2]?G[2]:{},t=e.historySize,u=void 0===t?8:t,h=e.lineSearch,d=void 0===h?(0,l.more_thuente_abc)():h,p=e.updateTol,v=void 0===p?1e-13:p,u%1===0){a.next=3;break}throw new Error("min_lbfgs_gen(fg, x0, opt): opt.historySize must be an integer.");case 3:if(u>0){a.next=5;break}throw new Error("min_lbfgs_gen(fg, x0, opt): opt.historySize must be positive.");case 5:if(w=(0,i.array)("float64",r),r=void 0,1===w.ndim){a.next=9;break}throw new Error("min_lbfgs_gen(fg, x0, opt): x0.ndim must be 1.");case 9:if(y=n(w),m=(0,o["default"])(y,2),_=m[0],g=m[1],_=(0,i.array)("float64",_),g=(0,i.array)("float64",g),1===_.ndim){a.next=14;break}throw new Error("lsq_lbfgs_gen(fg, x0: float[L], opt): fg must return [float[K],float[K,L]].");case 14:if(2===g.ndim){a.next=16;break}throw new Error("lsq_lbfgs_gen(fg, x0: float[L], opt): fg must return [float[K],float[K,L]].");case 16:if(b=(0,o["default"])(g.shape,2),A=b[0],E=b[1],x=w.shape,M=_.shape,k=g.shape,Int32Array.of(),_.shape[0]===A){a.next=19;break}throw new Error("lsq_lbfgs_gen(fg, x0: float[L], opt): fg must return [float[K],float[K,L]].");case 19:if(w.shape[0]===E){a.next=21;break}throw new Error("lsq_lbfgs_gen(fg, x0: float[L], opt): fg must return [float[K],float[K,L]].");case 21:n=function(){var r=n;return function(n){n=new i.NDArray(x,n.data);var e=r(n),t=(0,o["default"])(e,2),a=t[0],s=t[1];if(a=(0,i.array)("float64",a),s=(0,i.array)("float64",s),a.data.some(isNaN))throw new Error("Assertion failed.");if(s.data.some(isNaN))throw new Error("Assertion failed.");if(1!==a.ndim)throw new Error("lsq_lbfgs_gen(fg, x0: float[L], opt): fJ(x: float[L]) must return [float[K],float[K,L]].");if(2!==s.ndim)throw new Error("lsq_lbfgs_gen(fg, x0: float[L], opt): fJ(x: float[L]) must return [float[K],float[K,L]].");if(a.shape[0]!==A)throw new Error("lsq_lbfgs_gen(fg, x0: float[L], opt): fJ(x: float[L]) must return [float[K],float[K,L]].");if(s.shape[0]!==A)throw new Error("lsq_lbfgs_gen(fg, x0: float[L], opt): fJ(x: float[L]) must return [float[K],float[K,L]].");if(s.shape[1]!==E)throw new Error("lsq_lbfgs_gen(fg, x0: float[L], opt): fJ(x: float[L]) must return [float[K],float[K,L]].");return[a,s]}}(),N=function(n,r){for(var e=n.data,t=r.data,a=0,o=new Float64Array(E),s=A;s-- >0;)a+=e[s]*e[s]/A;for(var f=A;f-- >0;)for(var l=E;l-- >0;)o[l]+=2*e[f]*t[E*f+l]/A;return[a,new i.NDArray(x,o)]},d=d((function(r){if(P=(0,i.array)("float64",r),r=void 0,1!==P.ndim)throw new Error("Assertion failed.");if(P.shape[0]!==E)throw new Error("Assertion failed.");var e=n(P),t=(0,o["default"])(e,2);return O=t[0],j=t[1],N(O,j)})),S=function(n){for(var r=T.data,e=g.data,t=0,a=E;a-- >0;)t+=r[a]*n[a];if(0<t){for(var o=0,i=A;i-- >0;){for(var s=0,f=E;f-- >0;)s+=e[E*i+f]*n[f];o+=s*s*2/A}if(!(0<o))throw new Error("Assertion failed.");t/=o;for(var l=E;l-- >0;)n[l]*=t}},R=new Float64Array(E),I=new Float64Array(E),F=new f.LBFGS_Solver(u,E),D=N(_,g),q=(0,o["default"])(D,2),L=q[0],T=q[1],Y=function(){var r=Float64Array.from(T.data);F.compute_Hv_phase1(r),S(r),F.compute_Hv_phase2(r);var e,t,a,f=!0;try{var l=d(new i.NDArray(x,w.data.slice()),L,new i.NDArray(x,T.data.slice()),new i.NDArray(x,r)),u=(0,o["default"])(l,3);e=u[0],t=u[1],a=u[2]}catch(A){if(!(A instanceof s.LineSearchBisectionError))throw A;e=A.x,t=A.f,a=A.g,f=!1}if(w=(0,i.array)("float64",w),L*=1,T=(0,i.array)("float64",T),1!==w.ndim)throw new Error("Assertion failed.");if(1!==T.ndim)throw new Error("Assertion failed.");if(w.shape[0]!==E)throw new Error("Assertion failed.");if(T.shape[0]!==E)throw new Error("Assertion failed.");if(isNaN(L))throw new Error("Assertion failed.");var c=O,h=j;if(P.data.some((function(n,r){return n!==e.data[r]}))){var p=n(e),y=(0,o["default"])(p,2);c=y[0],h=y[1]}for(var m=E;m-- >0;)R[m]=e.data[m]-w.data[m];for(var b=E;b-- >0;)I[b]=a.data[b]-T.data[b];if(R.every((function(n){return 0===n})))throw new s.LineSearchNoProgressError;f=f||function(){for(var n=I.reduce((function(n,r){return Math.max(n,Math.abs(r))}),0),r=0,e=0,t=I.length;t-- >0;){var a=I[t]/n,o=R[t]/n;r+=a*a,e+=o*a}return v*r<e}(),f&&F.update(R,I),w=e,L=t,T=a,_=c,g=h};case 28:return a.next=30,[new i.NDArray(x,w.data.slice()),L,new i.NDArray(x,T.data.slice()),new i.NDArray(M,_.data.slice()),new i.NDArray(k,g.data.slice())];case 30:return a.prev=30,Y(),a.abrupt("break",44);case 35:if(a.prev=35,a.t0=a["catch"](30),!(a.t0 instanceof s.LineSearchError&&F.m>0)){a.next=41;break}F.forget(F.m+1>>>1),a.next=42;break;case 41:throw a.t0;case 42:a.next=30;break;case 44:a.next=28;break;case 46:case"end":return a.stop()}}),c,null,[[30,35]])}function v(n,r,e,t,s){var f,l,u,c,d,v,w,y,m,_,g;return a["default"].wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e instanceof Function){a.next=2;break}throw new Error("fit_lbfgs_gen(x,y, fg, p0): fg must be a function.");case 2:if(n=(0,i.array)(n),r=(0,i.array)("float64",r),t=(0,i.array)("float64",t),f=Float64Array,2===n.ndim){a.next=8;break}throw new Error("fit_lbfgs_gen(x,y, fg, p0): x.ndim must be 2.");case 8:if(1===r.ndim){a.next=10;break}throw new Error("fit_lbfgs_gen(x,y, fg, p0): y.ndim must be 1.");case 10:if(1===t.ndim){a.next=12;break}throw new Error("fit_lbfgs_gen(x,y, fg, p0): p0.ndim must be 1.");case 12:if(l=(0,o["default"])(t.shape,1),u=l[0],c=(0,o["default"])(n.shape,2),d=c[0],v=c[1],w=Int32Array.of(v),d==r.shape[0]){a.next=15;break}throw new Error("fit_lbfgs_gen(x,y, fg, p0): x.shape[0] must be equal to y.shape[0].");case 15:return n=n.data.slice(),r=r.data,Object.freeze(n.buffer),n=Array.from({length:d},(function(r,e){return Object.freeze(new i.NDArray(w,n.subarray(v*e,v*e+1)))})),Object.freeze(n),y=new f(d),m=new f(d*u),_=[new i.NDArray(Int32Array.of(d),y),new i.NDArray(Int32Array.of(d,u),m)],g=function(t){var a=e(t);if(!(a instanceof Function))throw new Error;for(var s=d;s-- >0;){var f=a(n[s]),l=(0,o["default"])(f,2),c=l[0],h=l[1];if(c=(0,i.asarray)(c),h=(0,i.asarray)(h),0!==c.ndim)throw new Error("fit_lbfgs_gen(x,y, fg, p0): fg must have signature float[nParams] => float[nDim] => [float, float[nParams]].");if(1!==h.ndim)throw new Error("fit_lbfgs_gen(x,y, fg, p0): fg must have signature float[nParams] => float[nDim] => [float, float[nParams]].");if(h.shape[0]!==u)throw new Error("fit_lbfgs_gen(x,y, fg, p0): fg must have signature float[nParams] => float[nDim] => [float, float[nParams]].");if(c=c.data[0],h=h.data,isNaN(c))throw new Error("fit_lbfgs_gen(x,y, fg, p0): NaN encountered.");if(h.some(isNaN))throw new Error("fit_lbfgs_gen(x,y, fg, p0): NaN encountered.");y[s]=c-r[s];for(var p=u;p-- >0;)m[u*s+p]=h[p]}return _},a.delegateYield(p(g,t,s),"t0",23);case 23:case"end":return a.stop()}}),h)}},41269:function(n,r,e){"use strict";e(21703),e(48675),e(3462),e(85827);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.min_lbfgsb_gen=v;var a=t(e(9545)),o=t(e(42989)),i=e(30065),s=e(90053),f=e(19137),l=e(97442),u=e(27357),c=a["default"].mark(v);function h(n,r){var e;if("undefined"===typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=d(n))||r&&n&&"number"===typeof n.length){e&&(n=e);var t=0,a=function(){};return{s:a,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var n=e.next();return i=n.done,n},e:function(n){s=!0,o=n},f:function(){try{i||null==e["return"]||e["return"]()}finally{if(s)throw o}}}}function d(n,r){if(n){if("string"===typeof n)return p(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?p(n,r):void 0}}function p(n,r){(null==r||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}function v(n,r,e){var t,d,p,v,w,y,m,_,g,b,A,E,x,M,k,N,P,O,j,S,R,I,F,D,q=arguments;return a["default"].wrap((function(c){while(1)switch(c.prev=c.next){case 0:if(t=q.length>3&&void 0!==q[3]?q[3]:{},d=t.historySize,p=void 0===d?8:d,v=t.lineSearch,w=void 0===v?(0,l.more_thuente_u123)({fRed:.001,gRed:.8}):v,y=t.updateTol,m=void 0===y?1e-14:y,_=t.scaleInit,g=void 0===_?.001:_,p%1===0){c.next=3;break}throw new Error("min_lbfgsb_gen(fg, x0, opt): opt.historySize must be an integer.");case 3:if(p>0){c.next=5;break}throw new Error("min_lbfgsb_gen(fg, x0, opt): opt.historySize must be positive.");case 5:if(n instanceof Function){c.next=7;break}throw new Error("min_lbfgsb_gen(fg,x0,bounds): fg must be a function.");case 7:if(r=(0,i.array)("float64",r),e=(0,i.asarray)(e),b=(0,o["default"])(r.shape,1),A=b[0],E=r.shape,1===r.ndim){c.next=12;break}throw new Error("min_lbfgsb_gen(fg,x0,bounds): x0.ndim must be 1.");case 12:if(2===e.ndim){c.next=14;break}throw new Error("min_lbfgsb_gen(fg,x0,bounds): bounds.ndim must be 2.");case 14:if(e.shape[0]===A){c.next=16;break}throw new Error("min_lbfgsb_gen(fg,x0,bounds): bounds.shape[0] must be x0.shape[0].");case 16:if(2===e.shape[1]){c.next=18;break}throw new Error("min_lbfgsb_gen(fg,x0,bounds): bounds.shape[1] must be 2.");case 18:if(m*=1,g*=1,0<=m){c.next=22;break}throw new Error("min_lbfgsb_gen(fg,x0,bounds,opt): opt.updateTol most be non-negative.");case 22:if(0<g){c.next=24;break}throw new Error("min_lbfgsb_gen(fg,x0,bounds,opt): opt.scaleInit most be greater than 0.");case 24:e=e.data,m*=1,x=e.length;case 27:if(!((x-=2)>=0)){c.next=32;break}if(e[x+0]<=e[x+1]){c.next=30;break}throw new Error("Assertion failed.");case 30:c.next=27;break;case 32:if(M=r,r=void 0,k=n(M),N=(0,o["default"])(k,2),P=N[0],O=N[1],P*=1,O=(0,i.array)("float64",O),isFinite(P)){c.next=39;break}throw new Error("min_lbfgsb_gen(fg, x0, bounds): fg must return [float,float[]].");case 39:if(O.dtype.startsWith("float")){c.next=41;break}throw new Error("min_lbfgsb_gen(fg, x0, bounds): fg must return [float,float[]].");case 41:w=w(n),j=new u.LBFGSB_Solver(p,A),j.scale=1/g,S=Int32Array.from({length:A},(function(n,r){return r})),R=new Float64Array(A),I=new Float64Array(A),F=function(){var r=O.data.slice(),t=M.data.slice(),a=new Float64Array(A),l=j.compute_cauchyGeneralized(r,t,e,S,!1),u=(0,o["default"])(l,2),c=u[0],d=u[1];if(j.compute_subspace_Hv(r,a,S,c),!S.subarray(0,c).every((function(n){return 0===a[n]})))throw new Error("Assertion failed.");var p,v,y,_=function(){var n,r=1/0,o=h(S.subarray(c));try{for(o.s();!(n=o.n()).done;){var i=n.value;if(0!==a[i]){var f=e[2*i+(a[i]<0)],l=(t[i]-f)/a[i];if(!(0<=l))throw new Error("Assertion failed: "+l);var u=0;while(Math.sign(a[i])*(t[i]-l*a[i]-f)<0){if(++u>2)throw new Error("Assertion failed.");l=(0,s.nextDown)(l)}if(a[i]<0&&t[i]-l*a[i]>f)throw new Error("Assertion failed.");if(a[i]>0&&t[i]-l*a[i]<f)throw new Error("Assertion failed.");r=Math.min(r,l)}}}catch(d){o.e(d)}finally{o.f()}return r}();try{var g=w(new i.NDArray(E,t.slice()),P+d,new i.NDArray(E,r),new i.NDArray(E,a),void 0,void 0,_),b=(0,o["default"])(g,3);p=b[0],v=b[1],y=b[2]}catch(U){if(U instanceof f.LineSearchBoundReachedError||U instanceof f.LineSearchBisectionError)p=U.x,v=U.f,y=U.g;else{if(!(U instanceof f.LineSearchNoProgressError&&d<0))throw U;p=new i.NDArray(E,t);var x=n(new i.NDArray(E,t.slice())),k=(0,o["default"])(x,2);v=k[0],y=k[1]}}v*=1,p=(0,i.array)("float64",p),y=(0,i.array)("float64",y);for(var N=A;N-- >0;)R[N]=p.data[N]-M.data[N];for(var F=A;F-- >0;)I[F]=y.data[F]-O.data[F];if(R.every((function(n){return 0===n})))throw new f.LineSearchNoProgressError;for(var D=I.reduce((function(n,r){return Math.max(n,Math.abs(r))}),0),q=0,L=0,T=I.length;T-- >0;){var Y=R[T]/D,G=I[T]/D;q+=G*G,L+=Y*G}m*q<L&&(j.update(R,I),j.scale=q/L),M=p,P=v,O=y},D=a["default"].mark((function n(){var r;return a["default"].wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(M instanceof i.NDArray){n.next=2;break}throw new Error("Assertion failed.");case 2:if(O instanceof i.NDArray){n.next=4;break}throw new Error("Assertion failed.");case 4:if(M.shape[0]===A){n.next=6;break}throw new Error("Assertion#7 failed.");case 6:if(O.shape[0]===A){n.next=8;break}throw new Error("Assertion#8 failed.");case 8:if(1===M.ndim){n.next=10;break}throw new Error("Assertion#4 failed.");case 10:if(1===O.ndim){n.next=12;break}throw new Error("Assertion#6 failed.");case 12:if(!isNaN(P)){n.next=14;break}throw new Error("Assertion#5 failed.");case 14:return r=O.data.slice(),M.data.forEach((function(n,t){var a=e.subarray(2*t,2+2*t),i=(0,o["default"])(a,2),s=i[0],f=i[1],l=r[t];(0<l&&n===s||0>l&&n===f)&&(r[t]=0)})),n.next=18,[new i.NDArray(E,M.data.slice()),P,new i.NDArray(E,r),new i.NDArray(E,O.data.slice())];case 18:return n.prev=18,F(),n.abrupt("break",32);case 23:if(n.prev=23,n.t0=n["catch"](18),!(n.t0 instanceof f.LineSearchError&&j.m>0)){n.next=29;break}j.forget(j.m+1>>>1),n.next=30;break;case 29:throw n.t0;case 30:n.next=18;break;case 32:case"end":return n.stop()}}),n,null,[[18,23]])}));case 47:return c.delegateYield(D(),"t0",48);case 48:c.next=47;break;case 50:case"end":return c.stop()}}),c)}},99055:function(n,r,e){"use strict";e(21703);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r._min1d_interp_gg=i,r._min1d_interp_ffg=s,r._min1d_interp_ffgg=f;var a=t(e(42989)),o=e(42402);function i(n,r,e,t){if(n*=1,!isFinite(n))throw new Error("Assertion failed.");if(r*=1,!isFinite(r))throw new Error("Assertion failed.");if(e*=1,!isFinite(e))throw new Error("Assertion failed.");if(t*=1,!isFinite(t))throw new Error("Assertion failed.");var a=r-n,o=t-e;if(!(Math.sign(a)*o>0))throw new Error("Assertion failed: Bad curvature (i.e. no minimum).");return n-a/o*e}function s(n,r,e,t,a){if(n*=1,!isFinite(n))throw new Error("Assertion failed.");if(r*=1,!isFinite(r))throw new Error("Assertion failed.");if(e*=1,!isFinite(e))throw new Error("Assertion failed.");if(t*=1,!isFinite(t))throw new Error("Assertion failed.");if(a*=1,!isFinite(a))throw new Error("Assertion failed.");if(n===r)throw new Error("Assertion failed.");var o=r-n,i=(t-e)/o,s=n+.5*o*a/(a-i);return s}function f(n,r,e,t,i,s){if(n*=1,!isFinite(n))throw new Error("Assertion failed.");if(r*=1,!isFinite(r))throw new Error("Assertion failed.");if(e*=1,!isFinite(e))throw new Error("Assertion failed.");if(t*=1,!isFinite(t))throw new Error("Assertion failed.");if(i*=1,!isFinite(i))throw new Error("Assertion failed.");if(s*=1,!isFinite(s))throw new Error("Assertion failed.");if(n===r)throw new Error("Assertion failed.");t-=e,r-=n;var f=2*(3*t/r-s-2*i),l=(s-i-f)/r,u=(0,o.roots1d_polyquad)(i*r,f,l),c=(0,a["default"])(u,2),h=c[0],d=c[1];return(Math.sign(r)*l<0?h:d)+n}},26729:function(n,r,e){"use strict";e(21703),e(85827);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.albaali_fletcher=void 0;var a=t(e(42989)),o=e(30065),i=e(90053),s=e(19137),l=e(99055),u=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n,e=r.fRed,t=void 0===e?.1:e,u=r.gRed,c=void 0===u?.9:u,h=r.grow,d=void 0===h?Math.PI/3:h,p=r.shrinkLeast,v=void 0===p?.2:p;if(n={fRed:t,gRed:c,grow:d,shrinkLeast:v},t*=1,c*=1,d*=1,v*=1,!(t>0))throw new Error("albaali_fletcher(opt): opt.fRed must be positive.");if(!(t<c))throw new Error("albaali_fletcher(opt): opt.fRed must less than opt.gRed.");if(!(1>c))throw new Error("albaali_fletcher(opt): opt.gRed must less than 1.");if(!(1<d))throw new Error("albaali_fletcher(opt): opt.grow must larger than 1.");if(t<.5||console.warn("albaali_fletcher(opt): opt.fRed should be less than 0.5 to work properly with (quasi-)Newton methods."),!(v>=0))throw new Error("albaali_fletcher(opt): opt.shrinkLeast must be non-negative.");if(!(v<=.5))throw new Error("albaali_fletcher(opt): opt.shrinkLeast must not be greater than 0.5.");var w=1/v,y=w-1,m=function(n){return function(r,e,u,h){var p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,v=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,m=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1/0;if(r=(0,o.array)("float64",r),u=(0,o.array)("float64",u),e*=1,!(h instanceof o.NDArray))throw new Error("Assertion failed.");var _=h.shape,g=(0,a["default"])(_,1),b=g[0];if(1!==r.ndim)throw new Error("albaali_fletcher()(fg)(X0,f0,G0): X0.ndim must be 1.");if(1!==u.ndim)throw new Error("albaali_fletcher()(fg)(X0,f0,G0): G0.ndim must be 1.");if(1!==h.ndim)throw new Error("albaali_fletcher()(fg)(X0,f0,G0): negDir.ndim must be 1.");if(r.shape[0]!==b)throw new Error("albaali_fletcher()(fg)(X0,f0,G0): negDir and X0 must have the same shape.");if(u.shape[0]!==b)throw new Error("albaali_fletcher()(fg)(X0,f0,G0): negDir and G0 must have the same shape.");if(isNaN(e))throw new Error("albaali_fletcher()(fg)(X0,f0,G0): f0 is NaN.");if(0!==p)throw new Error("albaali_fletcher()(fg)(X0,f0,G0, αMin,α0,αMax): αMin !== 0 not (yet) supported.");if(h=h.data,null==v&&(v=Math.min(1,m/2)),!(p<=v))throw new Error("albaali_fletcher()(fg)(X0,f0,G0, αMin,α0,αMax): αMin !== 0 not (yet) supported.");if(!(m>=v))throw new Error("albaali_fletcher()(fg)(X0,f0,G0, αMin,α0,αMax): αMax must not be less than αMin.");if(0===m)throw new s.LineSearchNoProgressError;var A=function(n){return n.data.reduce((function(n,r,e){return n-h[e]*r}),0)},E=function(e){var t=new o.NDArray(_,r.data.map((function(n,r){return n-e*h[r]}))),i=n(new o.NDArray(_,t.data.slice())),s=(0,a["default"])(i,2),f=s[0],l=s[1];if(f*=1,l=(0,o.array)("float64",l),isNaN(f))throw new Error("more_thuente_u123()(fg)(X0,f0,G0): fg returned NaN.");if(1!==l.ndim)throw new Error("more_thuente_u123()(fg)(X0,f0,G0): fg returned gradient with invalid shape.");if(l.shape[0]!==b)throw new Error("more_thuente_u123()(fg)(X0,f0,G0): fg returned gradient with invalid shape.");var u=A(l);return[t,f,l,u]},x=A(u);if(0===x)throw new s.LineSearchNoProgressError;if(0<x)throw new Error("albaali_fletcher: Initial projected gradient not negative.");var M=0,k=1/0,N=v,P=e,O=NaN,j=x,S=NaN;n:for(;;){if(!isFinite(N))throw new Error("Assertion failed.");var R=E(N),I=(0,a["default"])(R,4),F=I[0],D=I[1],q=I[2],L=I[3];if(D-e>t*N*x||0<M&&D>=P){k=N,O=D,S=L;break n}if(Math.abs(L)<=-c*x)return[F,D,q];if(L>=0){k=M,M=N,O=P,P=D,S=j,j=L;break n}if(!(N<m))throw new s.LineSearchBoundReachedError(F,D,q);if(!(N<k))throw new s.LineSearchError("albaali_fletcher: Strong Wolfe condition not satisfiable in range.");M=N,N=Math.min(Math.max((0,i.nextUp)(N),N*d),m),P=D,j=L}if(M===k)throw new s.LineSearchError("albaali_fletcher: bracketing failed.");for(var T=function(){if(0===M)throw new s.LineSearchNoProgressError("strongWolfeLineSearch(): no progress.");throw new s.LineSearchBisectionError(X,f,G)},Y=1;;Y++){var U=Math.min(M,k),B=Math.max(M,k),J=Math.max((0,i.nextUp)(U),(B+y*U)/w),z=Math.min((0,i.nextDown)(B),(U+y*B)/w);if(2!==w&&J<z&&isFinite(O)&&isFinite(S)?(N=(0,l._min1d_interp_ffg)(M,k,P,O,j),J<=N?z>=N||(N=z):N=J):N=M+(k-M)/2,!(U<=N))throw new Error("Assertion failed.");if(!(B>=N))throw new Error("Assertion failed.");var C=E(N),V=(0,a["default"])(C,4),Q=V[0],W=V[1],H=V[2],K=V[3];if(W-e>t*N*x||W>=P)k===N&&T(),k=N,O=W,S=K;else{if(Math.abs(K)<=-c*x)return[Q,W,H];Math.sign(k-M)*K>=0&&(k=M,O=P,S=j),M===N&&T(),M=N,P=W,j=K}}}};return Object.defineProperty(m,"name",{value:"albaali_fletcher(".concat(JSON.stringify(n),")"),writable:!1}),Object.assign(m,n),Object.freeze(m),m};r.albaali_fletcher=u},17555:function(n,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=e(19137);Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[n]}})}));var a=e(25143);Object.keys(a).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(r,n,{enumerable:!0,get:function(){return a[n]}})}));var o=e(97442);Object.keys(o).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(r,n,{enumerable:!0,get:function(){return o[n]}})}));var i=e(39813);Object.keys(i).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(r,n,{enumerable:!0,get:function(){return i[n]}})}))},19137:function(n,r,e){"use strict";e(81299),e(21703);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.LineSearchBoundReachedError=r.LineSearchBisectionError=r.LineSearchNoProgressError=r.LineSearchError=void 0;var a=t(e(65053)),o=t(e(16125)),i=t(e(63490)),s=t(e(55156)),f=t(e(46907)),l=t(e(25629));function u(n){var r=c();return function(){var e,t=(0,f["default"])(n);if(r){var a=(0,f["default"])(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,s["default"])(this,e)}}function c(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var h=function(n){(0,i["default"])(e,n);var r=u(e);function e(){return(0,o["default"])(this,e),r.apply(this,arguments)}return e}((0,l["default"])(Error));r.LineSearchError=h;var d=function(n){(0,i["default"])(e,n);var r=u(e);function e(){return(0,o["default"])(this,e),r.apply(this,arguments)}return e}(h);r.LineSearchNoProgressError=d;var p=function(n){(0,i["default"])(e,n);var r=u(e);function e(n,t,i){var s;return(0,o["default"])(this,e),s=r.call(this),Object.assign((0,a["default"])(s),{x:n,f:t,g:i}),s}return e}(h);r.LineSearchBisectionError=p;var v=function(n){(0,i["default"])(e,n);var r=u(e);function e(n,t,i){var s;return(0,o["default"])(this,e),s=r.call(this),Object.assign((0,a["default"])(s),{x:n,f:t,g:i}),s}return e}(h);r.LineSearchBoundReachedError=v},25143:function(n,r,e){"use strict";e(21703),e(85827);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.more_thuente_abc=void 0;var a=t(e(42989)),o=e(30065),i=e(90053),s=e(19137),f=e(99055),l=Object.freeze({fRed:.01,gRed:.9,growMin:Math.PI/3,growMax:Math.E-1.5,shrinkLeast:.1}),u=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=0,e=Object.keys(n);r<e.length;r++){var t=e[r];t in l||console.warn('more_thuente_abc(opt): unknown parameter "'.concat(t,'" in opt.'))}var u=n=Object.assign({},l,n),c=u.fRed,h=u.gRed,d=u.growMin,p=u.growMax,v=u.shrinkLeast;if(c*=1,h*=1,d*=1,p*=1,v*=1,!(c>0))throw new Error("more_thuente_abc(opt): opt.fRed must be positive.");if(!(c<h))throw new Error("more_thuente_abc(opt): opt.fRed must less than opt.gRed.");if(!(1>h))throw new Error("more_thuente_abc(opt): opt.gRed must less than 1.");if(!(1<d))throw new Error("more_thuente_abc(opt): opt.growMin must larger than 1.");if(!(p>=d))throw new Error("more_thuente_abc(opt): opt.growMax must not be less than opt.growMin.");if(c<.5||console.warn("more_thuente_abc(opt): opt.fRed should be less than 0.5 to work properly with (quasi-)Newton methods."),!(v>=0))throw new Error("more_thuente_abc(opt): opt.shrinkLeast must be non-negative.");if(!(v<=.5))throw new Error("more_thuente_abc(opt): opt.shrinkLeast must not be greater than 0.5.");var w=function(n){return function(r,e,t,l){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,w=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,y=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1/0;if(r=(0,o.array)("float64",r),t=(0,o.array)("float64",t),e*=1,!(l instanceof o.NDArray))throw new Error("Assertion failed.");var m=l.shape,_=(0,a["default"])(m,1),g=_[0];if(1!==r.ndim)throw new Error("more_thuente_abc()(fg)(X0,f0,G0): X0.ndim must be 1.");if(1!==t.ndim)throw new Error("more_thuente_abc()(fg)(X0,f0,G0): G0.ndim must be 1.");if(1!==l.ndim)throw new Error("more_thuente_abc()(fg)(X0,f0,G0): negDir.ndim must be 1.");if(r.shape[0]!==g)throw new Error("more_thuente_abc()(fg)(X0,f0,G0): negDir and X0 must have the same shape.");if(t.shape[0]!==g)throw new Error("more_thuente_abc()(fg)(X0,f0,G0): negDir and G0 must have the same shape.");if(isNaN(e))throw new Error("more_thuente_abc()(fg)(X0,f0,G0): f0 is NaN.");if(0!==u)throw new Error("more_thuente_abc()(fg)(X0,f0,G0, αMin,α0,αMax): αMin !== 0 not (yet) supported.");if(l=l.data,null==w&&(w=Math.min(1,y/2)),!(u<=w))throw new Error("more_thuente_abc()(fg)(X0,f0,G0, αMin,α0,αMax): αMin must not be greater than α0.");if(!(y>=w))throw new Error("more_thuente_abc()(fg)(X0,f0,G0, αMin,α0,αMax): αMax must not be less than α0.");if(0===y)throw new s.LineSearchNoProgressError;var b=function(n){return n.data.reduce((function(n,r,e){return n-l[e]*r}),0)},A=function(e){var t=new o.NDArray(m,r.data.map((function(n,r){return n-e*l[r]}))),i=n(new o.NDArray(m,t.data.slice())),s=(0,a["default"])(i,2),f=s[0],u=s[1];if(f*=1,u=(0,o.array)("float64",u),isNaN(f))throw new Error("more_thuente_abc()(fg)(X0,f0,G0): fg returned NaN.");if(1!==u.ndim)throw new Error("more_thuente_abc()(fg)(X0,f0,G0): fg returned gradient with invalid shape.");if(u.shape[0]!==g)throw new Error("more_thuente_abc()(fg)(X0,f0,G0): fg returned gradient with invalid shape.");var c=b(u);return[t,f,u,c]},E=b(t);if(0===E)throw new s.LineSearchNoProgressError;if(0<E)throw new Error("more_thuente_abc: Initial projected gradient not negative.");var x=0,M=1/0,k=w,N=e,P=NaN,O=E,j=NaN;n:for(;;){if(!isFinite(k))throw new Error("Assertion failed: "+k);var S=A(k),R=(0,a["default"])(S,4),I=R[0],F=R[1],D=R[2],q=R[3];if(F-e<=c*k*E&&Math.abs(q)<=-h*E)return[I,F,D];if(F>N){M=k,P=F,j=q;break n}if(q>0){M=x,x=k,P=N,N=F,j=O,O=q;break n}if(!(k<y))throw new s.LineSearchBoundReachedError(I,F,D);if(!(k<Number.MAX_VALUE))throw new Error("more_thuente_abc: Infinity reached.");var L=void 0;L=O<q?(0,f._min1d_interp_gg)(x,k,O,q):k*d,L=Math.min(L,k*p),L=Math.max(L,k*d),k<L||(L=(0,i.nextUp)(k)),y>=L||(L=y),x=k,k=L,N=F,O=q}if(x===M)throw new s.LineSearchError("more_thuente_abc: bracketing failed.");for(var T=function(n,r,e){if(0===x)throw new s.LineSearchNoProgressError("strongWolfeLineSearch(): no progress.");throw new s.LineSearchBisectionError(n,r,e)},Y=1;;Y++){var G=Math.min(x,M),U=Math.max(x,M),B=Math.max((0,i.nextUp)(G),v*U+(1-v)*G),J=Math.min((0,i.nextDown)(U),v*G+(1-v)*U),z=x+(M-x)/2;if(.5!==v&&B<J&&isFinite(P)&&isFinite(j)){if(N<P){var C=(0,f._min1d_interp_ffgg)(x,M,N,P,O,j),X=(0,f._min1d_interp_ffg)(x,M,N,P,O);k=Math.abs(C-x)<Math.abs(X-x)?C:(C+X)/2}else if(Math.sign(O)*j<0){var V=(0,f._min1d_interp_ffgg)(x,M,N,P,O,j),Q=(0,f._min1d_interp_gg)(x,M,O,j);k=Math.abs(Q-M)<=Math.abs(V-M)?V:Q}else k=(0,f._min1d_interp_ffg)(x,M,N,P,O);B<=k?J>=k||(k=J):k=B}else k=z;var W=A(k),H=(0,a["default"])(W,4),K=H[0],$=H[1],Z=H[2],nn=H[3];if($-e<=c*k*E&&Math.abs(nn)<=-h*E)return[K,$,Z];$>N?(M===k&&T(K,$,Z),M=k,P=$,j=nn):(Math.sign(M-x)*nn>0&&(M=x,P=N,j=O),x===k&&T(K,$,Z),x=k,N=$,O=nn)}}};return Object.defineProperty(w,"name",{value:"more_thuente_abc(".concat(JSON.stringify(n),")"),writable:!1}),Object.assign(w,n),Object.freeze(w),w};r.more_thuente_abc=u},97442:function(n,r,e){"use strict";e(21703),e(85827);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.more_thuente_u123=void 0;var a=t(e(42989)),o=e(30065),i=e(90053),s=e(19137),f=e(99055),l=Object.freeze({fRed:.01,gRed:.9,growMin:Math.PI/3,growMax:Math.E-1.5,shrinkLeast:.1}),u=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=0,e=Object.keys(n);r<e.length;r++){var t=e[r];t in l||console.warn('more_thuente_u123(opt): unknown parameter "'.concat(t,'" in opt.'))}var u=n=Object.assign({},l,n),c=u.fRed,h=u.gRed,d=u.growMin,p=u.growMax,v=u.shrinkLeast;if(c*=1,h*=1,d*=1,p*=1,v*=1,!(c>0))throw new Error("more_thuente_u123(opt): opt.fRed must be positive.");if(!(c<h))throw new Error("more_thuente_u123(opt): opt.fRed must less than opt.gRed.");if(!(1>h))throw new Error("more_thuente_u123(opt): opt.gRed must less than 1.");if(!(1<d))throw new Error("more_thuente_u123(opt): opt.growMin must larger than 1.");if(!(p>=d))throw new Error("more_thuente_u123(opt): opt.growMax must not be less than opt.growMin.");if(c<.5||console.warn("more_thuente_u123(opt): opt.fRed should be less than 0.5 to work properly with (quasi-)Newton methods."),!(v>=0))throw new Error("more_thuente_u123(opt): opt.shrinkLeast must be non-negative.");if(!(v<=.5))throw new Error("more_thuente_u123(opt): opt.shrinkLeast must not be greater than 0.5.");var w=function(n){return function(r,e,t,l){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,w=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,y=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1/0;if(r=(0,o.array)("float64",r),t=(0,o.array)("float64",t),e*=1,!(l instanceof o.NDArray))throw new Error("Assertion failed.");var m=l.shape,_=(0,a["default"])(m,1),g=_[0];if(1!==r.ndim)throw new Error("more_thuente_u123()(fg)(X0,f0,G0): X0.ndim must be 1.");if(1!==t.ndim)throw new Error("more_thuente_u123()(fg)(X0,f0,G0): G0.ndim must be 1.");if(1!==l.ndim)throw new Error("more_thuente_u123()(fg)(X0,f0,G0): negDir.ndim must be 1.");if(r.shape[0]!==g)throw new Error("more_thuente_u123()(fg)(X0,f0,G0): negDir and X0 must have the same shape.");if(t.shape[0]!==g)throw new Error("more_thuente_u123()(fg)(X0,f0,G0): negDir and G0 must have the same shape.");if(0!==u)throw new Error("more_thuente_u123()(fg)(X0,f0,G0, αMin,α0,αMax): αMin !== 0 not (yet) supported.");if(isNaN(e))throw new Error("more_thuente_u123()(fg)(X0,f0,G0): f0 is NaN.");if(r.data.some(isNaN))throw new Error("more_thuente_u123()(fg)(X0,f0,G0): X0 contains NaN.");if(t.data.some(isNaN))throw new Error("more_thuente_u123()(fg)(X0,f0,G0): G0 contains NaN.");if(l=l.data,l.some(isNaN))throw new Error("Assertion failed.");if(null==w&&(w=Math.min(1,y/2)),!(u<=w))throw new Error("more_thuente_u123()(fg)(X0,f0,G0, αMin,α0,αMax): αMin must not be greater than α0.");if(!(y>=w))throw new Error("more_thuente_u123()(fg)(X0,f0,G0, αMin,α0,αMax): αMax must not be less than α0.");if(0===y)throw new s.LineSearchNoProgressError;var b=function(n){return n.data.reduce((function(n,r,e){return n-l[e]*r}),0)},A=function(e){var t=new o.NDArray(m,r.data.map((function(n,r){return n-e*l[r]}))),i=n(new o.NDArray(m,t.data.slice())),s=(0,a["default"])(i,2),f=s[0],u=s[1];if(f*=1,u=(0,o.array)("float64",u),isNaN(f))throw new Error("more_thuente_u123()(fg)(X0,f0,G0): fg returned NaN.");if(1!==u.ndim)throw new Error("more_thuente_u123()(fg)(X0,f0,G0): fg returned gradient with invalid shape.");if(u.shape[0]!==g)throw new Error("more_thuente_u123()(fg)(X0,f0,G0): fg returned gradient with invalid shape.");var c=b(u);return[t,f,u,c]},E=b(t);if(0===E)throw new s.LineSearchNoProgressError;if(0<E)throw new Error("more_thuente_u123: Initial projected gradient not negative.");var x=0,M=1/0,k=w,N=e,P=NaN,O=E,j=NaN;n:for(;;){if(!isFinite(k))throw new Error("Assertion failed.");var S=A(k),R=(0,a["default"])(S,4),I=R[0],F=R[1],D=R[2],q=R[3];if(F-e<=c*k*E&&Math.abs(q)<=-h*E)return[I,F,D];if(F-N>c*(k-x)*E){M=k,P=F,j=q;break n}if(q>0){M=x,x=k,P=N,N=F,j=O,O=q;break n}if(!(k<y))throw new s.LineSearchBoundReachedError(I,F,D);if(!(k<Number.MAX_VALUE))throw new Error("more_thuente_u123: Infinity reached.");var L=void 0;L=O<q?(0,f._min1d_interp_gg)(x,k,O,q):k*d,L=Math.min(L,k*p),L=Math.max(L,k*d),k<L||(L=(0,i.nextUp)(k)),y>=L||(L=y),x=k,k=L,N=F,O=q}if(x===M)throw new s.LineSearchError("more_thuente_u123: bracketing failed.");for(var T=function(n,r,e){if(0===x)throw new s.LineSearchNoProgressError("strongWolfeLineSearch(): no progress.");throw new s.LineSearchBisectionError(n,r,e)},Y=1;;Y++){var G=Math.min(x,M),U=Math.max(x,M),B=Math.max((0,i.nextUp)(G),v*U+(1-v)*G),J=Math.min((0,i.nextDown)(U),v*G+(1-v)*U),z=x+(M-x)/2;if(.5!==v&&B<J&&isFinite(P)&&isFinite(j)){if(N<P){var C=(0,f._min1d_interp_ffgg)(x,M,N,P,O,j),X=(0,f._min1d_interp_ffg)(x,M,N,P,O);k=Math.abs(C-x)<Math.abs(X-x)?C:(C+X)/2}else if(Math.sign(O)*j<0){var V=(0,f._min1d_interp_ffgg)(x,M,N,P,O,j),Q=(0,f._min1d_interp_gg)(x,M,O,j);k=Math.abs(Q-M)<=Math.abs(V-M)?V:Q}else k=(0,f._min1d_interp_ffg)(x,M,N,P,O);B<=k?J>=k||(k=J):k=B}else k=z;if(!(G<=k))throw new Error("Assertion failed.");if(!(U>=k))throw new Error("Assertion failed.");var W=A(k),H=(0,a["default"])(W,4),K=H[0],$=H[1],Z=H[2],nn=H[3];if($-e<=c*k*E&&Math.abs(nn)<=-h*E)return[K,$,Z];$-N>c*(k-x)*E?(M===k&&T(K,$,Z),M=k,P=$,j=nn):(Math.sign(M-x)*nn>0&&(M=x,P=N,j=O),x===k&&T(K,$,Z),x=k,N=$,O=nn)}}};return Object.defineProperty(w,"name",{value:"more_thuente_u123(".concat(JSON.stringify(n),")"),writable:!1}),Object.assign(w,n),Object.freeze(w),w};r.more_thuente_u123=u},39813:function(n,r,e){"use strict";var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.strong_wolfe=void 0;var a=t(e(42989)),o=t(e(10021)),i=e(26729);function s(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable}))),e.push.apply(e,t)}return e}function f(n){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?s(Object(e),!0).forEach((function(r){(0,o["default"])(n,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):s(Object(e)).forEach((function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))}))}return n}var l=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n=f({},n);for(var r=0,e=["c1","fRed","c2","gRed","c3","grow"];r<e.length;r++){var t=(0,a["default"])(e[r],2),o=t[0],s=t[1];!(s in n)&&o in n&&(console.warn("strong_wolfe(opt): opt.".concat(o," is deprecated, use opt.").concat(s," instead.")),n[s]=n[o],delete n[o])}return(0,i.albaali_fletcher)(n)};r.strong_wolfe=l},59588:function(n,r,e){"use strict";e(21703),e(48675),e(3462);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.fit_lm_gen=m,r.odr_lm_gen=r.tls_lm_gen=r.lsq_lm_gen=void 0;var a=t(e(9545)),o=t(e(42989)),i=e(30065),s=e(90053),f=e(30716),l=e(93393),u=e(86173),c=e(66153),h=a["default"].mark(v),d=a["default"].mark(m),p=function(n,r,e){return v(new u.TrustRegionSolverLSQ(n,r),e)};function v(n){var r,e,t,i,u,c,d,p,v,w,y,m,_,g,b,A,E,x,M,k,N,P,O,j,S,R,I,F,D,q,L,T,Y,G,U,B,J,z,C,X,V,Q,W,H,K,$,Z,nn,rn,en,tn,an,on,sn,fn,ln,un,cn,hn,dn=arguments;return a["default"].wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=dn.length>1&&void 0!==dn[1]?dn[1]:{},e=r.r0,t=void 0===e?1.1:e,i=r.rMin,u=void 0===i?0:i,c=r.rMax,d=void 0===c?1/0:c,p=r.rNewton,v=void 0===p?2:p,w=r.rTol,y=void 0===w?.05:w,m=r.lmLower,_=void 0===m?.001:m,g=r.shrinkLower,b=void 0===g?.05:g,A=r.shrinkUpper,E=void 0===A?.95:A,x=r.grow,M=void 0===x?1.4142135623730951:x,k=r.expectGainMin,N=void 0===k?.25:k,P=r.expectGainMax,O=void 0===P?.75:P,j=r.stuckLimit,S=void 0===j?64:j,0<=_){a.next=3;break}throw new Error("lsq_lm_gen(fJ, x0, opt): opt.lmLower must be within [0,1).");case 3:if(_<1){a.next=5;break}throw new Error("lsq_lm_gen(fJ, x0, opt): opt.lmLower must be within [0,1).");case 5:if(1>y){a.next=7;break}throw new Error("lsq_lm_gen(fJ, x0, opt): opt.rTol must be less than 1.");case 7:if(0<y){a.next=9;break}throw new Error("lsq_lm_gen(fJ, x0, opt): opt.rTol must be positive number.");case 9:if(0<t){a.next=11;break}throw new Error("lsq_lm_gen(fJ, x0, opt): opt.r0 must be positive number.");case 11:if(0<=u){a.next=13;break}throw new Error("lsq_lm_gen(fJ, x0, opt): opt.rMin must be non-negative.");case 13:if(u<=d){a.next=15;break}throw new Error("lsq_lm_gen(fJ, x0, opt): opt.rMin must not be greater than opt.rMax.");case 15:if(u<=t){a.next=17;break}throw new Error("lsq_lm_gen(fJ, x0, opt): opt.r0 must not be less than opt.rMin.");case 17:if(d>=t){a.next=19;break}throw new Error("lsq_lm_gen(fJ, x0, opt): opt.r0 must not be greater than opt.rMax.");case 19:if(1/(1+y)<v){a.next=21;break}throw new Error("lsq_lm_gen(fJ, x0, opt): opt.rGN must be greater than 1/(1+rTol).");case 21:if(0<b){a.next=23;break}throw new Error("lsq_lm_gen(fJ, x0, opt): opt.shrinkLower must be positive number.");case 23:if(b<=E){a.next=25;break}throw new Error("lsq_lm_gen(fJ, x0, opt): opt.shrinkLower must not be greater than opt.shrinkUpper.");case 25:if(E<1){a.next=27;break}throw new Error("lsq_lm_gen(fJ, x0, opt): opt.shrinkUpper must be less than 1.");case 27:if(1<M){a.next=29;break}throw new Error("lsq_lm_gen(fJ, x0, opt): opt.grow must be number greater than 1.");case 29:if(0<N){a.next=31;break}throw new Error("lsq_lm_gen(fJ, x0, opt): opt.expectGainMin must be positive number.");case 31:if(N<O){a.next=33;break}throw new Error("lsq_lm_gen(fJ, x0, opt): opt.expectGainMin must be less than expectGainMax.");case 33:if(O<1||console.warn("lsq_lm_gen(fJ, x0, opt): opt.expectGainMax should be less than 1."),0===S%1){a.next=36;break}throw new Error("lsq_lm_gen(fJ, x0, opt): opt.stuckLimit must be an integer.");case 36:if(0<=S){a.next=38;break}throw new Error("lsq_lm_gen(fJ, x0, opt): opt.stuckLimit must not be negative.");case 38:R=n.N,I=n.D,F=n.regularized_dX,D=n.G0,q=new f.FrobeniusNorm,L=-t*n.cauchyTravel()*n.scaledNorm(D),T=n.loss,Y=0;case 40:if(0!==Y){a.next=43;break}return a.next=43,n.report();case 43:if(G=n.computeNewtonRegularized(0),U=(0,o["default"])(G,2),B=U[0],J=U[1],isFinite(B)){a.next=46;break}throw new Error("Assertion failed.");case 46:if(z=B<=L*(1+y),z){a.next=85;break}for(q.reset(),C=R;C-- >0;)X=I[C],V=D[C],0!==X&&(V/=X),q.include(V);if(B-=L,isFinite(B)){a.next=53;break}throw new Error("Assertion failed.");case 53:if(0<B){a.next=55;break}throw new Error("Assertion failed.");case 55:if(0>J){a.next=57;break}throw new Error("Assertion failed.");case 57:Q=-B/J,W=q.result/L,H=0,K=-1;case 59:if(!(64<++K)){a.next=61;break}throw new Error("Assertion failed.");case 61:if(Q>=0){a.next=63;break}throw new Error("Assertion failed.");case 63:if(0<=W){a.next=65;break}throw new Error("Assertion failed.");case 65:if(Q<W){a.next=67;break}throw new Error("Assertion failed.");case 67:if(Q<H&&H<W||(H=Math.max(_*W,Math.sqrt(Q*W))),Q<H&&H<W){a.next=70;break}throw new Error("Assertion failed.");case 70:if($=n.computeNewtonRegularized(H),Z=(0,o["default"])($,2),B=Z[0],J=Z[1],isFinite(B)){a.next=76;break}throw new Error("Assertion failed.");case 76:if(!(Math.abs(L-B)<=L*y)){a.next=78;break}return a.abrupt("break",83);case 78:B<L&&(W=H),Q=Math.max(Q,H+(L-B)/J),H+=(L-B)/J*(B/L);case 81:a.next=59;break;case 83:if(Math.abs(n.scaledNorm(F)-L)<=L*y){a.next=85;break}throw new Error("Assertion failed.");case 85:if(n.scaledNorm(F)<=L*(1+y)){a.next=87;break}throw new Error("Assertion failed.");case 87:if(nn=n.considerMove(F),rn=(0,o["default"])(nn,2),en=rn[0],tn=rn[1],an=function(){return 1},on=T-en,sn=T-tn,!(sn<on*N)){a.next=103;break}for(fn=0,ln=R;ln-- >0;)fn+=F[ln]*D[ln];if(fn*=2,un=fn/(2*fn+T-tn),un>=b||(un=b),un<=E||(un=E),cn=Math.max(u*an(),L*un),cn!==L||T>tn){a.next=100;break}throw new l.OptimizationNoProgressError;case 100:L=cn,a.next=104;break;case 103:z?(hn=an(),L=Math.max(hn*u,Math.min(hn*d,v*B))):(sn>on*O||0===sn)&&(L=Math.min(d*an(),Math.max((0,s.nextUp)(L),L*M)));case 104:if(!(T>tn)){a.next=110;break}T=tn,n.makeConsideredMove(),Y=0,a.next=112;break;case 110:if(!(++Y>S)){a.next=112;break}throw new l.OptimizationNoProgressError("Too many unsuccessfull iterations.");case 112:a.next=40;break;case 114:case"end":return a.stop()}}),h)}r.lsq_lm_gen=p;var w=function(n,r,e,t){return v(new c.TrustRegionSolverTLS(n,r,e),t)};r.tls_lm_gen=w;var y=(0,c.odr_gen)(v);function m(n,r,e,t,s){var f,l,u,c,h,v,w,y,m,_,g;return a["default"].wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e instanceof Function){a.next=2;break}throw new Error("fit_lm_gen(x,y, fg, p0): fg must be a function.");case 2:if(n=(0,i.asarray)(n),r=(0,i.asarray)("float64",r),t=(0,i.asarray)("float64",t),f=Float64Array,2===n.ndim){a.next=8;break}throw new Error("fit_lm_gen(x,y, fg, p0): x.ndim must be 2.");case 8:if(1===r.ndim){a.next=10;break}throw new Error("fit_lm_gen(x,y, fg, p0): y.ndim must be 1.");case 10:if(1===t.ndim){a.next=12;break}throw new Error("fit_lm_gen(x,y, fg, p0): p0.ndim must be 1.");case 12:if(l=(0,o["default"])(t.shape,1),u=l[0],c=(0,o["default"])(n.shape,2),h=c[0],v=c[1],w=Int32Array.of(v),h==r.shape[0]){a.next=15;break}throw new Error("fit_lm_gen(x,y, fg, p0): x.shape[0] must be equal to y.shape[0].");case 15:return n=n.data.slice(),r=r.data,Object.freeze(n.buffer),n=Array.from({length:h},(function(r,e){return Object.freeze(new i.NDArray(w,n.subarray(v*e,v*e+1)))})),Object.freeze(n),y=new f(h),m=new f(h*u),_=[new i.NDArray(Int32Array.of(h),y),new i.NDArray(Int32Array.of(h,u),m)],g=function(t){var a=e(t);if(!(a instanceof Function))throw new Error;for(var s=h;s-- >0;){var f=a(n[s]),l=(0,o["default"])(f,2),c=l[0],d=l[1];if(c=(0,i.asarray)(c),d=(0,i.asarray)(d),0!==c.ndim)throw new Error("fit_lm_gen(x,y, fg, p0): fg must have signature float[nParams] => float[nDim] => [float, float[nParams]].");if(1!==d.ndim)throw new Error("fit_lm_gen(x,y, fg, p0): fg must have signature float[nParams] => float[nDim] => [float, float[nParams]].");if(d.shape[0]!==u)throw new Error("fit_lm_gen(x,y, fg, p0): fg must have signature float[nParams] => float[nDim] => [float, float[nParams]].");if(c=c.data[0],d=d.data,isNaN(c))throw new Error("fit_lm_gen(x,y, fg, p0): NaN encountered.");if(d.some(isNaN))throw new Error("fit_lm_gen(x,y, fg, p0): NaN encountered.");y[s]=c-r[s];for(var p=u;p-- >0;)m[u*s+p]=d[p]}return _},a.delegateYield(p(g,t,s),"t0",23);case 23:case"end":return a.stop()}}),d)}r.odr_lm_gen=y},49681:function(n,r,e){"use strict";e(48675),e(3462),e(21703);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.num_grad_forward=r.num_grad=void 0;var a=t(e(42989)),o=t(e(25069)),i=e(30065),s=e(11882),f=Float64Array.of(2,1,-1,-2),l=Float64Array.of(-1,8,-8,1),u=12,c=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=r.h_rel,t=void 0===e?void 0:e,a=r.h_abs,c=void 0===a?void 0:a;return function(r){r=(0,i.array)("float",r);var e="float32"===r.dtype?"float32":"float64",a=s.ARRAY_TYPES[e],h=r.shape;r=r.data;var d=null,p=null,v=null!=t?t:Math.pow((0,s.eps)(e),1/3),w=null!=c?c:Math.pow((0,s.eps)(e),1/3),y=Math.max(Math.abs(r[0])*v,w),m=function(){var e=new i.NDArray(h,a.from(r));return e.data[0]+=y*f[0],n(e)}();if("number"===typeof m){p=h,d=new Float64Array(r.length),d[0]=m*l[0];n:for(var _=0,g=1;;g=0){for(;g<f.length;g++){var b=new i.NDArray(h,a.from(r));b.data[_]+=y*f[g],m=n(b),d[_]+=m*l[g]}if(d[_]/=y*u,!(++_<r.length))break n;y=Math.max(Math.abs(r[_])*v,w)}}else{m=(0,i.array)("float",m);var A=m.shape;m=m.data;var E=m.length,x=r.length;p=Int32Array.of.apply(Int32Array,(0,o["default"])(A).concat((0,o["default"])(h))),d=new Float64Array(m.length*r.length);for(var M=0;M<E;M++)d[x*M]=m[M]*l[0];n:for(var k=0,N=1;;N=0){for(;N<f.length;N++){var P=new i.NDArray(h,a.from(r));if(P.data[k]+=y*f[N],m=(0,i.array)("float",n(P)),m.ndim!==A.length)throw new Error("num_grad(f)(x): return shape of f must be consistent.");for(var O=A.length;O-- >0;)if(m.shape[O]!==A[O])throw new Error("num_grad(f)(x): return shape of f must be consistent.");m=m.data;for(var j=0;j<E;j++)d[x*j+k]+=m[j]*l[N]}for(var S=0;S<E;S++)d[x*S+k]/=y*u;if(!(++k<x))break n;y=Math.max(Math.abs(r[k])*v,w)}}return new i.NDArray(p,d)}};r.num_grad=c;var h=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=r.h_rel,t=void 0===e?void 0:e,o=r.h_abs,f=void 0===o?void 0:o;return function(r){r=(0,i.array)(r);var e="float32"===r.dtype?"float32":"float64",o=s.ARRAY_TYPES[e],l=r.shape;r=r.data;var u=new o(r.length),c=null!=t?t:Math.pow((0,s.eps)(e),1/3),h=null!=f?f:Math.pow((0,s.eps)(e),1/3),d=n(new i.NDArray(l,r.slice()));u.fill(-1.5*d);for(var p=r.length;p-- >0;){for(var v=Math.max(Math.abs(r[p])*c,h),w=0,y=[[1*v,2],[2*v,-.5]];w<y.length;w++){var m=(0,a["default"])(y[w],2),_=m[0],g=m[1],b=new i.NDArray(l,o.from(r));b.data[p]+=_,u[p]+=n(b)*g}u[p]/=v}return new i.NDArray(l,u)}};r.num_grad_forward=h},93393:function(n,r,e){"use strict";e(81299),e(21703);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.OptimizationNoProgressError=r.OptimizationError=void 0;var a=t(e(16125)),o=t(e(63490)),i=t(e(55156)),s=t(e(46907)),f=t(e(25629));function l(n){var r=u();return function(){var e,t=(0,s["default"])(n);if(r){var a=(0,s["default"])(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,i["default"])(this,e)}}function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var c=function(n){(0,o["default"])(e,n);var r=l(e);function e(){return(0,a["default"])(this,e),r.apply(this,arguments)}return e}((0,f["default"])(Error));r.OptimizationError=c;var h=function(n){(0,o["default"])(e,n);var r=l(e);function e(){return(0,a["default"])(this,e),r.apply(this,arguments)}return e}(c);r.OptimizationNoProgressError=h},42402:function(n,r,e){"use strict";function t(n,r,e){if(isNaN(n))throw new Error("roots_quad_poly(a,b,c): a must be number.");if(isNaN(r))throw new Error("roots_quad_poly(a,b,c): b must be number.");if(isNaN(e))throw new Error("roots_quad_poly(a,b,c): c must be number.");if(0===e){var t=-n/r;return[t,t]}if(n/=e,r/=e,0===r){var a=Math.sqrt(-n);return[-a,+a]}if(0===n)return 0<=r?[-r,0]:[0,-r];e=Math.sqrt(Math.abs(n))*Math.sign(r),r/=2*e;var o,i,s=1024*Number.EPSILON*64;if(0<n){if(r<1-s)throw new Error("Complex roots not yet supported: "+r);r<1&&(r=1),o=-r-Math.sqrt((r+1)*(r-1)),i=1/o}else o=-r-Math.sqrt(r*r+1),i=-1/o;return o*=e,i*=e,o<=i?[o,i]:[i,o]}e(21703),Object.defineProperty(r,"__esModule",{value:!0}),r.roots1d_polyquad=t},45456:function(n,r,e){"use strict";e(21703),Object.defineProperty(r,"__esModule",{value:!0}),r.root1d_bisect=a;var t=e(90053);function a(n,r,e){if(r*=1,e*=1,isNaN(r))throw new Error("root1d_bisect(F,x1,x2): x1 must be a number.");if(isNaN(e))throw new Error("root1d_bisect(F,x1,x2): x2 must be a number.");if(!(n instanceof Function))throw new Error("root1d_bisect(F,x1,x2): F must be a function.");var a=n(r),o=n(e);if(0===a)return r;if(0===o)return e;if(a>o){var i=[o,a];a=i[0],o=i[1];var s=[e,r];r=s[0],e=s[1]}if(!(a<0))throw new Error("root1d_bisect(F,x1,x2): F(x1) and F(x2) must have opposite signs.");if(!(o>0))throw new Error("root1d_bisect(F,x1,x2): F(x1) and F(x2) must have opposite signs.");for(;;){var f=(0,t.midl)(r,e),l=n(f);if(0===l)return f;if(r===f)break;if(isNaN(l))throw new Error("NaN encountered.");l<0&&(r=f,a=l),l>0&&(e=f,o=l)}return Math.abs(a)<=Math.abs(o)?r:e}},44685:function(n,r,e){"use strict";e(21703),Object.defineProperty(r,"__esModule",{value:!0}),r.root1d_brent=f;var t=e(90053),a=function(n,r){return Math.min(n,r)},o=function(n,r){return Math.max(n,r)},i=function(n){return Math.abs(n)},s=function(n){return Math.sign(n)};function f(n,r,e){if(r*=1,e*=1,isNaN(r))throw new Error("root1d_bisect(F,a,b): a must be a number.");if(isNaN(e))throw new Error("root1d_bisect(F,a,b): b must be a number.");if(!(n instanceof Function))throw new Error("root1d_bisect(F,a,b): F must be a function.");var f=n(r),l=n(e);if(!(s(f)*l<=0))throw new Error("root1d_falsi(F,a,b): F(a) and F(b) must have opposite signs.");n:for(;;){var u=r,c=f,h=e-r,d=h;do{i(c)<i(l)&&(r=e,e=u,u=r,f=l,l=c,c=f);var p=(0,t.nextUp)(a(e,u)),v=(0,t.nextDown)(o(e,u));if(v<p||0===l)break n;var w=u-e;if(i(d)<Number.EPSILON*i(e)||i(f)<=i(l))d=h=w/2;else{var y=void 0,m=void 0,_=l/f;if(r===u)y=w*_,m=1-_;else{var g=l/c;m=f/c,y=_*(w*m*(m-g)-(e-r)*(g-1)),m=(m-1)*(g-1)*(_-1)}y<=0?y=-y:m=-m,_=d,d=h,4*y>=3*w*m||y>=i(.5*_*m)?d=h=w/2:h=y/m}r=e,f=l,e+=h,e>=p||(e=p),e<=v||(e=v),l=n(e)}while(s(l)*c<=0)}return e}},86458:function(n,r,e){"use strict";e(21703),Object.defineProperty(r,"__esModule",{value:!0}),r.root1d_illinois=a;var t=e(90053);function a(n,r,e){if(r*=1,e*=1,isNaN(r))throw new Error("root1d_falsi(F,x1,x2): x1 must be a number.");if(isNaN(e))throw new Error("root1d_falsi(F,x1,x2): x2 must be a number.");if(!(n instanceof Function))throw new Error("root1d_falsi(F,x1,x2): F must be a function.");var a=n(r),o=n(e),i=a;if(0===a)return r;if(0===o)return e;if(!(Math.sign(a)*o<0))throw new Error("root1d_falsi(F,x1,x2): F(x1) and F(x2) must have opposite signs.");for(;;){var s=(0,t.nextUp)(Math.min(r,e)),f=(0,t.nextDown)(Math.max(r,e));if(f<s)break;var l=(r*o-e*a)/(o-a);l>=s||(l=s),l<=f||(l=f);var u=n(l);if(0===u)return l;if(isNaN(u))throw new Error("NaN encountered.");if(Math.sign(o)*u<0)r=e,e=l,a=o,o=u,i=a;else{var c=1-u/o/(1-u/a);c>0||(c=.5),a*=c,e=l,o=u}}return Math.abs(i)<=Math.abs(o)?r:e}},90966:function(n,r,e){"use strict";e(21703),e(48675),e(3462);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.beale=void 0;var a=t(e(25069)),o=e(30065),i=function(n){if(n=(0,o.asarray)(n),n.ndim<1)throw new Error("beale(x): x.ndim must be at least 1.");if(2!==n.shape[n.ndim-1])throw new Error("beale(x): x.shape[-1] must be 2.");var r=n.shape.slice(0,-1),e=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length/2);n=n.data;for(var t=n.length,a=e.length;a-- >0;){t-=2;var i=n[t+0],s=n[t+1],f=1.5-i*(1-s),l=2.25-i*(1-s*s),u=2.625-i*(1-s*s*s);e[a]=f*f+l*l+u*u}return new o.NDArray(r,e)};r.beale=i,i.nIn=2,i.nOut=3,i.minima=i.minima_global=i.roots=[[3,.5]],i.grad=function(n){if(n=(0,o.asarray)(n),n.ndim<1)throw new Error("beale.grad(x): x.ndim must be at least 1.");if(2!==n.shape[n.ndim-1])throw new Error("beale.grad(x): x.shape[-1] must be 2.");var r=n.shape,e=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length);n=n.data;for(var t=n.length;(t-=2)>=0;){var a=n[t+0],i=n[t+1],s=1.5-a*(1-i),f=2.25-a*(1-i*i),l=2.625-a*(1-i*i*i);e[t+0]=2*(s*(i-1)+f*(i*i-1)+l*(i*i*i-1)),e[t+1]=2*a*(1*s+i*(2*f+3*l*i))}return new o.NDArray(r,e)},i.hess=function(n){if(n=(0,o.asarray)(n),n.ndim<1)throw new Error("beale.hess(x): x.ndim must be at least 1.");if(2!==n.shape[n.ndim-1])throw new Error("beale.hess(x): x.shape[-1] must be 2.");var r=Int32Array.of.apply(Int32Array,(0,a["default"])(n.shape).concat([2])),e=new("float32"===n.dtype?Float32Array:Float64Array)(2*n.data.length);n=n.data;for(var t=e.length,i=n.length;(i-=2)>=0;){t-=4;var s=n[i+0],f=n[i+1],l=2.25-s*(1-f*f),u=2.625-s*(1-f*f*f);e[t+0]=2*((1-f)*(1-f)+(1-f*f)*(1-f*f)+(1-f*f*f)*(1-f*f*f)),e[t+1]=e[t+2]=2*(1.5-2*(1-f)*s+4.5*f-4*(1-f*f)*s*f+7.875*f*f-6*(1-f*f*f)*s*f*f),e[t+3]=2*(1*s*s+4*s*s*f*f+2*l*s+9*s*s*f*f*f*f+6*u*s*f)}return new o.NDArray(r,e)},i.lsq=function(n){if(n=(0,o.asarray)(n),n.ndim<1)throw new Error("beale.lsq(x): x.ndim must be at least 1.");if(2!==n.shape[n.ndim-1])throw new Error("beale.lsq(x): x.shape[-1] must be 2.");var r=n.shape.slice(),e=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length/2*3);r[r.length-1]=3,n=n.data;for(var t=n.length,a=e.length;(t-=2)>=0;){a-=3;var i=n[t+0],s=n[t+1];e[a+0]=1.5-i*(1-s),e[a+1]=2.25-i*(1-s*s),e[a+2]=2.625-i*(1-s*s*s)}return new o.NDArray(r,e)},i.lsq_jac=function(n){if(n=(0,o.asarray)(n),n.ndim<1)throw new Error("beale.lsq_jac(x): x.ndim must be at least 1.");if(2!==n.shape[n.ndim-1])throw new Error("beale.lsq_jac(x): x.shape[-1] must be 2.");var r=Int32Array.of.apply(Int32Array,(0,a["default"])(n.shape.slice(0,-1)).concat([3,2])),e=new("float32"===n.dtype?Float32Array:Float64Array)(3*n.data.length);n=n.data;for(var t=n.length,i=e.length;(t-=2)>=0;){i-=6;var s=n[t+0],f=n[t+1];e[i+0]=f-1,e[i+1]=1*s,e[i+2]=f*f-1,e[i+3]=2*s*f,e[i+4]=f*f*f-1,e[i+5]=3*s*f*f}return new o.NDArray(r,e)},Object.freeze(i)},36958:function(n,r,e){"use strict";e(21703),e(48675),e(3462);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.brown_badscale=void 0;var a=t(e(25069)),o=e(30065),i=function(n){if(n=(0,o.asarray)(n),n.ndim<1)throw new Error("brown_badscale(x): x.ndim must be at least 1.");if(2!==n.shape[n.ndim-1])throw new Error("brown_badscale(x): x.shape[-1] must be 2.");var r=n.shape.slice(0,-1),e=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length/2);n=n.data;for(var t=n.length,a=e.length;a-- >0;){t-=2;var i=n[t+0],s=n[t+1],f=i-1e6,l=s-2e-6,u=i*s-2;e[a]=f*f+l*l+u*u}return new o.NDArray(r,e)};r.brown_badscale=i,i.nIn=2,i.nOut=3,i.minima=i.minima_global=i.roots=[[1e6,2e-6]],i.grad=function(n){if(n=(0,o.asarray)(n),n.ndim<1)throw new Error("brown_badscale.grad(x): x.ndim must be at least 1.");if(2!==n.shape[n.ndim-1])throw new Error("brown_badscale.grad(x): x.shape[-1] must be 2.");var r=n.shape,e=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length);n=n.data;for(var t=n.length;(t-=2)>=0;){var a=n[t+0],i=n[t+1],s=a-1e6,f=i-2e-6,l=a*i-2;e[t+0]=2*(s+l*i),e[t+1]=2*(f+l*a)}return new o.NDArray(r,e)},i.hess=function(n){if(n=(0,o.asarray)(n),n.ndim<1)throw new Error("brown_badscale.hess(x): x.ndim must be at least 1.");if(2!==n.shape[n.ndim-1])throw new Error("brown_badscale.hess(x): x.shape[-1] must be 2.");var r=Int32Array.of.apply(Int32Array,(0,a["default"])(n.shape).concat([2])),e=new("float32"===n.dtype?Float32Array:Float64Array)(2*n.data.length);n=n.data;for(var t=e.length,i=n.length;(i-=2)>=0;){t-=4;var s=n[i+0],f=n[i+1],l=s*f-2;e[t+0]=2*(1+f*f),e[t+1]=e[t+2]=2*(l+s*f),e[t+3]=2*(1+s*s)}return new o.NDArray(r,e)},i.lsq=function(n){if(n=(0,o.asarray)(n),n.ndim<1)throw new Error("brown_badscale.lsq(x): x.ndim must be at least 1.");if(2!==n.shape[n.ndim-1])throw new Error("brown_badscale.lsq(x): x.shape[-1] must be 2.");var r=n.shape.slice(),e=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length/2*3);r[r.length-1]=3,n=n.data;for(var t=n.length,a=e.length;(t-=2)>=0;){a-=3;var i=n[t+0],s=n[t+1];e[a+0]=i-1e6,e[a+1]=s-2e-6,e[a+2]=i*s-2}return new o.NDArray(r,e)},i.lsq_jac=function(n){if(n=(0,o.asarray)(n),n.ndim<1)throw new Error("brown_badscale.lsq_jac(x): x.ndim must be at least 1.");if(2!==n.shape[n.ndim-1])throw new Error("brown_badscale.lsq_jac(x): x.shape[-1] must be 2.");var r=Int32Array.of.apply(Int32Array,(0,a["default"])(n.shape.slice(0,-1)).concat([3,2])),e=new("float32"===n.dtype?Float32Array:Float64Array)(3*n.data.length);n=n.data;for(var t=n.length,i=e.length;(t-=2)>=0;){i-=6;var s=n[t+0],f=n[t+1];e[i+0]=1,e[i+1]=0,e[i+2]=0,e[i+3]=1,e[i+4]=f,e[i+5]=s}return new o.NDArray(r,e)},Object.freeze(i)},60689:function(n,r,e){"use strict";e(21703),e(48675),e(3462);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.freudenstein_roth=void 0;var a=t(e(25069)),o=e(30065),i=function(n){if(n=(0,o.asarray)(n),n.ndim<1)throw new Error("freudenstein_roth(x): x.ndim must be at least 1.");if(2!==n.shape[n.ndim-1])throw new Error("freudenstein_roth(x): x.shape[-1] must be 2.");var r=n.shape.slice(0,-1),e=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length/2);n=n.data;for(var t=n.length,a=e.length;a-- >0;){t-=2;var i=n[t+0],s=n[t+1],f=-13+i+((5-s)*s-2)*s,l=-29+i+((1+s)*s-14)*s;e[a]=f*f+l*l}return new o.NDArray(r,e)};r.freudenstein_roth=i,i.nIn=i.nOut=2,i.roots=[[5,4]],i.minima_global=[[5,4]],i.minima=[[5,4],[(53-Math.sqrt(352))/3,(2-Math.sqrt(22))/3]],i.grad=function(n){if(n=(0,o.asarray)(n),n.ndim<1)throw new Error("freudenstein_roth.grad(x): x.ndim must be at least 1.");if(2!==n.shape[n.ndim-1])throw new Error("freudenstein_roth.grad(x): x.shape[-1] must be 2.");var r=n.shape,e=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length);n=n.data;for(var t=n.length;(t-=2)>=0;){var a=n[t+0],i=n[t+1];e[t+0]=4*a-84+(12*i-32)*i,e[t+1]=864-(32-24*i)*a+(24+((8+(12*i-40)*i)*i-240)*i)*i}return new o.NDArray(r,e)},i.hess=function(n){if(n=(0,o.asarray)(n),n.ndim<1)throw new Error("freudenstein_roth.hess(x): x.ndim must be at least 1.");if(2!==n.shape[n.ndim-1])throw new Error("freudenstein_roth.hess(x): x.shape[-1] must be 2.");var r=Int32Array.of.apply(Int32Array,(0,a["default"])(n.shape).concat([2])),e=new("float32"===n.dtype?Float32Array:Float64Array)(2*n.data.length);n=n.data;for(var t=e.length,i=n.length;(i-=2)>=0;){t-=4;var s=n[i+0],f=n[i+1],l=-13+s+((5-f)*f-2)*f,u=-29+s+((1+f)*f-14)*f,c=(10-3*f)*f-2,h=(2+3*f)*f-14;e[t+0]=4,e[t+1]=e[t+2]=24*f-32,e[t+3]=l*(20-12*f)+2*c*c+u*(4+12*f)+2*h*h}return new o.NDArray(r,e)},i.lsq=function(n){if(n=(0,o.asarray)(n),n.ndim<1)throw new Error("freudenstein_roth.lsq(x): x.ndim must be at least 1.");if(2!==n.shape[n.ndim-1])throw new Error("freudenstein_roth.lsq(x): x.shape[-1] must be 2.");var r=n.shape.slice(),e=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length);n=n.data;for(var t=n.length;(t-=2)>=0;){var a=n[t+0],i=n[t+1];e[t+0]=-13+a+((5-i)*i-2)*i,e[t+1]=-29+a+((1+i)*i-14)*i}return new o.NDArray(r,e)},i.lsq_jac=function(n){if(n=(0,o.asarray)(n),n.ndim<1)throw new Error("freudenstein_roth.lsq_jac(x): x.ndim must be at least 1.");if(n.shape[n.ndim-1]<2)throw new Error("freudenstein_roth.lsq_jac(x): x.shape[-1] must be 2.");var r=n.shape[n.ndim-1],e=2*(r-1),t=Int32Array.of.apply(Int32Array,(0,a["default"])(n.shape).concat([2])),i=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length*e);n=n.data;for(var s=n.length,f=i.length;(f-=4)>=0;){s-=2;n[s+0];var l=n[s+1];i[f+0]=1,i[f+1]=(10-3*l)*l-2,i[f+2]=1,i[f+3]=(2+3*l)*l-14}return new o.NDArray(t,i)},Object.freeze(i)},15909:function(n,r,e){"use strict";e(21703),e(48675),e(3462),e(25438);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.helical_valley=void 0;var a=t(e(25069)),o=e(30065),i=function(n,r){return Math.atan2(n*(r<0||Object.is(r,-0)?-1:1),Math.abs(r))},s=function(n){if(n=(0,o.asarray)(n),n.ndim<1)throw new Error("helical_valley(x): x.ndim must be at least 1.");if(3!==n.shape[n.ndim-1])throw new Error("helical_valley(x): x.shape[-1] must be 3.");var r=n.shape.slice(0,-1),e=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length/3);n=n.data;for(var t=n.length,a=e.length;a-- >0;){t-=3;var s=n[t+0],f=n[t+1],l=n[t+2],u=10*l-50*(i(f,s)/Math.PI+(s<0)),c=10*Math.hypot(f,s)-10,h=l;e[a]=u*u+c*c+h*h}return new o.NDArray(r,e)};r.helical_valley=s,s.nIn=s.nOut=3,s.minima=s.minima_global=s.roots=[[1,0,0]],s.grad=function(n){if(n=(0,o.asarray)(n),n.ndim<1)throw new Error("helical_valley.grad(x): x.ndim must be at least 1.");if(3!==n.shape[n.ndim-1])throw new Error("helical_valley.grad(x): x.shape[-1] must be 3.");var r=n.shape,e=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length);n=n.data;for(var t=n.length;(t-=3)>=0;){var a=n[t+0],s=n[t+1],f=n[t+2],l=10*f-50*(i(s,a)/Math.PI+(a<0));e[t+0]=100*(a*(2-2/Math.hypot(s,a))+s*l/(Math.PI*(s*s+a*a))),e[t+1]=100*(s*(2-2/Math.hypot(s,a))-a*l/(Math.PI*(s*s+a*a))),e[t+2]=20*l+2*f}return new o.NDArray(r,e)},s.hess=function(n){if(n=(0,o.asarray)(n),n.ndim<1)throw new Error("helical_valley.hess(x): x.ndim must be at least 1.");if(3!==n.shape[n.ndim-1])throw new Error("helical_valley.hess(x): x.shape[-1] must be 2.");var r=Int32Array.of.apply(Int32Array,(0,a["default"])(n.shape).concat([3])),e=new("float32"===n.dtype?Float32Array:Float64Array)(3*n.data.length);n=n.data;for(var t=e.length,s=n.length;(s-=3)>=0;){t-=9;var f=n[s+0],l=n[s+1],u=n[s+2],c=10*u-50*(i(l,f)/Math.PI+(f<0)),h=f*f+l*l;e[t+0]=200*(1-l*l/Math.pow(h,1.5)+(25*l/Math.PI-f*c)*l/(Math.PI*h*h)),e[t+1]=100/Math.PI*c/h+200*f*l/Math.pow(h,1.5)-(5e3*f/Math.PI+200*l*c)*l/(Math.PI*h*h),e[t+2]=1e3/Math.PI*l/h,e[t+3]=e[t+1],e[t+4]=200*(1-f*f/Math.pow(h,1.5)+(25*f/Math.PI+l*c)*f/(Math.PI*h*h)),e[t+5]=-1e3/Math.PI*f/h,e[t+6]=e[t+2],e[t+7]=e[t+5],e[t+8]=202}return new o.NDArray(r,e)},s.lsq=function(n){if(n=(0,o.asarray)(n),n.ndim<1)throw new Error("helical_valley.lsq(x): x.ndim must be at least 1.");if(3!==n.shape[n.ndim-1])throw new Error("helical_valley.lsq(x): x.shape[-1] must be 3.");var r=n.shape.slice(),e=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length);n=n.data;for(var t=n.length;(t-=3)>=0;){var a=n[t+0],s=n[t+1],f=n[t+2];e[t+0]=10*f-50*(i(s,a)/Math.PI+(a<0)),e[t+1]=10*Math.hypot(s,a)-10,e[t+2]=f}return new o.NDArray(r,e)},s.lsq_jac=function(n){if(n=(0,o.asarray)(n),n.ndim<1)throw new Error("helical_valley.lsq_jac(x): x.ndim must be at least 1.");if(3!==n.shape[n.ndim-1])throw new Error("helical_valley.lsq_jac(x): x.shape[-1] must be 3.");var r=Int32Array.of.apply(Int32Array,(0,a["default"])(n.shape).concat([3])),e=new("float32"===n.dtype?Float32Array:Float64Array)(3*n.data.length);n=n.data;for(var t=n.length,i=e.length;(t-=3)>=0;){i-=9;var s=n[t+0],f=n[t+1];e[i+0]=50/Math.PI*f/(f*f+s*s),e[i+1]=-50/Math.PI*s/(f*f+s*s),e[i+2]=10,e[i+3]=10*s/Math.hypot(f,s),e[i+4]=10*f/Math.hypot(f,s),e[i+5]=0,e[i+6]=0,e[i+7]=0,e[i+8]=1}return new o.NDArray(r,e)},Object.freeze(s)},36405:function(n,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=e(90966);Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[n]}})}));var a=e(36958);Object.keys(a).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(r,n,{enumerable:!0,get:function(){return a[n]}})}));var o=e(60689);Object.keys(o).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(r,n,{enumerable:!0,get:function(){return o[n]}})}));var i=e(15909);Object.keys(i).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(r,n,{enumerable:!0,get:function(){return i[n]}})}));var s=e(86633);Object.keys(s).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(r,n,{enumerable:!0,get:function(){return s[n]}})}));var f=e(92467);Object.keys(f).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(r,n,{enumerable:!0,get:function(){return f[n]}})}));var l=e(41925);Object.keys(l).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(r,n,{enumerable:!0,get:function(){return l[n]}})}));var u=e(95933);Object.keys(u).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(r,n,{enumerable:!0,get:function(){return u[n]}})}))},86633:function(n,r,e){"use strict";e(81299),e(21703),e(48675),e(3462);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.JennrichSampson=void 0;var a=t(e(25069)),o=t(e(16125)),i=t(e(39885)),s=t(e(63490)),f=t(e(55156)),l=t(e(46907)),u=t(e(25629)),c=e(30065);function h(n){var r=d();return function(){var e,t=(0,l["default"])(n);if(r){var a=(0,l["default"])(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,f["default"])(this,e)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var p=function(n){(0,s["default"])(e,n);var r=h(e);function e(n){var t;if((0,o["default"])(this,e),t=r.call(this),0!==n%1)throw new Error("new JennrichSampson(m): m not a valid integer.");if(!(1<n))throw new Error("new JennrichSampson(m): m must be greater than 1.");var a=function n(r){if(r=(0,c.asarray)(r),r.ndim<1)throw new Error("".concat(n.name,"(x): x.ndim must be at least 1."));if(2!==r.shape[r.ndim-1])throw new Error("".concat(n.name,"(x): x.shape[-1] must be 2."));var e=r.shape.slice(0,-1),t=new("float32"===r.dtype?Float32Array:Float64Array)(r.data.length/2);r=r.data;for(var a=n.nOut,o=r.length,i=t.length;i-- >0;){o-=2;for(var s=r[o+0],f=r[o+1],l=0,u=a;u-- >0;){var h=4+2*u-Math.exp((u+1)*s)-Math.exp((u+1)*f);l+=h*h}t[i]=l}return new c.NDArray(e,t)};return 10===n&&(a.minima_global=a.minima=[[.25782521321500884,.25782521321500884]]),a.roots=[],a.nOut=n,Object.defineProperty(a,"name",{value:"jennrich_sampson".concat(n,"d"),writable:!1}),Object.setPrototypeOf(a,e.prototype),(0,f["default"])(t,Object.freeze(a))}return(0,i["default"])(e,[{key:"grad",value:function(n){if(n=(0,c.asarray)(n),n.ndim<1)throw new Error("".concat(this.name,".grad(x): x.ndim must be at least 1."));if(2!==n.shape[n.ndim-1])throw new Error("".concat(this.name,".grad(x): x.shape[-1] must be 2."));var r=n.shape,e=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length);n=n.data;for(var t=this.nOut,a=n.length;a>=0;){a-=2;for(var o=n[a+0],i=n[a+1],s=t;s-- >0;){var f=4+2*s-Math.exp((s+1)*o)-Math.exp((s+1)*i);e[a+0]-=2*f*(s+1)*Math.exp((s+1)*o),e[a+1]-=2*f*(s+1)*Math.exp((s+1)*i)}}return new c.NDArray(r,e)}},{key:"hess",value:function(n){if(n=(0,c.asarray)(n),n.ndim<1)throw new Error("".concat(this.name,".hess(x): x.ndim must be at least 1."));if(2!==n.shape[n.ndim-1])throw new Error("".concat(this.name,".hess(x): x.shape[-1] must be 2."));var r=Int32Array.of.apply(Int32Array,(0,a["default"])(n.shape).concat([2])),e=new("float32"===n.dtype?Float32Array:Float64Array)(2*n.data.length);n=n.data;for(var t=this.nOut,o=e.length,i=n.length;(i-=2)>=0;){o-=4;for(var s=n[i+0],f=n[i+1],l=t;l-- >0;){var u=4+2*l-Math.exp((l+1)*s)-Math.exp((l+1)*f);e[o+0]+=2*(l+1)*(l+1)*(Math.exp((l+1)*s*2)-u*Math.exp((l+1)*s)),e[o+3]+=2*(l+1)*(l+1)*(Math.exp((l+1)*f*2)-u*Math.exp((l+1)*f)),e[o+1]+=2*(l+1)*(l+1)*Math.exp((l+1)*(s+f))}e[o+2]=e[o+1]}return new c.NDArray(r,e)}},{key:"lsq",value:function(n){if(n=(0,c.asarray)(n),n.ndim<1)throw new Error("".concat(this.name,".lsq(x): x.ndim must be at least 1."));if(2!==n.shape[n.ndim-1])throw new Error("".concat(this.name,".lsq(x): x.shape[-1] must be 2."));var r=this.nOut,e=n.shape.slice(),t=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length/2*r);e[e.length-1]=r,n=n.data;for(var a=n.length,o=t.length;(o-=r)>=0;){a-=2;for(var i=n[a+0],s=n[a+1],f=r;f-- >0;)t[o+f]=4+2*f-Math.exp((f+1)*i)-Math.exp((f+1)*s)}return new c.NDArray(e,t)}},{key:"lsq_jac",value:function(n){n=(0,c.asarray)(n);var r=this.nOut;if(n.ndim<1)throw new Error("".concat(this.name,".lsq_jac(x): x.ndim must be at least 1."));if(2!==n.shape[n.ndim-1])throw new Error("".concat(this.name,".lsq_jac(x): x.shape[-1] must be 2."));var e=Int32Array.of.apply(Int32Array,(0,a["default"])(n.shape.slice(0,-1)).concat([r,2])),t=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length*r);n=n.data;for(var o=n.length,i=t.length;(i-=2*r)>=0;){o-=2;for(var s=n[o+0],f=n[o+1],l=r;l-- >0;)t[i+2*l+0]=-(l+1)*Math.exp((l+1)*s),t[i+2*l+1]=-(l+1)*Math.exp((l+1)*f)}return new c.NDArray(e,t)}},{key:"nIn",get:function(){return 2}}]),e}((0,u["default"])(Function));r.JennrichSampson=p},92467:function(n,r,e){"use strict";e(21703),e(48675),e(3462);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.powell_badscale=void 0;var a=t(e(25069)),o=e(30065),i=e(45456),s=function(n){if(n=(0,o.asarray)(n),n.ndim<1)throw new Error("powell_badscale(x): x.ndim must be at least 1.");if(2!==n.shape[n.ndim-1])throw new Error("powell_badscale(x): x.shape[-1] must be 2.");var r=n.shape.slice(0,-1),e=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length/2);n=n.data;for(var t=n.length,a=e.length;a-- >0;){t-=2;var i=n[t+0],s=n[t+1],f=1e4*i*s-1,l=Math.exp(-i)+Math.exp(-s)-1.0001;e[a]=f*f+l*l}return new o.NDArray(r,e)};r.powell_badscale=s,s.nIn=s.nOut=2,s.minima_global=s.roots=function(){var n=10981593296998175e-21,r=9.106146739866524;return[[n,r],[r,n]]}(),s.minima=function(){var n=(0,i.root1d_bisect)((function(n){return 1e4*(1e4*n*n-1)*n+Math.exp(-n)*(1e-4-Math.expm1(-n)-Math.exp(-n))}),-.02,-5e-4);return[].concat((0,a["default"])(s.minima_global),[[n,n]])}(),s.grad=function(n){if(n=(0,o.asarray)(n),n.ndim<1)throw new Error("powell_badscale.grad(x): x.ndim must be at least 1.");if(2!==n.shape[n.ndim-1])throw new Error("powell_badscale.grad(x): x.shape[-1] must be 2.");var r=n.shape,e=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length);n=n.data;for(var t=n.length;(t-=2)>=0;){var a=n[t+0],i=n[t+1],s=1e4*a*i-1,f=Math.exp(-a)+Math.exp(-i)-1.0001;e[t+0]=2*(1e4*s*i-f*Math.exp(-a)),e[t+1]=2*(1e4*s*a-f*Math.exp(-i))}return new o.NDArray(r,e)},s.hess=function(n){if(n=(0,o.asarray)(n),n.ndim<1)throw new Error("powell_badscale.hess(x): x.ndim must be at least 1.");if(2!==n.shape[n.ndim-1])throw new Error("powell_badscale.hess(x): x.shape[-1] must be 2.");var r=Int32Array.of.apply(Int32Array,(0,a["default"])(n.shape).concat([2])),e=new("float32"===n.dtype?Float32Array:Float64Array)(2*n.data.length);n=n.data;for(var t=e.length,i=n.length;(i-=2)>=0;){t-=4;var s=n[i+0],f=n[i+1],l=1e4*s*f-1,u=Math.exp(-s)+Math.exp(-f)-1.0001;e[t+0]=2*(1e8*f*f+u*Math.exp(-s)+Math.exp(-2*s)),e[t+1]=e[t+2]=2*(1e4*l+1e8*s*f+Math.exp(-s-f)),e[t+3]=2*(1e8*s*s+u*Math.exp(-f)+Math.exp(-2*f))}return new o.NDArray(r,e)},s.lsq=function(n){if(n=(0,o.asarray)(n),n.ndim<1)throw new Error("powell_badscale.lsq(x): x.ndim must be at least 1.");if(2!==n.shape[n.ndim-1])throw new Error("powell_badscale.lsq(x): x.shape[-1] must be 2.");var r=n.shape.slice(),e=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length);n=n.data;for(var t=n.length;(t-=2)>=0;){var a=n[t+0],i=n[t+1];e[t+0]=1e4*a*i-1,e[t+1]=Math.exp(-a)+Math.exp(-i)-1.0001}return new o.NDArray(r,e)},s.lsq_jac=function(n){if(n=(0,o.asarray)(n),n.ndim<1)throw new Error("powell_badscale.lsq_jac(x): x.ndim must be at least 1.");if(2!==n.shape[n.ndim-1])throw new Error("powell_badscale.lsq_jac(x): x.shape[-1] must be 2.");var r=Int32Array.of.apply(Int32Array,(0,a["default"])(n.shape).concat([2])),e=new("float32"===n.dtype?Float32Array:Float64Array)(2*n.data.length);n=n.data;for(var t=n.length,i=e.length;(i-=4)>=0;){t-=2;var s=n[t+0],f=n[t+1];e[i+0]=1e4*f,e[i+1]=1e4*s,e[i+2]=-Math.exp(-s),e[i+3]=-Math.exp(-f)}return new o.NDArray(r,e)},Object.freeze(s)},41925:function(n,r,e){"use strict";e(81299),e(21703),e(48675),e(3462);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.Rastrigin=void 0;var a=t(e(10021)),o=t(e(9545)),i=t(e(25069)),s=t(e(16125)),f=t(e(39885)),l=t(e(63490)),u=t(e(55156)),c=t(e(46907)),h=t(e(25629)),d=e(67456),p=e(30065),v=e(45456);function w(n){var r=y();return function(){var e,t=(0,c["default"])(n);if(r){var a=(0,c["default"])(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,u["default"])(this,e)}}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var m=function(){for(var n=function(n){return n+10*Math.PI*Math.sin(2*Math.PI*n)},r=[],e=1;e<32;e++){if(!(n(e-.25)<0))throw new Error("Assertion failed.");if(!(n(e+.25)>0))throw new Error("Assertion failed.");r.push((0,v.root1d_bisect)(n,e-.25,e+.25))}return Object.freeze(r),r}(),_=function(n){(0,l["default"])(e,n);var r=w(e);function e(n){var t;if((0,s["default"])(this,e),t=r.call(this),0!==n%1)throw new Error("new Rastrigin(n): n not a valid integer.");if(!(0<n))throw new Error("new Rastrigin(n): n must be positive.");var f=function n(r){r=(0,p.asarray)(r);var e=n.nIn;if(r.ndim<1)throw new Error("".concat(n.name,"(x): x.ndim must be at least 1."));if(r.shape[r.ndim-1]!==e)throw new Error("".concat(n.name,"(x): x.shape[-1] must be ").concat(e,"."));var t=r.shape.slice(0,-1),a=new("float32"===r.dtype?Float32Array:Float64Array)(r.data.length/e);r=r.data;for(var o=r.length,i=a.length;i-- >0;){o-=e;for(var s=e;s-- >0;){var f=r[o+s];a[i]+=f*f+10*(1-Math.cos(2*Math.PI*f))}}return new p.NDArray(t,a)};return f.nIn=n,f.roots=f.minima_global=[Array.from({length:n},(function(){return 0}))],f.minima=(0,a["default"])({},Symbol.iterator,o["default"].mark((function r(){var e,t,a,s,f,l;return o["default"].wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Array.from({length:n},(function(){return 0}));case 2:t=[0],a=0;case 4:if(!(a<m.length)){r.next=20;break}s=m[a],e=t,t=[-s].concat((0,i["default"])(e),[+s]),f=Array.from({length:n},(function(){return t})),l=0;case 10:if(!(l<n)){r.next=17;break}return f[l]=[-s,+s],r.delegateYield(d.cartesian_prod.apply(void 0,(0,i["default"])(f)),"t0",13);case 13:f[l]=e;case 14:l++,r.next=10;break;case 17:a++,r.next=4;break;case 20:case"end":return r.stop()}}),r)}))),Object.defineProperty(f,"name",{value:"rastrigin".concat(n,"d"),writable:!1}),Object.setPrototypeOf(f,e.prototype),(0,u["default"])(t,Object.freeze(f))}return(0,f["default"])(e,[{key:"grad",value:function(n){n=(0,p.asarray)(n);var r=this.nIn;if(n.ndim<1)throw new Error("".concat(this.name,".grad(x): x.ndim must be at least 1."));if(n.shape[n.ndim-1]!==r)throw new Error("".concat(this.name,".grad(x): x.shape[-1] must be ").concat(r,"."));var e=n.shape,t=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length);n=n.data;for(var a=n.length;a>=0;){a-=r;for(var o=r;o-- >0;){var i=n[a+o];t[a+o]=2*i+20*Math.PI*Math.sin(2*Math.PI*i)}}return new p.NDArray(e,t)}},{key:"hess",value:function(n){n=(0,p.asarray)(n);var r=this.nIn;if(n.ndim<1)throw new Error("".concat(this.name,".hess(x): x.ndim must be at least 1."));if(n.shape[n.ndim-1]!==r)throw new Error("".concat(this.name,".hess(x): x.shape[-1] must be ").concat(r,"."));var e=Int32Array.of.apply(Int32Array,(0,i["default"])(n.shape).concat([r])),t=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length*r);n=n.data;for(var a=t.length,o=n.length;(o-=r)>=0;){a-=r*r;for(var s=r;s-- >0;){var f=n[o+s];t[a+r*s+s]+=2+Math.PI*Math.PI*40*Math.cos(2*Math.PI*f)}}return new p.NDArray(e,t)}},{key:"lsq",value:function(n){n=(0,p.asarray)(n);var r=this.nIn;if(n.ndim<1)throw new Error("".concat(this.name,".lsq(x): x.ndim must be at least 1."));if(n.shape[n.ndim-1]!==r)throw new Error("".concat(this.name,".lsq(x): x.shape[-1] must be ").concat(r,"."));var e=n.shape,t=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length);n=n.data;for(var a=n.length,o=t.length;(o-=r)>=0;){a-=r;for(var i=r;i-- >0;){var s=n[a+i];t[o+i]=Math.sqrt(s*s+10*(1-Math.cos(2*Math.PI*s)))}}return new p.NDArray(e,t)}},{key:"lsq_jac",value:function(n){n=(0,p.asarray)(n);var r=this.nIn;if(n.ndim<1)throw new Error("".concat(this.name,".lsq_jac(x): x.ndim must be at least 1."));if(n.shape[n.ndim-1]!==r)throw new Error("".concat(this.name,".lsq_jac(x): x.shape[-1] must be ").concat(r,"."));var e=Int32Array.of.apply(Int32Array,(0,i["default"])(n.shape).concat([r])),t=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length*r);n=n.data;for(var a=n.length,o=t.length;(o-=r*r)>=0;){a-=r;for(var s=r;s-- >0;){var f=n[a+s],l=Math.sqrt(f*f+10*(1-Math.cos(2*Math.PI*f)));0!==l&&(t[o+r*s+s]=(f+10*Math.PI*Math.sin(2*Math.PI*f))/l)}}return new p.NDArray(e,t)}},{key:"nOut",get:function(){return this.nIn}}]),e}((0,h["default"])(Function));r.Rastrigin=_},95933:function(n,r,e){"use strict";e(81299),e(21703),e(48675),e(3462);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.Rosenbrock=void 0;var a=t(e(25069)),o=t(e(16125)),i=t(e(39885)),s=t(e(63490)),f=t(e(55156)),l=t(e(46907)),u=t(e(25629)),c=e(30065);function h(n){var r=d();return function(){var e,t=(0,l["default"])(n);if(r){var a=(0,l["default"])(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,f["default"])(this,e)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var p=function(n){(0,s["default"])(e,n);var r=h(e);function e(n){var t;if((0,o["default"])(this,e),t=r.call(this),0!==n%1)throw new Error("new Rosenbrock(n): n not a valid integer.");if(!(1<n))throw new Error("new Rosenbrock(n): n must be greater than 1.");var a=function n(r){r=(0,c.asarray)(r);var e=n.nIn;if(r.ndim<1)throw new Error("".concat(n.name,"(x): x.ndim must be at least 1."));if(r.shape[r.ndim-1]!==e)throw new Error("".concat(n.name,"(x): x.shape[-1] must be ").concat(e,"."));var t=r.shape.slice(0,-1),a=new("float32"===r.dtype?Float32Array:Float64Array)(r.data.length/e);r=r.data;for(var o=r.length,i=a.length;i-- >0;){o-=e;for(var s=e-1;s-- >0;){var f=r[o+s+1],l=r[o+s],u=f-l*l,h=1-l;a[i]+=100*u*u+h*h}}return new c.NDArray(t,a)};return 2==n?a.minima=[[1,1]]:3==n&&(a.minima=[[1,1,1]]),n<=7&&(a.roots=[Array.from({length:n},(function(){return 1}))]),n<=7&&(a.minima_global=[Array.from({length:n},(function(){return 1}))]),a.nIn=n,Object.defineProperty(a,"name",{value:"rosenbrock".concat(n,"d"),writable:!1}),Object.setPrototypeOf(a,e.prototype),(0,f["default"])(t,Object.freeze(a))}return(0,i["default"])(e,[{key:"grad",value:function(n){n=(0,c.asarray)(n);var r=this.nIn;if(n.ndim<1)throw new Error("".concat(this.name,".grad(x): x.ndim must be at least 1."));if(n.shape[n.ndim-1]!==r)throw new Error("".concat(this.name,".grad(x): x.shape[-1] must be ").concat(r,"."));var e=n.shape,t=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length);n=n.data;for(var a=n.length;a>=0;){a-=r;for(var o=r;o-- >0;){var i=n[a+o-1],s=n[a+o],f=n[a+o+1];o<r-1&&(t[a+o]=400*(s*s-f)*s-2*(1-s)),0<o&&(t[a+o]+=200*(s-i*i))}}return new c.NDArray(e,t)}},{key:"hess",value:function(n){n=(0,c.asarray)(n);var r=this.nIn;if(n.ndim<1)throw new Error("".concat(this.name,".hess(x): x.ndim must be at least 1."));if(n.shape[n.ndim-1]!==r)throw new Error("".concat(this.name,".hess(x): x.shape[-1] must be ").concat(r,"."));var e=Int32Array.of.apply(Int32Array,(0,a["default"])(n.shape).concat([r])),t=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length*r);n=n.data;for(var o=t.length,i=n.length;(i-=r)>=0;){o-=r*r;for(var s=r;s-- >0;)if(0<s&&(t[o+r*s+s]=200,t[o+r*(s-1)+s]=t[o+r*s+(s-1)]=-400*n[i+s-1]),s<r-1){var f=n[i+s];t[o+r*s+s]-=400*n[i+s+1]-1200*f*f-2}}return new c.NDArray(e,t)}},{key:"lsq",value:function(n){n=(0,c.asarray)(n);var r=this.nIn,e=this.nOut;if(n.ndim<1)throw new Error("".concat(this.name,".lsq(x): x.ndim must be at least 1."));if(n.shape[n.ndim-1]!==r)throw new Error("".concat(this.name,".lsq(x): x.shape[-1] must be ").concat(r,"."));var t=n.shape.slice(),a=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length/r*e);t[t.length-1]=e,n=n.data;for(var o=n.length,i=a.length;(i-=e)>=0;){o-=r;for(var s=r-1;s-- >0;){var f=n[o+s+1],l=n[o+s],u=f-l*l,h=1-l;a[i+2*s+0]=10*u,a[i+2*s+1]=h}}return new c.NDArray(t,a)}},{key:"lsq_jac",value:function(n){n=(0,c.asarray)(n);var r=this.nIn,e=this.nOut;if(n.ndim<1)throw new Error("".concat(this.name,".lsq_jac(x): x.ndim must be at least 1."));if(n.shape[n.ndim-1]!==r)throw new Error("".concat(this.name,".lsq_jac(x): x.shape[-1] must be ").concat(r,"."));var t=Int32Array.of.apply(Int32Array,(0,a["default"])(n.shape.slice(0,-1)).concat([e,r])),o=new("float32"===n.dtype?Float32Array:Float64Array)(n.data.length*e);n=n.data;for(var i=n.length,s=o.length;(s-=e*r)>=0;){i-=r;for(var f=r-1;f-- >0;){var l=f+1,u=(n[i+l],n[i+f]);o[s+r*(2*f+0)+f]+=-20*u,o[s+r*(2*f+0)+l]+=10,o[s+r*(2*f+1)+f]-=1}}return new c.NDArray(t,o)}},{key:"nOut",get:function(){return 2*this.nIn-2}}]),e}((0,u["default"])(Function));r.Rosenbrock=p},66022:function(n,r,e){"use strict";e(21703),e(48675),e(3462),e(85827);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.AleaRNG=void 0;var a=t(e(42989)),o=t(e(16125)),i=t(e(39885)),s=e(11882),f=e(30065),l=e(52894),u=(e(28646),Math.pow(2,32)),c=Math.pow(2,-32),h=Math.pow(2,-53);function d(n,r){n=n.toString();for(var e=0;e<n.length;e++){r+=n.charCodeAt(e);var t=.02519603282416938*r;r=t>>>0,t-=r,t*=r,r=t>>>0,t-=r,r+=t*u}return r}var p=function(){function n(r){if((0,o["default"])(this,n),null==r)throw new Error("Assertion failed.");r=r.toString();var e=d(" ",4022871197),t=d(" ",e),a=d(" ",t),i=d(r,a),s=d(r,i),f=d(r,s);e>>>=0,e-=i>>>0,e*=c,e+=e<0,t>>>=0,t-=s>>>0,t*=c,t+=t<0,a>>>=0,a-=f>>>0,a*=c,a+=a<0,Object.assign(this,{s0:e,s1:t,s2:a,c:1,__nextNormal:NaN}),Object.seal(this)}return(0,i["default"])(n,[{key:"__next",value:function(){var n=2091639*this.s0+this.c*c;return this.s0=this.s1,this.s1=this.s2,this.s2=n-(this.c=0|n)}},{key:"bool",value:function(){return this.uniform()<0}},{key:"int",value:function(n,r){if(void 0===r&&(r=n,n=0),n%1!==0)throw new Error("AlreaRNG::int(from,until): from must be a valid int.");if(r%1!==0)throw new Error("AlreaRNG::int(from,until): until must be a valid int.");if(!(n<r))throw new Error("AlreaRNG::int(from,until): from must be less than until.");return Math.floor(this.uniform(n,r))}},{key:"shuffle",value:function(n,r,e){if(n.length%1!==0)throw new Error("AlreaRNG::normal(array,from=0,until=array.length): array must be Array-like.");if(!(n.length>=0))throw new Error("AlreaRNG::normal(array,from=0,until=array.length): array must be Array-like.");if(null==r&&(r=0),null==e&&(e=n.length),0!==r%1)throw new Error("AlreaRNG::normal(array,from=0,until=array.length): from must be int.");if(0!==e%1)throw new Error("AlreaRNG::normal(array,from=0,until=array.length): until must be int.");if(!(r>=0))throw new Error("AlreaRNG::normal(array,from=0,until=array.length): from must be non-negative.");if(!(r<=e))throw new Error("AlreaRNG::normal(array,from=0,until=array.length): from must not be greater than until.");if(!(n.length>=e))throw new Error("AlreaRNG::normal(array,from=0,until=array.length): until must not be greater than array.length.");for(var t=r;t<e-1;t++){var a=this["int"](t,e),o=n[a];n[a]=n[t],n[t]=o}}},{key:"uniform",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(n*=1,!isFinite(n))throw new Error("Assertion failed.");if(r*=1,!isFinite(r))throw new Error("Assertion failed.");var e=this.__next()+(2097152*this.__next()|0)*h;return n*(1-e)+e*r}},{key:"normal",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(n*=1,!isFinite(n))throw new Error("AlreaRNG::normal(mean,sigma): mean must be valid number.");if(r*=1,!isFinite(r))throw new Error("AlreaRNG::normal(mean,sigma): sigma must be valid number.");var e,t,a,o=this.__nextNormal;if(!isNaN(o))return this.__nextNormal=NaN,o*r+n;do{e=this.uniform(),t=this.uniform(),a=e*e+t*t}while(a>1||0==a);var i=Math.sqrt(-2*Math.log(a)/a);return this.__nextNormal=i*e,n+i*t*r}},{key:"ortho",value:function(n){for(var r=arguments.length,e=new Array(r>1?r-1:0),t=1;t<r;t++)e[t-1]=arguments[t];if(n in s.ARRAY_TYPES||(e.unshift(n),n="float64"),e.length<1)throw new Error("AlreaRNG::orthogonal([dtype,] ...shape): shape.length must be at least 1.");1===e.length&&e.push(e[0]);for(var o=e.length;o-- >0;)if(e[o]%1!==0||e[o]<1)throw new Error("AlreaRNG::orthogonal([dtype,] ...shape): shape[".concat(o,"] = ").concat(e[o]," not a positive integer."));e=Int32Array.from(e);for(var i=e.subarray(-2),u=(0,a["default"])(i,2),c=u[0],h=u[1],d=Math.max(c,h),p=Math.min(c,h),v=s.ARRAY_TYPES[n],w=new v(e.reduce((function(n,r){return n*r}))),y=new Float64Array(d*p),m=w.length;(m-=c*h)>=0;){for(var _=d;_-- >0;)for(var g=p;g-- >0;)y[p*_+g]=_!==g?0:this.bool()?-1:1;for(var b=0;b<d;b++)for(var A=this.normal(),E=b;++E<d;){var x=this.normal(),M=(0,l._giv_rot_qr)(A,x),k=(0,a["default"])(M,3),N=k[0],P=k[1],O=k[2];0!==P&&(A=O,(0,l._giv_rot_rows)(y,Math.min(E+1,p),p*b,p*E,N,P))}for(var j=d;j-- >0;)for(var S=p;S-- >0;)w[m+(c<h?h*S+j:h*j+S)]=y[p*j+S]}return new f.NDArray(e,w)}}]),n}();r.AleaRNG=p},37675:function(n,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=e(66022);Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[n]}})}))},48265:function(n,r,e){"use strict";e(21703),Object.defineProperty(r,"__esModule",{value:!0}),r.rand_normal=void 0;var t=!0,a=function(){var n=NaN;return function(){if(t&&(t=!1,console.warn(new Error("nd.rand_normal is deprecated, use nd.rand.AleaRNG instead."))),!isNaN(n)){var r=n;return n=NaN,r}var e,a,o;do{e=2*Math.random()-1,a=2*Math.random()-1,o=e*e+a*a}while(o>1||0==o);var i=Math.sqrt(-2*Math.log(o)/o);return n=i*e,i*a}}();r.rand_normal=a},85485:function(n,r,e){"use strict";e(21703);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.NAryHeap=void 0;var a=t(e(16125)),o=t(e(39885)),i=8,s=function(n){return 1+n*i},f=function(n){return(n-1)/i|0},l=function(){function n(){(0,a["default"])(this,n),this._heap=[],Object.seal(this)}return(0,o["default"])(n,[{key:"add",value:function(n){if(!("key"in n))throw new Error("Assertion failed.");var r=this._heap;r.push(n);for(var e=r.length-1;;){var t=f(e);if(0===e||n.key>=r[t].key)break;r[e]=r[t],e=t}r[e]=n}},{key:"popMin",value:function(){var n=this._heap,r=n[0],e=n.pop();if(0<n.length)for(var t=0;;){var a=t;n[t]=e;for(var o=s(t),f=Math.min(o+i,n.length);o<f;o++)n[o].key<n[t].key&&(t=o);if(t===a)break;n[a]=n[t]}return r}},{key:"size",get:function(){return this._heap.length}},{key:"min",get:function(){return this._heap[0]}}]),n}();r.NAryHeap=l},70292:function(n,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=e(2145);Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[n]}})}))},2145:function(n,r,e){"use strict";e(21703);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.KDTree=void 0;var a=t(e(9545)),o=t(e(25069)),i=t(e(39885)),s=t(e(16125)),f=e(28646),l=e(57482),u=e(30716),c=e(85485),h=function(n,r){var e=n.length;if(e!==r.length)throw new Error("Assertion failed.");for(var t=new u.FrobeniusNorm,a=e;a-- >0;)t.include(n[a]-r[a]);return t.result},d=function n(r,e,t,a){(0,s["default"])(this,n),Object.assign(this,{axis:r,threshold:e,c0:t,c1:a}),Object.seal(this)},p=function n(r){(0,s["default"])(this,n),this.point=r,Object.seal(this)},v=function n(r,e,t){(0,s["default"])(this,n),this.key=r,this.nearest=t,Object.assign(this,e),Object.seal(this)},w=function n(r,e){(0,s["default"])(this,n),this.key=r,this.point=e.point,Object.seal(this)},y=function(){function n(r){(0,s["default"])(this,n),r=(0,o["default"])(r);var e=r[0].length;if(r.some((function(n){return n.length!==e})))throw new Error("new KDTree(points): points must be iterable of (typed) arrays of same length (NDArrays are not yet supported).");if(r.some((function(n){return!(0,l.is_array)(n)})))throw new Error("new KDTree(points): points must be iterable of (typed) arrays of same length (NDArrays are not yet supported).");var t=function(n,e){var t=r[n];r[n]=r[e],r[e]=t};this.root=function n(a,o,i){if(1===i-o)return new p(r[o]);for(;;){for(var s=r[(0,f._rand_int)(o,i)][a],l=o,u=o,c=o;c<i;c++){var h=r[c][a];h<=s&&(t(c,u),h<s&&t(l++,u),u++)}var v=o+i>>>1;v=Math.max(v,l),v=Math.min(v,u);var w=(a+1)%e;return new d(a,s,n(w,o,v),n(w,v,i))}}(0,0,r.length),Object.seal(this)}return(0,i["default"])(n,[{key:"nearest_gen",value:a["default"].mark((function n(r){var e,t,o,i,s,f,l,u,p,y;return a["default"].wrap((function(n){while(1)switch(n.prev=n.next){case 0:e=new c.NAryHeap,t=function(n,t){return e.add(t instanceof d?new v(h(r,n),t,n):new w(h(r,t.point),t))},t(r,this.root);case 3:if(!(e.size>0)){n.next=18;break}if(o=e.popMin(),!(o instanceof v)){n.next=14;break}i=o.nearest,s=o.axis,f=o.threshold,l=o.c0,u=o.c1,p=i,y=i,i[s]>f&&(p=p.slice(),p[s]=f),i[s]<f&&(y=y.slice(),y[s]=f),t(p,l),t(y,u),n.next=16;break;case 14:return n.next=16,o.point;case 16:n.next=3;break;case 18:case"end":return n.stop()}}),n,this)}))}]),n}();r.KDTree=y},13211:function(n,r,e){"use strict";e(21703);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.stack=s;var a=t(e(25069)),o=e(39059),i=e(30065);function s(n,r,e){if(null==e&&(null==r?(e=n,n=void 0):(e=r,r=void 0,"string"===typeof n&&(r=n,n=void 0))),e=Array.from(e,(function(n){return(0,i.asarray)(r,n)})),null==n&&(n=0),0>n&&(n+=e[0].shape.length+1),0>n||n>e[0].shape.length)throw new Error("Axis out of bounds.");return e=e.map((function(r){return r.reshape.apply(r,(0,a["default"])(r.shape.slice(0,n)).concat([1],(0,a["default"])(r.shape.slice(n))))})),(0,o.concat)(n,r,e)}},85008:function(n,r,e){"use strict";e(48675),e(3462),e(21703),e(85827);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.tabulate=s;var a=t(e(25069)),o=e(30065),i=e(11882);function s(n,r,e){if(n=Int32Array.from(n,(function(r){if(r%1!==0)throw new Error("tabulate(shape, dtype='object', idx2val): Invalid shape [".concat(n,"]."));return r})),null==e&&(e=r,r=void 0),null==e)throw new Error("tabulate(shape, dtype='object', idx2val): idx2val missing.");null==r&&(r="object"),(0,i._check_dtype)(r);var t=new Int32Array(n.length),s=new i.ARRAY_TYPES[r](n.reduce((function(n,r){return n*r}),1)),f=0;function l(r){if(r===n.length)s[f++]=e.apply(void 0,(0,a["default"])(t));else for(t[r]=0;t[r]<n[r];t[r]++)l(r+1)}return l(0),new o.NDArray(n,s)}},45854:function(n,r,e){"use strict";e(21703),e(85827),e(48675),e(3462);var t=e(87654);Object.defineProperty(r,"__esModule",{value:!0}),r.zip_elems=u;var a=t(e(25069)),o=e(11882),i=e(30065);function s(n,r){var e;if("undefined"===typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=f(n))||r&&n&&"number"===typeof n.length){e&&(n=e);var t=0,a=function(){};return{s:a,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var n=e.next();return i=n.done,n},e:function(n){s=!0,o=n},f:function(){try{i||null==e["return"]||e["return"]()}finally{if(s)throw o}}}}function f(n,r){if(n){if("string"===typeof n)return l(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?l(n,r):void 0}}function l(n,r){(null==r||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}function u(n,r,e){if(null==e&&r instanceof Function&&(e=r,r=void 0),n instanceof Array||(n=(0,a["default"])(n)),n=n.map((function(n){return(0,i.asarray)(n)})),null==r&&(r="object"),null==e){if("object"!==r)throw new Error('If zip_fn is undefined, dtype must be "object" or undefined.');var t=n.length;e=function(){for(var n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];return r.slice(0,t)}}(0,o._check_dtype)(r);var f,l=n.reduce((function(n,r){return Math.max(n,r.ndim)}),0),u=Int32Array.from({length:l},(function(){return 1})),c=s(n);try{for(c.s();!(f=c.n()).done;)for(var h=f.value,d=l,p=h.ndim;d-- >0&&p-- >0;)if(1===u[d])u[d]=h.shape[p];else if(u[d]!=h.shape[p]&&1!=h.shape[p])throw new Error("Shapes are not broadcast-compatible.")}catch(A){c.e(A)}finally{c.f()}var v=new Int32Array(l),w=new o.ARRAY_TYPES[r](u.reduce((function(n,r){return n*r}),1)),y=new Array(n.length),m=new Int32Array(n.length),_=new Int32Array(n.length),g=0;function b(r){if(r!==l){for(v[r]=0;;){if(b(r+1),++v[r]>=u[r])break;for(var t=n.length;t-- >0;)n[t].shape[r-l+n[t].ndim]>1||(m[t]-=_[t])}for(var o=n.length;o-- >0;)_[o]*=n[o].shape[r-l+n[o].ndim]||1}else{_.fill(1);for(var i=n.length;i-- >0;)y[i]=n[i].data[m[i]++];w[g++]=e.apply(void 0,y.concat((0,a["default"])(v)))}}return b(0),new i.NDArray(u,w)}},59421:function(n,r,e){e(21703);var t=function(n){"use strict";var r,e=Object.prototype,t=e.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function f(n,r,e){return Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),n[r]}try{f({},"")}catch(R){f=function(n,r,e){return n[r]=e}}function l(n,r,e,t){var a=r&&r.prototype instanceof w?r:w,o=Object.create(a.prototype),i=new O(t||[]);return o._invoke=M(n,e,i),o}function u(n,r,e){try{return{type:"normal",arg:n.call(r,e)}}catch(R){return{type:"throw",arg:R}}}n.wrap=l;var c="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function w(){}function y(){}function m(){}var _={};f(_,o,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(j([])));b&&b!==e&&t.call(b,o)&&(_=b);var A=m.prototype=w.prototype=Object.create(_);function E(n){["next","throw","return"].forEach((function(r){f(n,r,(function(n){return this._invoke(r,n)}))}))}function x(n,r){function e(a,o,i,s){var f=u(n[a],n,o);if("throw"!==f.type){var l=f.arg,c=l.value;return c&&"object"===typeof c&&t.call(c,"__await")?r.resolve(c.__await).then((function(n){e("next",n,i,s)}),(function(n){e("throw",n,i,s)})):r.resolve(c).then((function(n){l.value=n,i(l)}),(function(n){return e("throw",n,i,s)}))}s(f.arg)}var a;function o(n,t){function o(){return new r((function(r,a){e(n,t,r,a)}))}return a=a?a.then(o,o):o()}this._invoke=o}function M(n,r,e){var t=c;return function(a,o){if(t===d)throw new Error("Generator is already running");if(t===p){if("throw"===a)throw o;return S()}e.method=a,e.arg=o;while(1){var i=e.delegate;if(i){var s=k(i,e);if(s){if(s===v)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(t===c)throw t=p,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);t=d;var f=u(n,r,e);if("normal"===f.type){if(t=e.done?p:h,f.arg===v)continue;return{value:f.arg,done:e.done}}"throw"===f.type&&(t=p,e.method="throw",e.arg=f.arg)}}}function k(n,e){var t=n.iterator[e.method];if(t===r){if(e.delegate=null,"throw"===e.method){if(n.iterator["return"]&&(e.method="return",e.arg=r,k(n,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var a=u(t,n.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,v;var o=a.arg;return o?o.done?(e[n.resultName]=o.value,e.next=n.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,v):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function N(n){var r={tryLoc:n[0]};1 in n&&(r.catchLoc=n[1]),2 in n&&(r.finallyLoc=n[2],r.afterLoc=n[3]),this.tryEntries.push(r)}function P(n){var r=n.completion||{};r.type="normal",delete r.arg,n.completion=r}function O(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(N,this),this.reset(!0)}function j(n){if(n){var e=n[o];if(e)return e.call(n);if("function"===typeof n.next)return n;if(!isNaN(n.length)){var a=-1,i=function e(){while(++a<n.length)if(t.call(n,a))return e.value=n[a],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:r,done:!0}}return y.prototype=m,f(A,"constructor",m),f(m,"constructor",y),y.displayName=f(m,s,"GeneratorFunction"),n.isGeneratorFunction=function(n){var r="function"===typeof n&&n.constructor;return!!r&&(r===y||"GeneratorFunction"===(r.displayName||r.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,m):(n.__proto__=m,f(n,s,"GeneratorFunction")),n.prototype=Object.create(A),n},n.awrap=function(n){return{__await:n}},E(x.prototype),f(x.prototype,i,(function(){return this})),n.AsyncIterator=x,n.async=function(r,e,t,a,o){void 0===o&&(o=Promise);var i=new x(l(r,e,t,a),o);return n.isGeneratorFunction(e)?i:i.next().then((function(n){return n.done?n.value:i.next()}))},E(A),f(A,s,"Generator"),f(A,o,(function(){return this})),f(A,"toString",(function(){return"[object Generator]"})),n.keys=function(n){var r=[];for(var e in n)r.push(e);return r.reverse(),function e(){while(r.length){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},n.values=j,O.prototype={constructor:O,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(P),!n)for(var e in this)"t"===e.charAt(0)&&t.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var n=this.tryEntries[0],r=n.completion;if("throw"===r.type)throw r.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var e=this;function a(t,a){return s.type="throw",s.arg=n,e.next=t,a&&(e.method="next",e.arg=r),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var f=t.call(i,"catchLoc"),l=t.call(i,"finallyLoc");if(f&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(f){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(n,r){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc<=this.prev&&t.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===n||"continue"===n)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=n,i.arg=r,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(n,r){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&r&&(this.next=r),v},finish:function(n){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===n)return this.complete(e.completion,e.afterLoc),P(e),v}},catch:function(n){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===n){var t=e.completion;if("throw"===t.type){var a=t.arg;P(e)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(n,e,t){return this.delegate={iterator:j(n),resultName:e,nextLoc:t},"next"===this.method&&(this.arg=r),v}},n}(n.exports);try{regeneratorRuntime=t}catch(a){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},32850:function(n){n.exports=function(n){return n&&"object"===typeof n&&"function"===typeof n.copy&&"function"===typeof n.fill&&"function"===typeof n.readUInt8}},83447:function(n,r,e){"use strict";e(48675),e(3462),e(21703);var t=e(10695),a=e(49321),o=e(21246),i=e(48040);function s(n){return n.call.bind(n)}var f="undefined"!==typeof BigInt,l="undefined"!==typeof Symbol,u=s(Object.prototype.toString),c=s(Number.prototype.valueOf),h=s(String.prototype.valueOf),d=s(Boolean.prototype.valueOf);if(f)var p=s(BigInt.prototype.valueOf);if(l)var v=s(Symbol.prototype.valueOf);function w(n,r){if("object"!==typeof n)return!1;try{return r(n),!0}catch(e){return!1}}function y(n){return"undefined"!==typeof Promise&&n instanceof Promise||null!==n&&"object"===typeof n&&"function"===typeof n.then&&"function"===typeof n.catch}function m(n){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(n):i(n)||U(n)}function _(n){return"Uint8Array"===o(n)}function g(n){return"Uint8ClampedArray"===o(n)}function b(n){return"Uint16Array"===o(n)}function A(n){return"Uint32Array"===o(n)}function E(n){return"Int8Array"===o(n)}function x(n){return"Int16Array"===o(n)}function M(n){return"Int32Array"===o(n)}function k(n){return"Float32Array"===o(n)}function N(n){return"Float64Array"===o(n)}function P(n){return"BigInt64Array"===o(n)}function O(n){return"BigUint64Array"===o(n)}function j(n){return"[object Map]"===u(n)}function S(n){return"undefined"!==typeof Map&&(j.working?j(n):n instanceof Map)}function R(n){return"[object Set]"===u(n)}function I(n){return"undefined"!==typeof Set&&(R.working?R(n):n instanceof Set)}function F(n){return"[object WeakMap]"===u(n)}function D(n){return"undefined"!==typeof WeakMap&&(F.working?F(n):n instanceof WeakMap)}function q(n){return"[object WeakSet]"===u(n)}function L(n){return q(n)}function T(n){return"[object ArrayBuffer]"===u(n)}function Y(n){return"undefined"!==typeof ArrayBuffer&&(T.working?T(n):n instanceof ArrayBuffer)}function G(n){return"[object DataView]"===u(n)}function U(n){return"undefined"!==typeof DataView&&(G.working?G(n):n instanceof DataView)}r.isArgumentsObject=t,r.isGeneratorFunction=a,r.isTypedArray=i,r.isPromise=y,r.isArrayBufferView=m,r.isUint8Array=_,r.isUint8ClampedArray=g,r.isUint16Array=b,r.isUint32Array=A,r.isInt8Array=E,r.isInt16Array=x,r.isInt32Array=M,r.isFloat32Array=k,r.isFloat64Array=N,r.isBigInt64Array=P,r.isBigUint64Array=O,j.working="undefined"!==typeof Map&&j(new Map),r.isMap=S,R.working="undefined"!==typeof Set&&R(new Set),r.isSet=I,F.working="undefined"!==typeof WeakMap&&F(new WeakMap),r.isWeakMap=D,q.working="undefined"!==typeof WeakSet&&q(new WeakSet),r.isWeakSet=L,T.working="undefined"!==typeof ArrayBuffer&&T(new ArrayBuffer),r.isArrayBuffer=Y,G.working="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView&&G(new DataView(new ArrayBuffer(1),0,1)),r.isDataView=U;var B="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function J(n){return"[object SharedArrayBuffer]"===u(n)}function z(n){return"undefined"!==typeof B&&("undefined"===typeof J.working&&(J.working=J(new B)),J.working?J(n):n instanceof B)}function C(n){return"[object AsyncFunction]"===u(n)}function X(n){return"[object Map Iterator]"===u(n)}function V(n){return"[object Set Iterator]"===u(n)}function Q(n){return"[object Generator]"===u(n)}function W(n){return"[object WebAssembly.Module]"===u(n)}function H(n){return w(n,c)}function K(n){return w(n,h)}function $(n){return w(n,d)}function Z(n){return f&&w(n,p)}function nn(n){return l&&w(n,v)}function rn(n){return H(n)||K(n)||$(n)||Z(n)||nn(n)}function en(n){return"undefined"!==typeof Uint8Array&&(Y(n)||z(n))}r.isSharedArrayBuffer=z,r.isAsyncFunction=C,r.isMapIterator=X,r.isSetIterator=V,r.isGeneratorObject=Q,r.isWebAssemblyCompiledModule=W,r.isNumberObject=H,r.isStringObject=K,r.isBooleanObject=$,r.isBigIntObject=Z,r.isSymbolObject=nn,r.isBoxedPrimitive=rn,r.isAnyArrayBuffer=en,["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(n){Object.defineProperty(r,n,{enumerable:!1,value:function(){throw new Error(n+" is not supported in userland")}})}))},47926:function(n,r,e){e(21703),e(85827);var t=Object.getOwnPropertyDescriptors||function(n){for(var r=Object.keys(n),e={},t=0;t<r.length;t++)e[r[t]]=Object.getOwnPropertyDescriptor(n,r[t]);return e},a=/%[sdj%]/g;r.format=function(n){if(!E(n)){for(var r=[],e=0;e<arguments.length;e++)r.push(f(arguments[e]));return r.join(" ")}e=1;for(var t=arguments,o=t.length,i=String(n).replace(a,(function(n){if("%%"===n)return"%";if(e>=o)return n;switch(n){case"%s":return String(t[e++]);case"%d":return Number(t[e++]);case"%j":try{return JSON.stringify(t[e++])}catch(r){return"[Circular]"}default:return n}})),s=t[e];e<o;s=t[++e])g(s)||!N(s)?i+=" "+s:i+=" "+f(s);return i},r.deprecate=function(n,e){if("undefined"!==typeof process&&!0===process.noDeprecation)return n;if("undefined"===typeof process)return function(){return r.deprecate(n,e).apply(this,arguments)};var t=!1;function a(){if(!t){if(process.throwDeprecation)throw new Error(e);process.traceDeprecation?console.trace(e):console.error(e),t=!0}return n.apply(this,arguments)}return a};var o={},i=/^$/;if({NODE_ENV:"production",VUE_APP_APIBASE:"https://77.cocogoat.work",VUE_APP_APIBASECN:"https://cocogoat-1251105598.file.myqcloud.com/77",VUE_APP_SENTRY:"https://c6474900f75a46948250b5f47beda2e2@77.cocogoat.work/sigh/sigh",VUE_APP_BUILD:"2203311221",VUE_APP_ROUTER_HASH:"false",VUE_APP_SINGLEFILE:"false",VUE_APP_LOCALRES:"false",VUE_APP_TIMESTAMP:"1648700505516",VUE_APP_GIT_SHA:"ab50904f",VUE_APP_GIT_MSG:"",BASE_URL:"https://cocogoat-1251105598.file.myqcloud.com/"}.NODE_DEBUG){var s={NODE_ENV:"production",VUE_APP_APIBASE:"https://77.cocogoat.work",VUE_APP_APIBASECN:"https://cocogoat-1251105598.file.myqcloud.com/77",VUE_APP_SENTRY:"https://c6474900f75a46948250b5f47beda2e2@77.cocogoat.work/sigh/sigh",VUE_APP_BUILD:"2203311221",VUE_APP_ROUTER_HASH:"false",VUE_APP_SINGLEFILE:"false",VUE_APP_LOCALRES:"false",VUE_APP_TIMESTAMP:"1648700505516",VUE_APP_GIT_SHA:"ab50904f",VUE_APP_GIT_MSG:"",BASE_URL:"https://cocogoat-1251105598.file.myqcloud.com/"}.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+s+"$","i")}function f(n,e){var t={seen:[],stylize:u};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),_(e)?t.showHidden=e:e&&r._extend(t,e),M(t.showHidden)&&(t.showHidden=!1),M(t.depth)&&(t.depth=2),M(t.colors)&&(t.colors=!1),M(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=l),h(t,n,t.depth)}function l(n,r){var e=f.styles[r];return e?"["+f.colors[e][0]+"m"+n+"["+f.colors[e][1]+"m":n}function u(n,r){return n}function c(n){var r={};return n.forEach((function(n,e){r[n]=!0})),r}function h(n,e,t){if(n.customInspect&&e&&j(e.inspect)&&e.inspect!==r.inspect&&(!e.constructor||e.constructor.prototype!==e)){var a=e.inspect(t,n);return E(a)||(a=h(n,a,t)),a}var o=d(n,e);if(o)return o;var i=Object.keys(e),s=c(i);if(n.showHidden&&(i=Object.getOwnPropertyNames(e)),O(e)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return p(e);if(0===i.length){if(j(e)){var f=e.name?": "+e.name:"";return n.stylize("[Function"+f+"]","special")}if(k(e))return n.stylize(RegExp.prototype.toString.call(e),"regexp");if(P(e))return n.stylize(Date.prototype.toString.call(e),"date");if(O(e))return p(e)}var l,u="",_=!1,g=["{","}"];if(m(e)&&(_=!0,g=["[","]"]),j(e)){var b=e.name?": "+e.name:"";u=" [Function"+b+"]"}return k(e)&&(u=" "+RegExp.prototype.toString.call(e)),P(e)&&(u=" "+Date.prototype.toUTCString.call(e)),O(e)&&(u=" "+p(e)),0!==i.length||_&&0!=e.length?t<0?k(e)?n.stylize(RegExp.prototype.toString.call(e),"regexp"):n.stylize("[Object]","special"):(n.seen.push(e),l=_?v(n,e,t,s,i):i.map((function(r){return w(n,e,t,s,r,_)})),n.seen.pop(),y(l,u,g)):g[0]+u+g[1]}function d(n,r){if(M(r))return n.stylize("undefined","undefined");if(E(r)){var e="'"+JSON.stringify(r).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return n.stylize(e,"string")}return A(r)?n.stylize(""+r,"number"):_(r)?n.stylize(""+r,"boolean"):g(r)?n.stylize("null","null"):void 0}function p(n){return"["+Error.prototype.toString.call(n)+"]"}function v(n,r,e,t,a){for(var o=[],i=0,s=r.length;i<s;++i)q(r,String(i))?o.push(w(n,r,e,t,String(i),!0)):o.push("");return a.forEach((function(a){a.match(/^\d+$/)||o.push(w(n,r,e,t,a,!0))})),o}function w(n,r,e,t,a,o){var i,s,f;if(f=Object.getOwnPropertyDescriptor(r,a)||{value:r[a]},f.get?s=f.set?n.stylize("[Getter/Setter]","special"):n.stylize("[Getter]","special"):f.set&&(s=n.stylize("[Setter]","special")),q(t,a)||(i="["+a+"]"),s||(n.seen.indexOf(f.value)<0?(s=g(e)?h(n,f.value,null):h(n,f.value,e-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map((function(n){return"  "+n})).join("\n").substr(2):"\n"+s.split("\n").map((function(n){return"   "+n})).join("\n"))):s=n.stylize("[Circular]","special")),M(i)){if(o&&a.match(/^\d+$/))return s;i=JSON.stringify(""+a),i.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=n.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=n.stylize(i,"string"))}return i+": "+s}function y(n,r,e){var t=n.reduce((function(n,r){return r.indexOf("\n")>=0&&0,n+r.replace(/\u001b\[\d\d?m/g,"").length+1}),0);return t>60?e[0]+(""===r?"":r+"\n ")+" "+n.join(",\n  ")+" "+e[1]:e[0]+r+" "+n.join(", ")+" "+e[1]}function m(n){return Array.isArray(n)}function _(n){return"boolean"===typeof n}function g(n){return null===n}function b(n){return null==n}function A(n){return"number"===typeof n}function E(n){return"string"===typeof n}function x(n){return"symbol"===typeof n}function M(n){return void 0===n}function k(n){return N(n)&&"[object RegExp]"===R(n)}function N(n){return"object"===typeof n&&null!==n}function P(n){return N(n)&&"[object Date]"===R(n)}function O(n){return N(n)&&("[object Error]"===R(n)||n instanceof Error)}function j(n){return"function"===typeof n}function S(n){return null===n||"boolean"===typeof n||"number"===typeof n||"string"===typeof n||"symbol"===typeof n||"undefined"===typeof n}function R(n){return Object.prototype.toString.call(n)}function I(n){return n<10?"0"+n.toString(10):n.toString(10)}r.debuglog=function(n){if(n=n.toUpperCase(),!o[n])if(i.test(n)){var e=process.pid;o[n]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",n,e,t)}}else o[n]=function(){};return o[n]},r.inspect=f,f.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},f.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.types=e(83447),r.isArray=m,r.isBoolean=_,r.isNull=g,r.isNullOrUndefined=b,r.isNumber=A,r.isString=E,r.isSymbol=x,r.isUndefined=M,r.isRegExp=k,r.types.isRegExp=k,r.isObject=N,r.isDate=P,r.types.isDate=P,r.isError=O,r.types.isNativeError=O,r.isFunction=j,r.isPrimitive=S,r.isBuffer=e(32850);var F=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function D(){var n=new Date,r=[I(n.getHours()),I(n.getMinutes()),I(n.getSeconds())].join(":");return[n.getDate(),F[n.getMonth()],r].join(" ")}function q(n,r){return Object.prototype.hasOwnProperty.call(n,r)}r.log=function(){console.log("%s - %s",D(),r.format.apply(r,arguments))},r.inherits=e(64974),r._extend=function(n,r){if(!r||!N(r))return n;var e=Object.keys(r),t=e.length;while(t--)n[e[t]]=r[e[t]];return n};var L="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function T(n,r){if(!n){var e=new Error("Promise was rejected with a falsy value");e.reason=n,n=e}return r(n)}function Y(n){if("function"!==typeof n)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],e=0;e<arguments.length;e++)r.push(arguments[e]);var t=r.pop();if("function"!==typeof t)throw new TypeError("The last argument must be of type Function");var a=this,o=function(){return t.apply(a,arguments)};n.apply(this,r).then((function(n){process.nextTick(o.bind(null,null,n))}),(function(n){process.nextTick(T.bind(null,n,o))}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(n)),Object.defineProperties(r,t(n)),r}r.promisify=function(n){if("function"!==typeof n)throw new TypeError('The "original" argument must be of type Function');if(L&&n[L]){var r=n[L];if("function"!==typeof r)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,L,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var r,e,t=new Promise((function(n,t){r=n,e=t})),a=[],o=0;o<arguments.length;o++)a.push(arguments[o]);a.push((function(n,t){n?e(n):r(t)}));try{n.apply(this,a)}catch(i){e(i)}return t}return Object.setPrototypeOf(r,Object.getPrototypeOf(n)),L&&Object.defineProperty(r,L,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,t(n))},r.promisify.custom=L,r.callbackify=Y},21246:function(n,r,e){"use strict";var t=e(73819),a=e(27546),o=e(10543),i=o("Object.prototype.toString"),s=e(28098)(),f="undefined"===typeof globalThis?e.g:globalThis,l=a(),u=o("String.prototype.slice"),c={},h=e(92814),d=Object.getPrototypeOf;s&&h&&d&&t(l,(function(n){if("function"===typeof f[n]){var r=new f[n];if(Symbol.toStringTag in r){var e=d(r),t=h(e,Symbol.toStringTag);if(!t){var a=d(e);t=h(a,Symbol.toStringTag)}c[n]=t.get}}}));var p=function(n){var r=!1;return t(c,(function(e,t){if(!r)try{var a=e.call(n);a===t&&(r=a)}catch(o){}})),r},v=e(48040);n.exports=function(n){return!!v(n)&&(s&&Symbol.toStringTag in n?p(n):u(i(n),8,-1))}},32120:function(n,r,e){var t=e(82109),a=e(35005),o=e(22104),i=e(47293),s=e(89191),f="AggregateError",l=a(f),u=!i((function(){return 1!==l([1]).errors[0]}))&&i((function(){return 7!==l([1],f,{cause:7}).cause}));t({global:!0,forced:u},{AggregateError:s(f,(function(n){return function(r,e){return o(n,this,arguments)}}),u,!0)})},25438:function(n,r,e){var t=e(82109),a=Math.hypot,o=Math.abs,i=Math.sqrt,s=!!a&&a(1/0,NaN)!==1/0;t({target:"Math",stat:!0,forced:s},{hypot:function(n,r){var e,t,a=0,s=0,f=arguments.length,l=0;while(s<f)e=o(arguments[s++]),l<e?(t=l/e,a=a*t*t+1,l=e):e>0?(t=e/l,a+=t*t):a+=e;return l===1/0?1/0:l*i(a)}})},26669:function(n,r,e){"use strict";e.d(r,{S1:function(){return l},jh:function(){return c}});e(48675),e(3462),e(21703);var t=e(84118),a=e(87671),o=e(71836),i=e(71824);const s=a.toString().trim().replace(/\r/g,"").split("\n");s.unshift("\0"),s.push(" "),t.env.wasm.wasmPaths=o.ZP,t.env.wasm.numThreads=1;let f=null;async function l(){return f=await t.InferenceSession.create(o.ZP["ppocr.ort"]),f}function u(n,r=[64,64,4]){let e=i.array("float32",{shape:Int32Array.from(r),data:Float32Array.from(n)});e=e.transpose(2,0,1);let t=e.toNestedArray();return t.splice(3,1),t=t.flat(2),t=t.map((n=>n/255)),Float32Array.from(t)}async function c(n){if(f||await l(),f){const r=new t.Tensor(u(n.data,[n.rows,n.cols,4]),[1,3,n.rows,n.cols]),e={[f.inputNames[0]]:r},a=await f.run(e),o=a[f.outputNames[0]].data,i=a[f.outputNames[0]].dims;let l=0,c=0;const h=[];for(let n=0;n<i[1];n++){const r=o.slice(n*i[2],(n+1)*i[2]),e=Math.max(...r),t=r.indexOf(e);t>0&&(c+=e,l+=1,h.push(s[t]))}return{text:h.join("").replace(/(.)\1+/g,"$1").replace(/\0/g,""),confidence:parseFloat((c/l*100).toFixed(2))}}throw new Error("init faild")}},95512:function(n,r,e){"use strict";e.d(r,{qH:function(){return a},LE:function(){return o},FR:function(){return i},Uf:function(){return s},QX:function(){return f}});let t=[];const a=[],o=[],i=[];let s=[];function f(n,r){s=r,t=n,t.forEach((n=>{n.achievements.forEach((n=>{a.push({str:s[n.name].replace(/…|「|」/g,""),obj:n}),i.push({str:s[n.desc].replace(/…|「|」/g,""),obj:n}),o.push({str:`${s[n.name]}-${s[n.desc]}`.replace(/…|「|」/g,""),obj:n})}))})),console.log("created achievement map with length="+a.length)}},21078:function(n,r,e){"use strict";e.r(r),e.d(r,{cvGetRect:function(){return a},cvDiffImage:function(){return o},cvSplitImage:function(){return i},cvSplitAchievement:function(){return s}});e(85827);var t=e(89039);async function a(n){const r=await(0,t.Yk)(),e=new r.Mat;r.cvtColor(n,e,r.COLOR_RGBA2GRAY,0),r.threshold(e,e,200,250,r.THRESH_BINARY);const a=new r.MatVector,o=new r.Mat;r.findContours(e,a,o,r.RETR_CCOMP,r.CHAIN_APPROX_SIMPLE),r.cvtColor(e,e,r.COLOR_GRAY2RGB,0);const i=e.size(),s=i.width/2,f=.75*i.height;let l;for(let t=0;t<a.size();++t){const n=r.boundingRect(a.get(t));if(n.width<s)continue;if(n.height<f)continue;if(Math.abs(n.width-i.width)<s/100)continue;if(Math.abs(n.height-i.height)<s/100)continue;const e=n.width/30,o=n.height/100;n.x+=e,n.y+=o,n.width-=1.5*e,n.height-=2*o,l=n}return e.delete(),o.delete(),a.delete(),l}async function o(n,r){const e=await(0,t.Yk)(),a=n.roi(new e.Rect(50,0,n.cols/2,n.rows)),o=r.roi(new e.Rect(50,0,r.cols/2,r.rows));e.cvtColor(a,a,e.COLOR_RGBA2GRAY,0),e.cvtColor(o,o,e.COLOR_RGBA2GRAY,0),e.threshold(a,a,160,255,e.THRESH_BINARY),e.threshold(o,o,160,255,e.THRESH_BINARY);const i=new e.ORB(300),s=new e.BFMatcher(e.NORM_HAMMING,!0),f=new e.KeyPointVector,l=new e.KeyPointVector,u=new e.Mat,c=new e.Mat;i.detectAndCompute(a,new e.Mat,f,u),i.detectAndCompute(o,new e.Mat,l,c),a.delete(),o.delete();const h=new e.DMatchVector;s.match(u,c,h),u.delete(),c.delete();const d=[];let p=[];for(let t=0;t<h.size();t++)if(h.get(t).distance<50){const n=f.get(h.get(t).queryIdx).pt.x,r=f.get(h.get(t).queryIdx).pt.y,e=l.get(h.get(t).trainIdx).pt.x,a=l.get(h.get(t).trainIdx).pt.y;if(r>a&&e-n<5){const n=Math.floor((r-a)/10);d[n]=(d[n]||0)+1,p.push(r-a)}}f.delete(),l.delete();const v=d.indexOf(Math.max(...[...d].map((n=>n||0)))),w=10*v+10,y=10*v;p=p.filter((n=>n>=y&&n<=w));const m=e.matFromArray(p.length,1,e.CV_32F,p),_=e.mean(m)[0]+r.rows-n.rows;if(m.delete(),_<32)return!1;const g=r.roi(new e.Rect(0,r.rows-_-1,r.cols,_));return g}async function i(n){const r=await(0,t.Yk)(),e=n.roi(new r.Rect(n.cols-n.cols/3,0,n.cols/4,n.rows));r.cvtColor(e,e,r.COLOR_RGBA2GRAY,0),r.threshold(e,e,223,255,r.THRESH_BINARY);const a=r.Mat.ones(7,7,r.CV_8U),o=r.getStructuringElement(r.MORPH_RECT,new r.Size(e.cols/3*2,1));r.erode(e,e,a),r.dilate(e,e,o),r.dilate(e,e,a),a.delete(),o.delete();const i=[],s=new r.MatVector,f=new r.Mat;r.findContours(e,s,f,r.RETR_CCOMP,r.CHAIN_APPROX_SIMPLE);for(let t=0;t<s.size();++t){const n=r.boundingRect(s.get(t));n.width<.9*e.cols||i.push(n.y+n.height)}return i.sort(((n,r)=>n-r)),e.delete(),f.delete(),s.delete(),i}function s(n,r){const e=new n.Mat,t=new n.Mat,a=new n.MatVector;n.split(r,a),a.get(2).copyTo(e),a.delete(),n.threshold(e,e,170,255,n.THRESH_BINARY);const o=n.Mat.ones(3,15,n.CV_8U),i=n.getStructuringElement(n.MORPH_RECT,new n.Size(e.cols/5,1));n.dilate(e,t,i),n.bitwise_not(t,t),n.bitwise_or(e,t,e),n.erode(e,e,o),o.delete(),i.delete(),t.delete();const s=new n.MatVector,f=new n.Mat;n.rectangle(e,new n.Point(1,1),new n.Point(e.cols-1,e.rows-1),new n.Scalar(255,255,255,255),1),n.findContours(e,s,f,n.RETR_CCOMP,n.CHAIN_APPROX_SIMPLE);let l=[];for(let h=0;h<s.size();++h){const r=n.boundingRect(s.get(h));r.width>.9*e.cols||l.push(r)}e.delete(),f.delete(),s.delete(),l=l.map((e=>{let t="unknown";const a=r.roi(e);return e.x>.5*r.cols?e.width/e.height<=1.5?(t="reward",a.delete()):e.y+e.height>.8*r.rows?(t="date",e.width=r.cols-e.x-1,n.resize(a,a,new n.Size(a.cols/a.rows*32,32),0,0,n.INTER_AREA)):(t="status",n.resize(a,a,new n.Size(a.cols/a.rows*32,32),0,0,n.INTER_AREA)):e.width/e.height<=1.5?(t="icon",a.delete()):e.y+e.height/2<.5*r.rows?(t="title",n.resize(a,a,new n.Size(a.cols/a.rows*32,32),0,0,n.INTER_AREA)):(t="subtitle",n.resize(a,a,new n.Size(a.cols/a.rows*32,32),0,0,n.INTER_AREA)),{name:t,rect:e,roi:a}}));const u=l.find((n=>"reward"===n.name)),c=l.reduce(((n,r)=>"status"===r.name&&r.rect.width>n?r.rect.width:n),0);return l=l.filter((n=>!(n.rect.height<8)&&("reward"!==n.name&&("icon"!==n.name&&("status"===n.name&&n.rect.width<c&&(n.name="status2"),!(u&&n.rect.x>u.rect.x&&n.rect.x+n.rect.width<u.rect.x+u.rect.width)))))),r.delete(),l}},33892:function(n,r,e){"use strict";e.r(r),e.d(r,{lastImage:function(){return f},rect:function(){return l},getRect:function(){return u},reset:function(){return c},scannerOnLine:function(){return h},scannerSplitLine:function(){return d},scannerOnImage:function(){return p},recognizeAchievement:function(){return v},init:function(){return w}});var t=e(89039),a=e(21078),o=e(26669),i=e(95512),s=e(76520);let f=null,l=null;function u(){return l}function c(){if(f)try{f.delete()}catch(n){}f=null,l=null}async function h(n){const r=await(0,t.Yk)(),e=(0,t.SM)(r,n),o=(0,a.cvSplitAchievement)(r,e).map((n=>{const e=(0,t.gq)(r,n.roi);return n.roi.delete(),{name:n.name,rect:n.rect,image:e}}));return!o||o.length<=0?{success:!1}:await v({image:n,blocks:o})}async function d(n){const r=await(0,t.Yk)(),e=(0,t.SM)(r,n);return(0,a.cvSplitAchievement)(r,e).map((n=>{const e=(0,t.gq)(r,n.roi);return n.roi.delete(),{name:n.name,rect:n.rect,image:e}}))}async function p(n,r=!1,e=!1){const o=await(0,t.Yk)();try{const s=(0,t.SM)(o,n);l||(l=await(0,a.cvGetRect)(s)),l||(l=new o.Rect(0,0,s.cols,s.rows));let u=s.roi(l);if(s.delete(),!r){const n=await(0,a.cvSplitImage)(u);let r=n.length-1;while(u.rows-n[r]<10)r--;const e=u.roi(new o.Rect(0,0,u.cols,Math.min(n[r]+10,u.rows)));u.delete(),u=e}let c=u.clone();if(!e&&f){const n=await(0,a.cvDiffImage)(f,c);if(!n)return u.delete(),c.delete(),[];c.delete(),c=n;try{f.delete()}catch(i){}f=null}const h=await(0,a.cvSplitImage)(c),d=[];return h.forEach(((n,r)=>{const e=0===r?0:h[r-1],a=0===r?n:n-h[r-1],s=new o.Rect(0,e,c.cols,a),f=c.roi(s),l=(0,t.gq)(o,f);d.push({image:l,x:0,y:e});try{f.delete()}catch(i){}})),c.delete(),e?u.delete():f=u,d}catch(i){throw(0,t.dW)(o,i)}}async function v(n){let r=null;const e=n.blocks.find((n=>"title"===n.name)),t=n.blocks.find((n=>"subtitle"===n.name)),a={title:{},subtitle:{},status:{},date:{}};if(e&&t){const n=await(0,o.jh)(e.image);a.title=n;const f=!isNaN(n.confidence)&&i.qH.find((r=>r.str===n.text.replace(/…|「|」/g,"")));if(f&&n.confidence>85&&!/.*[0-9]{1,}.*/.test(i.Uf[f.obj.desc])&&!i.Uf[f.obj.desc].includes("次"))r=f.obj;else{const e=await(0,o.jh)(t.image);a.subtitle=e;const f=`${n.text}-${e.text}`.replace(/…|「|」/g,""),l=(0,s.NE)("str",f,i.LE,f.length/3);if(l)r=l.obj;else{const n=(0,s.NE)("str",e.text.replace(/…|「|」/g,""),i.FR,e.text.length/3);n&&(r=n.obj)}}}if(r){var f,l,u,c;let e=!0;const t=n.blocks.find((n=>"status"===n.name)),i=n.blocks.find((n=>"date"===n.name));if(t){a.status=await(0,o.jh)(t.image);const n=a.status.text.split("/").map((n=>n.trim())).filter((n=>!!n));if(2===n.length){const[r,t]=n;!isNaN(Number(r))&&!isNaN(Number(t))&&r<t&&(e=!1)}}i?(a.date=await(0,o.jh)(i.image),a.date.text.length<4&&(e=!1)):e=!1;const s={success:!0,done:e,achievement:r,status:null!==(f=null===(l=a.status)||void 0===l?void 0:l.text)&&void 0!==f?f:"",date:null!==(u=null===(c=a.date)||void 0===c?void 0:c.text)&&void 0!==u?u:"",result:a};return"达成"===s.status&&(s.done=!0),s}return{success:!1,result:a}}async function w(){await Promise.all([(0,o.S1)(),(0,t.Yk)()])}},87671:function(n){"use strict";n.exports="'\n疗\n绚\n诚\n娇\n溜\n题\n贿\n者\n廖\n更\n纳\n加\n奉\n公\n一\n就\n汴\n计\n与\n路\n房\n原\n妇\n2\n0\n8\n-\n7\n其\n>\n:\n]\n,\n，\n骑\n刈\n全\n消\n昏\n傈\n安\n久\n钟\n嗅\n不\n影\n处\n驽\n蜿\n资\n关\n椤\n地\n瘸\n专\n问\n忖\n票\n嫉\n炎\n韵\n要\n月\n田\n节\n陂\n鄙\n捌\n备\n拳\n伺\n眼\n网\n盎\n大\n傍\n心\n东\n愉\n汇\n蹿\n科\n每\n业\n里\n航\n晏\n字\n平\n录\n先\n1\n3\n彤\n鲶\n产\n稍\n督\n腴\n有\n象\n岳\n注\n绍\n在\n泺\n文\n定\n核\n名\n水\n过\n理\n让\n偷\n率\n等\n这\n发\n”\n为\n含\n肥\n酉\n相\n鄱\n七\n编\n猥\n锛\n日\n镀\n蒂\n掰\n倒\n辆\n栾\n栗\n综\n涩\n州\n雌\n滑\n馀\n了\n机\n块\n司\n宰\n甙\n兴\n矽\n抚\n保\n用\n沧\n秩\n如\n收\n息\n滥\n页\n疑\n埠\n!\n！\n姥\n异\n橹\n钇\n向\n下\n跄\n的\n椴\n沫\n国\n绥\n獠\n报\n开\n民\n蜇\n何\n分\n凇\n长\n讥\n藏\n掏\n施\n羽\n中\n讲\n派\n嘟\n人\n提\n浼\n间\n世\n而\n古\n多\n倪\n唇\n饯\n控\n庚\n首\n赛\n蜓\n味\n断\n制\n觉\n技\n替\n艰\n溢\n潮\n夕\n钺\n外\n摘\n枋\n动\n双\n单\n啮\n户\n枇\n确\n锦\n曜\n杜\n或\n能\n效\n霜\n盒\n然\n侗\n电\n晁\n放\n步\n鹃\n新\n杖\n蜂\n吒\n濂\n瞬\n评\n总\n隍\n对\n独\n合\n也\n是\n府\n青\n天\n诲\n墙\n组\n滴\n级\n邀\n帘\n示\n已\n时\n骸\n仄\n泅\n和\n遨\n店\n雇\n疫\n持\n巍\n踮\n境\n只\n亨\n目\n鉴\n崤\n闲\n体\n泄\n杂\n作\n般\n轰\n化\n解\n迂\n诿\n蛭\n璀\n腾\n告\n版\n服\n省\n师\n小\n规\n程\n线\n海\n办\n引\n二\n桧\n牌\n砺\n洄\n裴\n修\n图\n痫\n胡\n许\n犊\n事\n郛\n基\n柴\n呼\n食\n研\n奶\n律\n蛋\n因\n葆\n察\n戏\n褒\n戒\n再\n李\n骁\n工\n貂\n油\n鹅\n章\n啄\n休\n场\n给\n睡\n纷\n豆\n器\n捎\n说\n敏\n学\n会\n浒\n设\n诊\n格\n廓\n查\n来\n霓\n室\n溆\n￠\n诡\n寥\n焕\n舜\n柒\n狐\n回\n戟\n砾\n厄\n实\n翩\n尿\n五\n入\n径\n惭\n喹\n股\n宇\n篝\n|\n;\n美\n期\n云\n九\n祺\n扮\n靠\n锝\n槌\n系\n企\n酰\n阊\n暂\n蚕\n忻\n豁\n本\n羹\n执\n条\n钦\nH\n獒\n限\n进\n季\n楦\n于\n芘\n玖\n铋\n茯\n未\n答\n粘\n括\n样\n精\n欠\n矢\n甥\n帷\n嵩\n扣\n令\n仔\n风\n皈\n行\n支\n部\n蓉\n刮\n站\n蜡\n救\n钊\n汗\n松\n嫌\n成\n可\n.\n鹤\n院\n从\n交\n政\n怕\n活\n调\n球\n局\n验\n髌\n第\n韫\n谗\n串\n到\n圆\n年\n米\n/\n*\n友\n忿\n检\n区\n看\n自\n敢\n刃\n个\n兹\n弄\n流\n留\n同\n没\n齿\n星\n聆\n轼\n湖\n什\n三\n建\n蛔\n儿\n椋\n汕\n震\n颧\n鲤\n跟\n力\n情\n璺\n铨\n陪\n务\n指\n族\n训\n滦\n鄣\n濮\n扒\n商\n箱\n十\n召\n慷\n辗\n所\n莞\n管\n护\n臭\n横\n硒\n嗓\n接\n侦\n六\n露\n党\n馋\n驾\n剖\n高\n侬\n妪\n幂\n猗\n绺\n骐\n央\n酐\n孝\n筝\n课\n徇\n缰\n门\n男\n西\n项\n句\n谙\n瞒\n秃\n篇\n教\n碲\n罚\n声\n呐\n景\n前\n富\n嘴\n鳌\n稀\n免\n朋\n啬\n睐\n去\n赈\n鱼\n住\n肩\n愕\n速\n旁\n波\n厅\n健\n茼\n厥\n鲟\n谅\n投\n攸\n炔\n数\n方\n击\n呋\n谈\n绩\n别\n愫\n僚\n躬\n鹧\n胪\n炳\n招\n喇\n膨\n泵\n蹦\n毛\n结\n5\n4\n谱\n识\n陕\n粽\n婚\n拟\n构\n且\n搜\n任\n潘\n比\n郢\n妨\n醪\n陀\n桔\n碘\n扎\n选\n哈\n骷\n楷\n亿\n明\n缆\n脯\n监\n睫\n逻\n婵\n共\n赴\n淝\n凡\n惦\n及\n达\n揖\n谩\n澹\n减\n焰\n蛹\n番\n祁\n柏\n员\n禄\n怡\n峤\n龙\n白\n叽\n生\n闯\n起\n细\n装\n谕\n竟\n聚\n钙\n上\n导\n渊\n按\n艾\n辘\n挡\n耒\n盹\n饪\n臀\n记\n邮\n蕙\n受\n各\n医\n搂\n普\n滇\n朗\n茸\n带\n翻\n酚\n(\n光\n堤\n墟\n蔷\n万\n幻\n〓\n瑙\n辈\n昧\n盏\n亘\n蛀\n吉\n铰\n请\n子\n假\n闻\n税\n井\n诩\n哨\n嫂\n好\n面\n琐\n校\n馊\n鬣\n缂\n营\n访\n炖\n占\n农\n缀\n否\n经\n钚\n棵\n趟\n张\n亟\n吏\n茶\n谨\n捻\n论\n迸\n堂\n玉\n信\n吧\n瞠\n乡\n姬\n寺\n咬\n溏\n苄\n皿\n意\n赉\n宝\n尔\n钰\n艺\n特\n唳\n踉\n都\n荣\n倚\n登\n荐\n丧\n奇\n涵\n批\n炭\n近\n符\n傩\n感\n道\n着\n菊\n虹\n仲\n众\n懈\n濯\n颞\n眺\n南\n释\n北\n缝\n标\n既\n茗\n整\n撼\n迤\n贲\n挎\n耱\n拒\n某\n妍\n卫\n哇\n英\n矶\n藩\n治\n他\n元\n领\n膜\n遮\n穗\n蛾\n飞\n荒\n棺\n劫\n么\n市\n火\n温\n拈\n棚\n洼\n转\n果\n奕\n卸\n迪\n伸\n泳\n斗\n邡\n侄\n涨\n屯\n萋\n胭\n氡\n崮\n枞\n惧\n冒\n彩\n斜\n手\n豚\n随\n旭\n淑\n妞\n形\n菌\n吲\n沱\n争\n驯\n歹\n挟\n兆\n柱\n传\n至\n包\n内\n响\n临\n红\n功\n弩\n衡\n寂\n禁\n老\n棍\n耆\n渍\n织\n害\n氵\n渑\n布\n载\n靥\n嗬\n虽\n苹\n咨\n娄\n库\n雉\n榜\n帜\n嘲\n套\n瑚\n亲\n簸\n欧\n边\n6\n腿\n旮\n抛\n吹\n瞳\n得\n镓\n梗\n厨\n继\n漾\n愣\n憨\n士\n策\n窑\n抑\n躯\n襟\n脏\n参\n贸\n言\n干\n绸\n鳄\n穷\n藜\n音\n折\n详\n)\n举\n悍\n甸\n癌\n黎\n谴\n死\n罩\n迁\n寒\n驷\n袖\n媒\n蒋\n掘\n模\n纠\n恣\n观\n祖\n蛆\n碍\n位\n稿\n主\n澧\n跌\n筏\n京\n锏\n帝\n贴\n证\n糠\n才\n黄\n鲸\n略\n炯\n饱\n四\n出\n园\n犀\n牧\n容\n汉\n杆\n浈\n汰\n瑷\n造\n虫\n瘩\n怪\n驴\n济\n应\n花\n沣\n谔\n夙\n旅\n价\n矿\n以\n考\ns\nu\n呦\n晒\n巡\n茅\n准\n肟\n瓴\n詹\n仟\n褂\n译\n桌\n混\n宁\n怦\n郑\n抿\n些\n余\n鄂\n饴\n攒\n珑\n群\n阖\n岔\n琨\n藓\n预\n环\n洮\n岌\n宀\n杲\n瀵\n最\n常\n囡\n周\n踊\n女\n鼓\n袭\n喉\n简\n范\n薯\n遐\n疏\n粱\n黜\n禧\n法\n箔\n斤\n遥\n汝\n奥\n直\n贞\n撑\n置\n绱\n集\n她\n馅\n逗\n钧\n橱\n魉\n[\n恙\n躁\n唤\n9\n旺\n膘\n待\n脾\n惫\n购\n吗\n依\n盲\n度\n瘿\n蠖\n俾\n之\n镗\n拇\n鲵\n厝\n簧\n续\n款\n展\n啃\n表\n剔\n品\n钻\n腭\n损\n清\n锶\n统\n涌\n寸\n滨\n贪\n链\n吠\n冈\n伎\n迥\n咏\n吁\n览\n防\n迅\n失\n汾\n阔\n逵\n绀\n蔑\n列\n川\n凭\n努\n熨\n揪\n利\n俱\n绉\n抢\n鸨\n我\n即\n责\n膦\n易\n毓\n鹊\n刹\n玷\n岿\n空\n嘞\n绊\n排\n术\n估\n锷\n违\n们\n苟\n铜\n播\n肘\n件\n烫\n审\n鲂\n广\n像\n铌\n惰\n铟\n巳\n胍\n鲍\n康\n憧\n色\n恢\n想\n拷\n尤\n疳\n知\nS\nY\nF\nD\nA\n峄\n裕\n帮\n握\n搔\n氐\n氘\n难\n墒\n沮\n雨\n叁\n缥\n悴\n藐\n湫\n娟\n苑\n稠\n颛\n簇\n后\n阕\n闭\n蕤\n缚\n怎\n佞\n码\n嘤\n蔡\n痊\n舱\n螯\n帕\n赫\n昵\n升\n烬\n岫\n、\n疵\n蜻\n髁\n蕨\n隶\n烛\n械\n丑\n盂\n梁\n强\n鲛\n由\n拘\n揉\n劭\n龟\n撤\n钩\n呕\n孛\n费\n妻\n漂\n求\n阑\n崖\n秤\n甘\n通\n深\n补\n赃\n坎\n床\n啪\n承\n吼\n量\n暇\n钼\n烨\n阂\n擎\n脱\n逮\n称\nP\n神\n属\n矗\n华\n届\n狍\n葑\n汹\n育\n患\n窒\n蛰\n佼\n静\n槎\n运\n鳗\n庆\n逝\n曼\n疱\n克\n代\n官\n此\n麸\n耧\n蚌\n晟\n例\n础\n榛\n副\n测\n唰\n缢\n迹\n灬\n霁\n身\n岁\n赭\n扛\n又\n菡\n乜\n雾\n板\n读\n陷\n徉\n贯\n郁\n虑\n变\n钓\n菜\n圾\n现\n琢\n式\n乐\n维\n渔\n浜\n左\n吾\n脑\n钡\n警\nT\n啵\n拴\n偌\n漱\n湿\n硕\n止\n骼\n魄\n积\n燥\n联\n踢\n玛\n则\n窿\n见\n振\n畿\n送\n班\n钽\n您\n赵\n刨\n印\n讨\n踝\n籍\n谡\n舌\n崧\n汽\n蔽\n沪\n酥\n绒\n怖\n财\n帖\n肱\n私\n莎\n勋\n羔\n霸\n励\n哼\n帐\n将\n帅\n渠\n纪\n婴\n娩\n岭\n厘\n滕\n吻\n伤\n坝\n冠\n戊\n隆\n瘁\n介\n涧\n物\n黍\n并\n姗\n奢\n蹑\n掣\n垸\n锴\n命\n箍\n捉\n病\n辖\n琰\n眭\n迩\n艘\n绌\n繁\n寅\n若\n毋\n思\n诉\n类\n诈\n燮\n轲\n酮\n狂\n重\n反\n职\n筱\n县\n委\n磕\n绣\n奖\n晋\n濉\n志\n徽\n肠\n呈\n獐\n坻\n口\n片\n碰\n几\n村\n柿\n劳\n料\n获\n亩\n惕\n晕\n厌\n号\n罢\n池\n正\n鏖\n煨\n家\n棕\n复\n尝\n懋\n蜥\n锅\n岛\n扰\n队\n坠\n瘾\n钬\n@\n卧\n疣\n镇\n譬\n冰\n彷\n频\n黯\n据\n垄\n采\n八\n缪\n瘫\n型\n熹\n砰\n楠\n襁\n箐\n但\n嘶\n绳\n啤\n拍\n盥\n穆\n傲\n洗\n盯\n塘\n怔\n筛\n丿\n台\n恒\n喂\n葛\n永\n￥\n烟\n酒\n桦\n书\n砂\n蚝\n缉\n态\n瀚\n袄\n圳\n轻\n蛛\n超\n榧\n遛\n姒\n奘\n铮\n右\n荽\n望\n偻\n卡\n丶\n氰\n附\n做\n革\n索\n戚\n坨\n桷\n唁\n垅\n榻\n岐\n偎\n坛\n莨\n山\n殊\n微\n骇\n陈\n爨\n推\n嗝\n驹\n澡\n藁\n呤\n卤\n嘻\n糅\n逛\n侵\n郓\n酌\n德\n摇\n※\n鬃\n被\n慨\n殡\n羸\n昌\n泡\n戛\n鞋\n河\n宪\n沿\n玲\n鲨\n翅\n哽\n源\n铅\n语\n照\n邯\n址\n荃\n佬\n顺\n鸳\n町\n霭\n睾\n瓢\n夸\n椁\n晓\n酿\n痈\n咔\n侏\n券\n噎\n湍\n签\n嚷\n离\n午\n尚\n社\n锤\n背\n孟\n使\n浪\n缦\n潍\n鞅\n军\n姹\n驶\n笑\n鳟\n鲁\n》\n孽\n钜\n绿\n洱\n礴\n焯\n椰\n颖\n囔\n乌\n孔\n巴\n互\n性\n椽\n哞\n聘\n昨\n早\n暮\n胶\n炀\n隧\n低\n彗\n昝\n铁\n呓\n氽\n藉\n喔\n癖\n瑗\n姨\n权\n胱\n韦\n堑\n蜜\n酋\n楝\n砝\n毁\n靓\n歙\n锲\n究\n屋\n喳\n骨\n辨\n碑\n武\n鸠\n宫\n辜\n烊\n适\n坡\n殃\n培\n佩\n供\n走\n蜈\n迟\n翼\n况\n姣\n凛\n浔\n吃\n飘\n债\n犟\n金\n促\n苛\n崇\n坂\n莳\n畔\n绂\n兵\n蠕\n斋\n根\n砍\n亢\n欢\n恬\n崔\n剁\n餐\n榫\n快\n扶\n‖\n濒\n缠\n鳜\n当\n彭\n驭\n浦\n篮\n昀\n锆\n秸\n钳\n弋\n娣\n瞑\n夷\n龛\n苫\n拱\n致\n%\n嵊\n障\n隐\n弑\n初\n娓\n抉\n汩\n累\n蓖\n\"\n唬\n助\n苓\n昙\n押\n毙\n破\n城\n郧\n逢\n嚏\n獭\n瞻\n溱\n婿\n赊\n跨\n恼\n璧\n萃\n姻\n貉\n灵\n炉\n密\n氛\n陶\n砸\n谬\n衔\n点\n琛\n沛\n枳\n层\n岱\n诺\n脍\n榈\n埂\n征\n冷\n裁\n打\n蹴\n素\n瘘\n逞\n蛐\n聊\n激\n腱\n萘\n踵\n飒\n蓟\n吆\n取\n咙\n簋\n涓\n矩\n曝\n挺\n揣\n座\n你\n史\n舵\n焱\n尘\n苏\n笈\n脚\n溉\n榨\n诵\n樊\n邓\n焊\n义\n庶\n儋\n蟋\n蒲\n赦\n呷\n杞\n诠\n豪\n还\n试\n颓\n茉\n太\n除\n紫\n逃\n痴\n草\n充\n鳕\n珉\n祗\n墨\n渭\n烩\n蘸\n慕\n璇\n镶\n穴\n嵘\n恶\n骂\n险\n绋\n幕\n碉\n肺\n戳\n刘\n潞\n秣\n纾\n潜\n銮\n洛\n须\n罘\n销\n瘪\n汞\n兮\n屉\nr\n林\n厕\n质\n探\n划\n狸\n殚\n善\n煊\n烹\n〒\n锈\n逯\n宸\n辍\n泱\n柚\n袍\n远\n蹋\n嶙\n绝\n峥\n娥\n缍\n雀\n徵\n认\n镱\n谷\n=\n贩\n勉\n撩\n鄯\n斐\n洋\n非\n祚\n泾\n诒\n饿\n撬\n威\n晷\n搭\n芍\n锥\n笺\n蓦\n候\n琊\n档\n礁\n沼\n卵\n荠\n忑\n朝\n凹\n瑞\n头\n仪\n弧\n孵\n畏\n铆\n突\n衲\n车\n浩\n气\n茂\n悖\n厢\n枕\n酝\n戴\n湾\n邹\n飚\n攘\n锂\n写\n宵\n翁\n岷\n无\n喜\n丈\n挑\n嗟\n绛\n殉\n议\n槽\n具\n醇\n淞\n笃\n郴\n阅\n饼\n底\n壕\n砚\n弈\n询\n缕\n庹\n翟\n零\n筷\n暨\n舟\n闺\n甯\n撞\n麂\n茌\n蔼\n很\n珲\n捕\n棠\n角\n阉\n媛\n娲\n诽\n剿\n尉\n爵\n睬\n韩\n诰\n匣\n危\n糍\n镯\n立\n浏\n阳\n少\n盆\n舔\n擘\n匪\n申\n尬\n铣\n旯\n抖\n赘\n瓯\n居\nˇ\n哮\n游\n锭\n茏\n歌\n坏\n甚\n秒\n舞\n沙\n仗\n劲\n潺\n阿\n燧\n郭\n嗖\n霏\n忠\n材\n奂\n耐\n跺\n砀\n输\n岖\n媳\n氟\n极\n摆\n灿\n今\n扔\n腻\n枝\n奎\n药\n熄\n吨\n话\nq\n额\n慑\n嘌\n协\n喀\n壳\n埭\n视\n著\n於\n愧\n陲\n翌\n峁\n颅\n佛\n腹\n聋\n侯\n咎\n叟\n秀\n颇\n存\n较\n罪\n哄\n岗\n扫\n栏\n钾\n羌\n己\n璨\n枭\n霉\n煌\n涸\n衿\n键\n镝\n益\n岢\n奏\n连\n夯\n睿\n冥\n均\n糖\n狞\n蹊\n稻\n爸\n刿\n胥\n煜\n丽\n肿\n璃\n掸\n跚\n灾\n垂\n樾\n濑\n乎\n莲\n窄\n犹\n撮\n战\n馄\n软\n络\n显\n鸢\n胸\n宾\n妲\n恕\n埔\n蝌\n份\n遇\n巧\n瞟\n粒\n恰\n剥\n桡\n博\n讯\n凯\n堇\n阶\n滤\n卖\n斌\n骚\n彬\n兑\n磺\n樱\n舷\n两\n娱\n福\n仃\n差\n找\n桁\n÷\n净\n把\n阴\n污\n戬\n雷\n碓\n蕲\n楚\n罡\n焖\n抽\n妫\n咒\n仑\n闱\n尽\n邑\n菁\n爱\n贷\n沥\n鞑\n牡\n嗉\n崴\n骤\n塌\n嗦\n订\n拮\n滓\n捡\n锻\n次\n坪\n杩\n臃\n箬\n融\n珂\n鹗\n宗\n枚\n降\n鸬\n妯\n阄\n堰\n盐\n毅\n必\n杨\n崃\n俺\n甬\n状\n莘\n货\n耸\n菱\n腼\n铸\n唏\n痤\n孚\n澳\n懒\n溅\n翘\n疙\n杷\n淼\n缙\n骰\n喊\n悉\n砻\n坷\n艇\n赁\n界\n谤\n纣\n宴\n晃\n茹\n归\n饭\n梢\n铡\n街\n抄\n肼\n鬟\n苯\n颂\n撷\n戈\n炒\n咆\n茭\n瘙\n负\n仰\n客\n琉\n铢\n封\n卑\n珥\n椿\n镧\n窨\n鬲\n寿\n御\n袤\n铃\n萎\n砖\n餮\n脒\n裳\n肪\n孕\n嫣\n馗\n嵇\n恳\n氯\n江\n石\n褶\n冢\n祸\n阻\n狈\n羞\n银\n靳\n透\n咳\n叼\n敷\n芷\n啥\n它\n瓤\n兰\n痘\n懊\n逑\n肌\n往\n捺\n坊\n甩\n呻\n〃\n沦\n忘\n膻\n祟\n菅\n剧\n崆\n智\n坯\n臧\n霍\n墅\n攻\n眯\n倘\n拢\n骠\n铐\n庭\n岙\n瓠\n′\n缺\n泥\n迢\n捶\n?\n？\n郏\n喙\n掷\n沌\n纯\n秘\n种\n听\n绘\n固\n螨\n团\n香\n盗\n妒\n埚\n蓝\n拖\n旱\n荞\n铀\n血\n遏\n汲\n辰\n叩\n拽\n幅\n硬\n惶\n桀\n漠\n措\n泼\n唑\n齐\n肾\n念\n酱\n虚\n屁\n耶\n旗\n砦\n闵\n婉\n馆\n拭\n绅\n韧\n忏\n窝\n醋\n葺\n顾\n辞\n倜\n堆\n辋\n逆\n玟\n贱\n疾\n董\n惘\n倌\n锕\n淘\n嘀\n莽\n俭\n笏\n绑\n鲷\n杈\n择\n蟀\n粥\n嗯\n驰\n逾\n案\n谪\n褓\n胫\n哩\n昕\n颚\n鲢\n绠\n躺\n鹄\n崂\n儒\n俨\n丝\n尕\n泌\n啊\n萸\n彰\n幺\n吟\n骄\n苣\n弦\n脊\n瑰\n〈\n诛\n镁\n析\n闪\n剪\n侧\n哟\n框\n螃\n守\n嬗\n燕\n狭\n铈\n缮\n概\n迳\n痧\n鲲\n俯\n售\n笼\n痣\n扉\n挖\n满\n咋\n援\n邱\n扇\n歪\n便\n玑\n绦\n峡\n蛇\n叨\n〖\n泽\n胃\n斓\n喋\n怂\n坟\n猪\n该\n蚬\n炕\n弥\n赞\n棣\n晔\n娠\n挲\n狡\n创\n疖\n铕\n镭\n稷\n挫\n弭\n啾\n翔\n粉\n履\n苘\n哦\n楼\n秕\n铂\n土\n锣\n瘟\n挣\n栉\n习\n享\n桢\n袅\n磨\n桂\n谦\n延\n坚\n蔚\n噗\n署\n谟\n猬\n钎\n恐\n嬉\n雒\n倦\n衅\n亏\n璩\n睹\n刻\n殿\n王\n算\n雕\n麻\n丘\n柯\n骆\n丸\n塍\n谚\n添\n鲈\n垓\n桎\n蚯\n芥\n予\n飕\n镦\n谌\n窗\n醚\n菀\n亮\n搪\n莺\n蒿\n羁\n足\nJ\n真\n轶\n悬\n衷\n靛\n翊\n掩\n哒\n炅\n掐\n冼\n妮\nl\n谐\n稚\n荆\n擒\n犯\n陵\n虏\n浓\n崽\n刍\n陌\n傻\n孜\n千\n靖\n演\n矜\n钕\n煽\n杰\n酗\n渗\n伞\n栋\n俗\n泫\n戍\n罕\n沾\n疽\n灏\n煦\n芬\n磴\n叱\n阱\n榉\n湃\n蜀\n叉\n醒\n彪\n租\n郡\n篷\n屎\n良\n垢\n隗\n弱\n陨\n峪\n砷\n掴\n颁\n胎\n雯\n绵\n贬\n沐\n撵\n隘\n篙\n暖\n曹\n陡\n栓\n填\n臼\n彦\n瓶\n琪\n潼\n哪\n鸡\n摩\n啦\n俟\n锋\n域\n耻\n蔫\n疯\n纹\n撇\n毒\n绶\n痛\n酯\n忍\n爪\n赳\n歆\n嘹\n辕\n烈\n册\n朴\n钱\n吮\n毯\n癜\n娃\n谀\n邵\n厮\n炽\n璞\n邃\n丐\n追\n词\n瓒\n忆\n轧\n芫\n谯\n喷\n弟\n半\n冕\n裙\n掖\n墉\n绮\n寝\n苔\n势\n顷\n褥\n切\n衮\n君\n佳\n嫒\n蚩\n霞\n佚\n洙\n逊\n镖\n暹\n唛\n&\n殒\n顶\n碗\n獗\n轭\n铺\n蛊\n废\n恹\n汨\n崩\n珍\n那\n杵\n曲\n纺\n夏\n薰\n傀\n闳\n淬\n姘\n舀\n拧\n卷\n楂\n恍\n讪\n厩\n寮\n篪\n赓\n乘\n灭\n盅\n鞣\n沟\n慎\n挂\n饺\n鼾\n杳\n树\n缨\n丛\n絮\n娌\n臻\n嗳\n篡\n侩\n述\n衰\n矛\n圈\n蚜\n匕\n筹\n匿\n濞\n晨\n叶\n骋\n郝\n挚\n蚴\n滞\n增\n侍\n描\n瓣\n吖\n嫦\n蟒\n匾\n圣\n赌\n毡\n癞\n恺\n百\n曳\n需\n篓\n肮\n庖\n帏\n卿\n驿\n遗\n蹬\n鬓\n骡\n歉\n芎\n胳\n屐\n禽\n烦\n晌\n寄\n媾\n狄\n翡\n苒\n船\n廉\n终\n痞\n殇\n々\n畦\n饶\n改\n拆\n悻\n萄\n￡\n瓿\n乃\n訾\n桅\n匮\n溧\n拥\n纱\n铍\n骗\n蕃\n龋\n缬\n父\n佐\n疚\n栎\n醍\n掳\n蓄\nx\n惆\n颜\n鲆\n榆\n〔\n猎\n敌\n暴\n谥\n鲫\n贾\n罗\n玻\n缄\n扦\n芪\n癣\n落\n徒\n臾\n恿\n猩\n托\n邴\n肄\n牵\n春\n陛\n耀\n刊\n拓\n蓓\n邳\n堕\n寇\n枉\n淌\n啡\n湄\n兽\n酷\n萼\n碚\n濠\n萤\n夹\n旬\n戮\n梭\n琥\n椭\n昔\n勺\n蜊\n绐\n晚\n孺\n僵\n宣\n摄\n冽\n旨\n萌\n忙\n蚤\n眉\n噼\n蟑\n付\n契\n瓜\n悼\n颡\n壁\n曾\n窕\n颢\n澎\n仿\n俑\n浑\n嵌\n浣\n乍\n碌\n褪\n乱\n蔟\n隙\n玩\n剐\n葫\n箫\n纲\n围\n伐\n决\n伙\n漩\n瑟\n刑\n肓\n镳\n缓\n蹭\n氨\n皓\n典\n畲\n坍\n铑\n檐\n塑\n洞\n倬\n储\n胴\n淳\n戾\n吐\n灼\n惺\n妙\n毕\n珐\n缈\n虱\n盖\n羰\n鸿\n磅\n谓\n髅\n娴\n苴\n唷\n蚣\n霹\n抨\n贤\n唠\n犬\n誓\n逍\n庠\n逼\n麓\n籼\n釉\n呜\n碧\n秧\n氩\n摔\n霄\n穸\n纨\n辟\n妈\n映\n完\n牛\n缴\n嗷\n炊\n恩\n荔\n茆\n掉\n紊\n慌\n莓\n羟\n阙\n萁\n磐\n另\n蕹\n辱\n鳐\n湮\n吡\n吩\n唐\n睦\n垠\n舒\n圜\n冗\n瞿\n溺\n芾\n囱\n匠\n僳\n汐\n菩\n饬\n漓\n黑\n霰\n浸\n濡\n窥\n毂\n蒡\n兢\n驻\n鹉\n芮\n诙\n迫\n雳\n厂\n忐\n臆\n猴\n鸣\n蚪\n栈\n箕\n羡\n渐\n莆\n捍\n眈\n哓\n趴\n蹼\n埕\n嚣\n骛\n宏\n淄\n斑\n噜\n严\n瑛\n垃\n椎\n诱\n压\n庾\n绞\n焘\n廿\n抡\n迄\n棘\n夫\n纬\n锹\n眨\n瞌\n侠\n脐\n竞\n瀑\n孳\n骧\n遁\n姜\n颦\n荪\n滚\n萦\n伪\n逸\n粳\n爬\n锁\n矣\n役\n趣\n洒\n颔\n诏\n逐\n奸\n甭\n惠\n攀\n蹄\n泛\n尼\n拼\n阮\n鹰\n亚\n颈\n惑\n勒\n〉\n际\n肛\n爷\n刚\n钨\n丰\n养\n冶\n鲽\n辉\n蔻\n画\n覆\n皴\n妊\n麦\n返\n醉\n皂\n擀\n〗\n酶\n凑\n粹\n悟\n诀\n硖\n港\n卜\nz\n杀\n涕\n±\n舍\n铠\n抵\n弛\n段\n敝\n镐\n奠\n拂\n轴\n跛\n袱\ne\nt\n沉\n菇\n俎\n薪\n峦\n秭\n蟹\n历\n盟\n菠\n寡\n液\n肢\n喻\n染\n裱\n悱\n抱\n氙\n赤\n捅\n猛\n跑\n氮\n谣\n仁\n尺\n辊\n窍\n烙\n衍\n架\n擦\n倏\n璐\n瑁\n币\n楞\n胖\n夔\n趸\n邛\n惴\n饕\n虔\n蝎\n§\n哉\n贝\n宽\n辫\n炮\n扩\n饲\n籽\n魏\n菟\n锰\n伍\n猝\n末\n琳\n哚\n蛎\n邂\n呀\n姿\n鄞\n却\n歧\n仙\n恸\n椐\n森\n牒\n寤\n袒\n婆\n虢\n雅\n钉\n朵\n贼\n欲\n苞\n寰\n故\n龚\n坭\n嘘\n咫\n礼\n硷\n兀\n睢\n汶\n’\n铲\n烧\n绕\n诃\n浃\n钿\n哺\n柜\n讼\n颊\n璁\n腔\n洽\n咐\n脲\n簌\n筠\n镣\n玮\n鞠\n谁\n兼\n姆\n挥\n梯\n蝴\n谘\n漕\n刷\n躏\n宦\n弼\nb\n垌\n劈\n麟\n莉\n揭\n笙\n渎\n仕\n嗤\n仓\n配\n怏\n抬\n错\n泯\n镊\n孰\n猿\n邪\n仍\n秋\n鼬\n壹\n歇\n吵\n炼\n<\n尧\n射\n柬\n廷\n胧\n霾\n凳\n隋\n肚\n浮\n梦\n祥\n株\n堵\n退\nL\n鹫\n跎\n凶\n毽\n荟\n炫\n栩\n玳\n甜\n沂\n鹿\n顽\n伯\n爹\n赔\n蛴\n徐\n匡\n欣\n狰\n缸\n雹\n蟆\n疤\n默\n沤\n啜\n痂\n衣\n禅\nw\ni\nh\n辽\n葳\n黝\n钗\n停\n沽\n棒\n馨\n颌\n肉\n吴\n硫\n悯\n劾\n娈\n马\n啧\n吊\n悌\n镑\n峭\n帆\n瀣\n涉\n咸\n疸\n滋\n泣\n翦\n拙\n癸\n钥\n蜒\n+\n尾\n庄\n凝\n泉\n婢\n渴\n谊\n乞\n陆\n锉\n糊\n鸦\n淮\nI\nB\nN\n晦\n弗\n乔\n庥\n葡\n尻\n席\n橡\n傣\n渣\n拿\n惩\n麋\n斛\n缃\n矮\n蛏\n岘\n鸽\n姐\n膏\n催\n奔\n镒\n喱\n蠡\n摧\n钯\n胤\n柠\n拐\n璋\n鸥\n卢\n荡\n倾\n^\n_\n珀\n逄\n萧\n塾\n掇\n贮\n笆\n聂\n圃\n冲\n嵬\nM\n滔\n笕\n值\n炙\n偶\n蜱\n搐\n梆\n汪\n蔬\n腑\n鸯\n蹇\n敞\n绯\n仨\n祯\n谆\n梧\n糗\n鑫\n啸\n豺\n囹\n猾\n巢\n柄\n瀛\n筑\n踌\n沭\n暗\n苁\n鱿\n蹉\n脂\n蘖\n牢\n热\n木\n吸\n溃\n宠\n序\n泞\n偿\n拜\n檩\n厚\n朐\n毗\n螳\n吞\n媚\n朽\n担\n蝗\n橘\n畴\n祈\n糟\n盱\n隼\n郜\n惜\n珠\n裨\n铵\n焙\n琚\n唯\n咚\n噪\n骊\n丫\n滢\n勤\n棉\n呸\n咣\n淀\n隔\n蕾\n窈\n饨\n挨\n煅\n短\n匙\n粕\n镜\n赣\n撕\n墩\n酬\n馁\n豌\n颐\n抗\n酣\n氓\n佑\n搁\n哭\n递\n耷\n涡\n桃\n贻\n碣\n截\n瘦\n昭\n镌\n蔓\n氚\n甲\n猕\n蕴\n蓬\n散\n拾\n纛\n狼\n猷\n铎\n埋\n旖\n矾\n讳\n囊\n糜\n迈\n粟\n蚂\n紧\n鲳\n瘢\n栽\n稼\n羊\n锄\n斟\n睁\n桥\n瓮\n蹙\n祉\n醺\n鼻\n昱\n剃\n跳\n篱\n跷\n蒜\n翎\n宅\n晖\n嗑\n壑\n峻\n癫\n屏\n狠\n陋\n袜\n途\n憎\n祀\n莹\n滟\n佶\n溥\n臣\n约\n盛\n峰\n磁\n慵\n婪\n拦\n莅\n朕\n鹦\n粲\n裤\n哎\n疡\n嫖\n琵\n窟\n堪\n谛\n嘉\n儡\n鳝\n斩\n郾\n驸\n酊\n妄\n胜\n贺\n徙\n傅\n噌\n钢\n栅\n庇\n恋\n匝\n巯\n邈\n尸\n锚\n粗\n佟\n蛟\n薹\n纵\n蚊\n郅\n绢\n锐\n苗\n俞\n篆\n淆\n膀\n鲜\n煎\n诶\n秽\n寻\n涮\n刺\n怀\n噶\n巨\n褰\n魅\n灶\n灌\n桉\n藕\n谜\n舸\n薄\n搀\n恽\n借\n牯\n痉\n渥\n愿\n亓\n耘\n杠\n柩\n锔\n蚶\n钣\n珈\n喘\n蹒\n幽\n赐\n稗\n晤\n莱\n泔\n扯\n肯\n菪\n裆\n腩\n豉\n疆\n骜\n腐\n倭\n珏\n唔\n粮\n亡\n润\n慰\n伽\n橄\n玄\n誉\n醐\n胆\n龊\n粼\n塬\n陇\n彼\n削\n嗣\n绾\n芽\n妗\n垭\n瘴\n爽\n薏\n寨\n龈\n泠\n弹\n赢\n漪\n猫\n嘧\n涂\n恤\n圭\n茧\n烽\n屑\n痕\n巾\n赖\n荸\n凰\n腮\n畈\n亵\n蹲\n偃\n苇\n澜\n艮\n换\n骺\n烘\n苕\n梓\n颉\n肇\n哗\n悄\n氤\n涠\n葬\n屠\n鹭\n植\n竺\n佯\n诣\n鲇\n瘀\n鲅\n邦\n移\n滁\n冯\n耕\n癔\n戌\n茬\n沁\n巩\n悠\n湘\n洪\n痹\n锟\n循\n谋\n腕\n鳃\n钠\n捞\n焉\n迎\n碱\n伫\n急\n榷\n奈\n邝\n卯\n辄\n皲\n卟\n醛\n畹\n忧\n稳\n雄\n昼\n缩\n阈\n睑\n扌\n耗\n曦\n涅\n捏\n瞧\n邕\n淖\n漉\n铝\n耦\n禹\n湛\n喽\n莼\n琅\n诸\n苎\n纂\n硅\n始\n嗨\n傥\n燃\n臂\n赅\n嘈\n呆\n贵\n屹\n壮\n肋\n亍\n蚀\n卅\n豹\n腆\n邬\n迭\n浊\n}\n童\n螂\n捐\n圩\n勐\n触\n寞\n汊\n壤\n荫\n膺\n渌\n芳\n懿\n遴\n螈\n泰\n蓼\n蛤\n茜\n舅\n枫\n朔\n膝\n眙\n避\n梅\n判\n鹜\n璜\n牍\n缅\n垫\n藻\n黔\n侥\n惚\n懂\n踩\n腰\n腈\n札\n丞\n唾\n慈\n顿\n摹\n荻\n琬\n~\n斧\n沈\n滂\n胁\n胀\n幄\n莜\nZ\n匀\n鄄\n掌\n绰\n茎\n焚\n赋\n萱\n谑\n汁\n铒\n瞎\n夺\n蜗\n野\n娆\n冀\n弯\n篁\n懵\n灞\n隽\n芡\n脘\n俐\n辩\n芯\n掺\n喏\n膈\n蝈\n觐\n悚\n踹\n蔗\n熠\n鼠\n呵\n抓\n橼\n峨\n畜\n缔\n禾\n崭\n弃\n熊\n摒\n凸\n拗\n穹\n蒙\n抒\n祛\n劝\n闫\n扳\n阵\n醌\n踪\n喵\n侣\n搬\n仅\n荧\n赎\n蝾\n琦\n买\n婧\n瞄\n寓\n皎\n冻\n赝\n箩\n莫\n瞰\n郊\n笫\n姝\n筒\n枪\n遣\n煸\n袋\n舆\n痱\n涛\n母\n〇\n启\n践\n耙\n绲\n盘\n遂\n昊\n搞\n槿\n诬\n纰\n泓\n惨\n檬\n亻\n越\nC\no\n憩\n熵\n祷\n钒\n暧\n塔\n阗\n胰\n咄\n娶\n魔\n琶\n钞\n邻\n扬\n杉\n殴\n咽\n弓\n〆\n髻\n】\n吭\n揽\n霆\n拄\n殖\n脆\n彻\n岩\n芝\n勃\n辣\n剌\n钝\n嘎\n甄\n佘\n皖\n伦\n授\n徕\n憔\n挪\n皇\n庞\n稔\n芜\n踏\n溴\n兖\n卒\n擢\n饥\n鳞\n煲\n‰\n账\n颗\n叻\n斯\n捧\n鳍\n琮\n讹\n蛙\n纽\n谭\n酸\n兔\n莒\n睇\n伟\n觑\n羲\n嗜\n宜\n褐\n旎\n辛\n卦\n诘\n筋\n鎏\n溪\n挛\n熔\n阜\n晰\n鳅\n丢\n奚\n灸\n呱\n献\n陉\n黛\n鸪\n甾\n萨\n疮\n拯\n洲\n疹\n辑\n叙\n恻\n谒\n允\n柔\n烂\n氏\n逅\n漆\n拎\n惋\n扈\n湟\n纭\n啕\n掬\n擞\n哥\n忽\n涤\n鸵\n靡\n郗\n瓷\n扁\n廊\n怨\n雏\n钮\n敦\nE\n懦\n憋\n汀\n拚\n啉\n腌\n岸\nf\n痼\n瞅\n尊\n咀\n眩\n飙\n忌\n仝\n迦\n熬\n毫\n胯\n篑\n茄\n腺\n凄\n舛\n碴\n锵\n诧\n羯\n後\n漏\n汤\n宓\n仞\n蚁\n壶\n谰\n皑\n铄\n棰\n罔\n辅\n晶\n苦\n牟\n闽\n\\\n烃\n饮\n聿\n丙\n蛳\n朱\n煤\n涔\n鳖\n犁\n罐\n荼\n砒\n淦\n妤\n黏\n戎\n孑\n婕\n瑾\n戢\n钵\n枣\n捋\n砥\n衩\n狙\n桠\n稣\n阎\n肃\n梏\n诫\n孪\n昶\n婊\n衫\n嗔\n侃\n塞\n蜃\n樵\n峒\n貌\n屿\n欺\n缫\n阐\n栖\n诟\n珞\n荭\n吝\n萍\n嗽\n恂\n啻\n蜴\n磬\n峋\n俸\n豫\n谎\n徊\n镍\n韬\n魇\n晴\nU\n囟\n猜\n蛮\n坐\n囿\n伴\n亭\n肝\n佗\n蝠\n妃\n胞\n滩\n榴\n氖\n垩\n苋\n砣\n扪\n馏\n姓\n轩\n厉\n夥\n侈\n禀\n垒\n岑\n赏\n钛\n辐\n痔\n披\n纸\n碳\n“\n坞\n蠓\n挤\n荥\n沅\n悔\n铧\n帼\n蒌\n蝇\na\np\ny\nn\ng\n哀\n浆\n瑶\n凿\n桶\n馈\n皮\n奴\n苜\n佤\n伶\n晗\n铱\n炬\n优\n弊\n氢\n恃\n甫\n攥\n端\n锌\n灰\n稹\n炝\n曙\n邋\n亥\n眶\n碾\n拉\n萝\n绔\n捷\n浍\n腋\n姑\n菖\n凌\n涞\n麽\n锢\n桨\n潢\n绎\n镰\n殆\n锑\n渝\n铬\n困\n绽\n觎\n匈\n糙\n暑\n裹\n鸟\n盔\n肽\n迷\n綦\n『\n亳\n佝\n俘\n钴\n觇\n骥\n仆\n疝\n跪\n婶\n郯\n瀹\n唉\n脖\n踞\n针\n晾\n忒\n扼\n瞩\n叛\n椒\n疟\n嗡\n邗\n肆\n跆\n玫\n忡\n捣\n咧\n唆\n艄\n蘑\n潦\n笛\n阚\n沸\n泻\n掊\n菽\n贫\n斥\n髂\n孢\n镂\n赂\n麝\n鸾\n屡\n衬\n苷\n恪\n叠\n希\n粤\n爻\n喝\n茫\n惬\n郸\n绻\n庸\n撅\n碟\n宄\n妹\n膛\n叮\n饵\n崛\n嗲\n椅\n冤\n搅\n咕\n敛\n尹\n垦\n闷\n蝉\n霎\n勰\n败\n蓑\n泸\n肤\n鹌\n幌\n焦\n浠\n鞍\n刁\n舰\n乙\n竿\n裔\n。\n茵\n函\n伊\n兄\n丨\n娜\n匍\n謇\n莪\n宥\n似\n蝽\n翳\n酪\n翠\n粑\n薇\n祢\n骏\n赠\n叫\nQ\n噤\n噻\n竖\n芗\n莠\n潭\n俊\n羿\n耜\nO\n郫\n趁\n嗪\n囚\n蹶\n芒\n洁\n笋\n鹑\n敲\n硝\n啶\n堡\n渲\n揩\n』\n携\n宿\n遒\n颍\n扭\n棱\n割\n萜\n蔸\n葵\n琴\n捂\n饰\n衙\n耿\n掠\n募\n岂\n窖\n涟\n蔺\n瘤\n柞\n瞪\n怜\n匹\n距\n楔\n炜\n哆\n秦\n缎\n幼\n茁\n绪\n痨\n恨\n楸\n娅\n瓦\n桩\n雪\n嬴\n伏\n榔\n妥\n铿\n拌\n眠\n雍\n缇\n‘\n卓\n搓\n哌\n觞\n噩\n屈\n哧\n髓\n咦\n巅\n娑\n侑\n淫\n膳\n祝\n勾\n姊\n莴\n胄\n疃\n薛\n蜷\n胛\n巷\n芙\n芋\n熙\n闰\n勿\n窃\n狱\n剩\n钏\n幢\n陟\n铛\n慧\n靴\n耍\nk\n浙\n浇\n飨\n惟\n绗\n祜\n澈\n啼\n咪\n磷\n摞\n诅\n郦\n抹\n跃\n壬\n吕\n肖\n琏\n颤\n尴\n剡\n抠\n凋\n赚\n泊\n津\n宕\n殷\n倔\n氲\n漫\n邺\n涎\n怠\n$\n垮\n荬\n遵\n俏\n叹\n噢\n饽\n蜘\n孙\n筵\n疼\n鞭\n羧\n牦\n箭\n潴\nc\n眸\n祭\n髯\n啖\n坳\n愁\n芩\n驮\n倡\n巽\n穰\n沃\n胚\n怒\n凤\n槛\n剂\n趵\n嫁\nv\n邢\n灯\n鄢\n桐\n睽\n檗\n锯\n槟\n婷\n嵋\n圻\n诗\n蕈\n颠\n遭\n痢\n芸\n怯\n馥\n竭\n锗\n徜\n恭\n遍\n籁\n剑\n嘱\n苡\n龄\n僧\n桑\n潸\n弘\n澶\n楹\n悲\n讫\n愤\n腥\n悸\n谍\n椹\n呢\n桓\n葭\n攫\n阀\n翰\n躲\n敖\n柑\n郎\n笨\n橇\n呃\n魁\n燎\n脓\n葩\n磋\n垛\n玺\n狮\n沓\n砜\n蕊\n锺\n罹\n蕉\n翱\n虐\n闾\n巫\n旦\n茱\n嬷\n枯\n鹏\n贡\n芹\n汛\n矫\n绁\n拣\n禺\n佃\n讣\n舫\n惯\n乳\n趋\n疲\n挽\n岚\n虾\n衾\n蠹\n蹂\n飓\n氦\n铖\n孩\n稞\n瑜\n壅\n掀\n勘\n妓\n畅\n髋\nW\n庐\n牲\n蓿\n榕\n练\n垣\n唱\n邸\n菲\n昆\n婺\n穿\n绡\n麒\n蚱\n掂\n愚\n泷\n涪\n漳\n妩\n娉\n榄\n讷\n觅\n旧\n藤\n煮\n呛\n柳\n腓\n叭\n庵\n烷\n阡\n罂\n蜕\n擂\n猖\n咿\n媲\n脉\n【\n沏\n貅\n黠\n熏\n哲\n烁\n坦\n酵\n兜\n×\n潇\n撒\n剽\n珩\n圹\n乾\n摸\n樟\n帽\n嗒\n襄\n魂\n轿\n憬\n锡\n〕\n喃\n皆\n咖\n隅\n脸\n残\n泮\n袂\n鹂\n珊\n囤\n捆\n咤\n误\n徨\n闹\n淙\n芊\n淋\n怆\n囗\n拨\n梳\n渤\nR\nG\n绨\n蚓\n婀\n幡\n狩\n麾\n谢\n唢\n裸\n旌\n伉\n纶\n裂\n驳\n砼\n咛\n澄\n樨\n蹈\n宙\n澍\n倍\n貔\n操\n勇\n蟠\n摈\n砧\n虬\n够\n缁\n悦\n藿\n撸\n艹\n摁\n淹\n豇\n虎\n榭\nˉ\n吱\nd\n°\n喧\n荀\n踱\n侮\n奋\n偕\n饷\n犍\n惮\n坑\n璎\n徘\n宛\n妆\n袈\n倩\n窦\n昂\n荏\n乖\nK\n怅\n撰\n鳙\n牙\n袁\n酞\nX\n痿\n琼\n闸\n雁\n趾\n荚\n虻\n涝\n《\n杏\n韭\n偈\n烤\n绫\n鞘\n卉\n症\n遢\n蓥\n诋\n杭\n荨\n匆\n竣\n簪\n辙\n敕\n虞\n丹\n缭\n咩\n黟\nm\n淤\n瑕\n咂\n铉\n硼\n茨\n嶂\n痒\n畸\n敬\n涿\n粪\n窘\n熟\n叔\n嫔\n盾\n忱\n裘\n憾\n梵\n赡\n珙\n咯\n娘\n庙\n溯\n胺\n葱\n痪\n摊\n荷\n卞\n乒\n髦\n寐\n铭\n坩\n胗\n枷\n爆\n溟\n嚼\n羚\n砬\n轨\n惊\n挠\n罄\n竽\n菏\n氧\n浅\n楣\n盼\n枢\n炸\n阆\n杯\n谏\n噬\n淇\n渺\n俪\n秆\n墓\n泪\n跻\n砌\n痰\n垡\n渡\n耽\n釜\n讶\n鳎\n煞\n呗\n韶\n舶\n绷\n鹳\n缜\n旷\n铊\n皱\n龌\n檀\n霖\n奄\n槐\n艳\n蝶\n旋\n哝\n赶\n骞\n蚧\n腊\n盈\n丁\n`\n蜚\n矸\n蝙\n睨\n嚓\n僻\n鬼\n醴\n夜\n彝\n磊\n笔\n拔\n栀\n糕\n厦\n邰\n纫\n逭\n纤\n眦\n膊\n馍\n躇\n烯\n蘼\n冬\n诤\n暄\n骶\n哑\n瘠\n」\n臊\n丕\n愈\n咱\n螺\n擅\n跋\n搏\n硪\n谄\n笠\n淡\n嘿\n骅\n谧\n鼎\n皋\n姚\n歼\n蠢\n驼\n耳\n胬\n挝\n涯\n狗\n蒽\n孓\n犷\n凉\n芦\n箴\n铤\n孤\n嘛\n坤\nV\n茴\n朦\n挞\n尖\n橙\n诞\n搴\n碇\n洵\n浚\n帚\n蜍\n漯\n柘\n嚎\n讽\n芭\n荤\n咻\n祠\n秉\n跖\n埃\n吓\n糯\n眷\n馒\n惹\n娼\n鲑\n嫩\n讴\n轮\n瞥\n靶\n褚\n乏\n缤\n宋\n帧\n删\n驱\n碎\n扑\n俩\n俄\n偏\n涣\n竹\n噱\n皙\n佰\n渚\n唧\n斡\n#\n镉\n刀\n崎\n筐\n佣\n夭\n贰\n肴\n峙\n哔\n艿\n匐\n牺\n镛\n缘\n仡\n嫡\n劣\n枸\n堀\n梨\n簿\n鸭\n蒸\n亦\n稽\n浴\n{\n衢\n束\n槲\nj\n阁\n揍\n疥\n棋\n潋\n聪\n窜\n乓\n睛\n插\n冉\n阪\n苍\n搽\n「\n蟾\n螟\n幸\n仇\n樽\n撂\n慢\n跤\n幔\n俚\n淅\n覃\n觊\n溶\n妖\n帛\n侨\n曰\n妾\n泗\n·\n：\n瀘\n風\nË\n（\n）\n∶\n紅\n紗\n瑭\n雲\n頭\n鶏\n財\n許\n•\n¥\n樂\n焗\n麗\n—\n；\n滙\n東\n榮\n繪\n興\n…\n門\n業\nπ\n楊\n國\n顧\né\n盤\n寳\nΛ\n龍\n鳳\n島\n誌\n緣\n結\n銭\n萬\n勝\n祎\n璟\n優\n歡\n臨\n時\n購\n＝\n★\n藍\n昇\n鐵\n觀\n勅\n農\n聲\n畫\n兿\n術\n發\n劉\n記\n專\n耑\n園\n書\n壴\n種\nΟ\n●\n褀\n號\n銀\n匯\n敟\n锘\n葉\n橪\n廣\n進\n蒄\n鑽\n阝\n祙\n貢\n鍋\n豊\n夬\n喆\n團\n閣\n開\n燁\n賓\n館\n酡\n沔\n順\n＋\n硚\n劵\n饸\n陽\n車\n湓\n復\n萊\n氣\n軒\n華\n堃\n迮\n纟\n戶\n馬\n學\n裡\n電\n嶽\n獨\nマ\nシ\nサ\nジ\n燘\n袪\n環\n❤\n臺\n灣\n専\n賣\n孖\n聖\n攝\n線\n▪\nα\n傢\n俬\n夢\n達\n莊\n喬\n貝\n薩\n劍\n羅\n壓\n棛\n饦\n尃\n璈\n囍\n醫\nＧ\nＩ\nＡ\n＃\nＮ\n鷄\n髙\n嬰\n啓\n約\n隹\n潔\n賴\n藝\n～\n寶\n籣\n麺\n　\n嶺\n√\n義\n網\n峩\n長\n∧\n魚\n機\n構\n②\n鳯\n偉\nＬ\nＢ\n㙟\n畵\n鴿\n＇\n詩\n溝\n嚞\n屌\n藔\n佧\n玥\n蘭\n織\n１\n３\n９\n０\n７\n點\n砭\n鴨\n鋪\n銘\n廳\n弍\n‧\n創\n湯\n坶\n℃\n卩\n骝\n＆\n烜\n荘\n當\n潤\n扞\n係\n懷\n碶\n钅\n蚨\n讠\n☆\n叢\n爲\n埗\n涫\n塗\n→\n楽\n現\n鯨\n愛\n瑪\n鈺\n忄\n悶\n藥\n飾\n樓\n視\n孬\nㆍ\n燚\n苪\n師\n①\n丼\n锽\n│\n韓\n標\nè\n兒\n閏\n匋\n張\n漢\nÜ\n髪\n會\n閑\n檔\n習\n裝\nの\n峯\n菘\n輝\nИ\n雞\n釣\n億\n浐\nＫ\nＯ\nＲ\n８\nＨ\nＥ\nＰ\nＴ\nＷ\nＤ\nＳ\nＣ\nＭ\nＦ\n姌\n饹\n»\n晞\n廰\nä\n嵯\n鷹\n負\n飲\n絲\n冚\n楗\n澤\n綫\n區\n❋\n←\n質\n靑\n揚\n③\n滬\n統\n産\n協\n﹑\n乸\n畐\n經\n運\n際\n洺\n岽\n為\n粵\n諾\n崋\n豐\n碁\nɔ\nＶ\n２\n６\n齋\n誠\n訂\n´\n勑\n雙\n陳\n無\ní\n泩\n媄\n夌\n刂\nｉ\nｃ\nｔ\nｏ\nｒ\nａ\n嘢\n耄\n燴\n暃\n壽\n媽\n靈\n抻\n體\n唻\nÉ\n冮\n甹\n鎮\n錦\nʌ\n蜛\n蠄\n尓\n駕\n戀\n飬\n逹\n倫\n貴\n極\nЯ\nЙ\n寬\n磚\n嶪\n郎\n職\n｜\n間\nｎ\nｄ\n剎\n伈\n課\n飛\n橋\n瘊\n№\n譜\n骓\n圗\n滘\n縣\n粿\n咅\n養\n濤\n彳\n®\n％\nⅡ\n啰\n㴪\n見\n矞\n薬\n糁\n邨\n鲮\n顔\n罱\nЗ\n選\n話\n贏\n氪\n俵\n競\n瑩\n繡\n枱\nβ\n綉\ná\n獅\n爾\n™\n麵\n戋\n淩\n徳\n個\n劇\n場\n務\n簡\n寵\nｈ\n實\n膠\n轱\n圖\n築\n嘣\n樹\n㸃\n營\n耵\n孫\n饃\n鄺\n飯\n麯\n遠\n輸\n坫\n孃\n乚\n閃\n鏢\n㎡\n題\n廠\n關\n↑\n爺\n將\n軍\n連\n篦\n覌\n參\n箸\n－\n窠\n棽\n寕\n夀\n爰\n歐\n呙\n閥\n頡\n熱\n雎\n垟\n裟\n凬\n勁\n帑\n馕\n夆\n疌\n枼\n馮\n貨\n蒤\n樸\n彧\n旸\n靜\n龢\n暢\n㐱\n鳥\n珺\n鏡\n灡\n爭\n堷\n廚\nÓ\n騰\n診\n┅\n蘇\n褔\n凱\n頂\n豕\n亞\n帥\n嘬\n⊥\n仺\n桖\n複\n饣\n絡\n穂\n顏\n棟\n納\n▏\n濟\n親\n設\n計\n攵\n埌\n烺\nò\n頤\n燦\n蓮\n撻\n節\n講\n濱\n濃\n娽\n洳\n朿\n燈\n鈴\n護\n膚\n铔\n過\n補\nＺ\nＵ\n５\n４\n坋\n闿\n䖝\n餘\n缐\n铞\n貿\n铪\n桼\n趙\n鍊\n［\n㐂\n垚\n菓\n揸\n捲\n鐘\n滏\n𣇉\n爍\n輪\n燜\n鴻\n鮮\n動\n鹞\n鷗\n丄\n慶\n鉌\n翥\n飮\n腸\n⇋\n漁\n覺\n來\n熘\n昴\n翏\n鲱\n圧\n鄉\n萭\n頔\n爐\n嫚\nг\n貭\n類\n聯\n幛\n輕\n訓\n鑒\n夋\n锨\n芃\n珣\n䝉\n扙\n嵐\n銷\n處\nㄱ\n語\n誘\n苝\n歸\n儀\n燒\n楿\n內\n粢\n葒\n奧\n麥\n礻\n滿\n蠔\n穵\n瞭\n態\n鱬\n榞\n硂\n鄭\n黃\n煙\n祐\n奓\n逺\n＊\n瑄\n獲\n聞\n薦\n讀\n這\n樣\n決\n問\n啟\n們\n執\n説\n轉\n單\n隨\n唘\n帶\n倉\n庫\n還\n贈\n尙\n皺\n■\n餅\n產\n○\n∈\n報\n狀\n楓\n賠\n琯\n嗮\n禮\n｀\n傳\n＞\n≤\n嗞\nΦ\n≥\n換\n咭\n∣\n↓\n曬\nε\n応\n寫\n″\n終\n様\n純\n費\n療\n聨\n凍\n壐\n郵\nü\n黒\n∫\n製\n塊\n調\n軽\n確\n撃\n級\n馴\nⅢ\n涇\n繹\n數\n碼\n證\n狒\n処\n劑\n＜\n晧\n賀\n衆\n］\n櫥\n兩\n陰\n絶\n對\n鯉\n憶\n◎\nｐ\nｅ\nＹ\n蕒\n煖\n頓\n測\n試\n鼽\n僑\n碩\n妝\n帯\n≈\n鐡\n舖\n權\n喫\n倆\nˋ\n該\n悅\nā\n俫\n．\nｆ\nｓ\nｂ\nｍ\nｋ\nｇ\nｕ\nｊ\n貼\n淨\n濕\n針\n適\n備\nｌ\n／\n給\n謢\n強\n觸\n衛\n與\n⊙\n＄\n緯\n變\n⑴\n⑵\n⑶\n㎏\n殺\n∩\n幚\n─\n價\n▲\n離\nú\nó\n飄\n烏\n関\n閟\n﹝\n﹞\n邏\n輯\n鍵\n驗\n訣\n導\n歷\n屆\n層\n▼\n儱\n錄\n熳\nē\n艦\n吋\n錶\n辧\n飼\n顯\n④\n禦\n販\n気\n対\n枰\n閩\n紀\n幹\n瞓\n貊\n淚\n△\n眞\n墊\nΩ\n獻\n褲\n縫\n緑\n亜\n鉅\n餠\n｛\n｝\n◆\n蘆\n薈\n█\n◇\n溫\n彈\n晳\n粧\n犸\n穩\n訊\n崬\n凖\n熥\nП\n舊\n條\n紋\n圍\nⅣ\n筆\n尷\n難\n雜\n錯\n綁\n識\n頰\n鎖\n艶\n□\n殁\n殼\n⑧\n├\n▕\n鵬\nǐ\nō\nǒ\n糝\n綱\n▎\nμ\n盜\n饅\n醬\n籤\n蓋\n釀\n鹽\n據\nà\nɡ\n辦\n◥\n彐\n┌\n婦\n獸\n鲩\n伱\nī\n蒟\n蒻\n齊\n袆\n腦\n寧\n凈\n妳\n煥\n詢\n偽\n謹\n啫\n鯽\n騷\n鱸\n損\n傷\n鎻\n髮\n買\n冏\n儥\n両\n﹢\n∞\n載\n喰\nｚ\n羙\n悵\n燙\n曉\n員\n組\n徹\n艷\n痠\n鋼\n鼙\n縮\n細\n嚒\n爯\n≠\n維\n＂\n鱻\n壇\n厍\n帰\n浥\n犇\n薡\n軎\n²\n應\n醜\n刪\n緻\n鶴\n賜\n噁\n軌\n尨\n镔\n鷺\n槗\n彌\n葚\n濛\n請\n溇\n緹\n賢\n訪\n獴\n瑅\n資\n縤\n陣\n蕟\n栢\n韻\n祼\n恁\n伢\n謝\n劃\n涑\n總\n衖\n踺\n砋\n凉\n籃\n駿\n苼\n瘋\n昽\n紡\n驊\n腎\n﹗\n響\n杋\n剛\n嚴\n禪\n歓\n槍\n傘\n檸\n檫\n炣\n勢\n鏜\n鎢\n銑\n尐\n減\n奪\n惡\nθ\n僮\n婭\n臘\nū\nì\n殻\n鉄\n∑\n蛲\n焼\n緖\n續\n紹\n懮"},27546:function(n,r,e){"use strict";var t=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],a="undefined"===typeof globalThis?e.g:globalThis;n.exports=function(){for(var n=[],r=0;r<t.length;r++)"function"===typeof a[t[r]]&&(n[n.length]=t[r]);return n}},92814:function(n,r,e){"use strict";var t=e(42396),a=t("%Object.getOwnPropertyDescriptor%",!0);if(a)try{a([],"length")}catch(o){a=null}n.exports=a}}]);